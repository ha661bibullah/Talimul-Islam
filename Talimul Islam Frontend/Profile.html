<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <title>প্রোফাইল</title>
</head>
<body>





    <head class="navHandler">

        <!-- *full navigation bar start point -->
        <!-- *full navigation bar start point -->
            <style>
                @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap');
                
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                    font-family: 'Hind Siliguri', sans-serif;
                }
                
                body {
                    margin: 0;
                    padding: 0;
                    background-color: #fafafa;
                    padding-top: 80px; /* নেভবার হাইট অনুযায়ী অ্যাডজাস্ট করুন */
                }
                
                /* =============================================
                   নেভিগেশন বার স্টাইল
                ============================================= */
                
                nav {
                    width: 100%;
                    height: 60px; /* ছোট ডিভাইসের জন্য কমানো হয়েছে */
                    background-color: white;
                    position: fixed;
                    top: 0;
                    left: 0;
                    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    z-index: 90;
                    padding: 0 15px; /* পাশের প্যাডিং কমানো হয়েছে */
                    box-shadow: 0 3px 6px rgba(30, 30, 30, 0.15);
        
                }
                
                /* লেফট সেকশন - লোগো এবং মেনু আইটেম */
                .nav-left {
                    display: flex;
                    align-items: center;
                    gap: 15px;
                }
                
                /* লোগো স্টাইল */
                .logo {
                    font-size: 20px;
                    font-weight: 700;
                    color: #6A35F2;
                    text-decoration: none;
                    margin-top: 15px;
                }
                
                .logo img {
                    max-width: 120px; /* মোবাইলে লোগো সাইজ কমানো */
                    height: auto;
                }
                
                /* মেনু আইটেম কন্টেইনার */
                .menu-items {
                    display: flex;
                    gap: 20px;
                }
                
                .menu-item {
                    list-style: none;
                    position: relative;
                }
                
                .menu-link {
                    text-decoration: none;
                    color: #333;
                    font-weight: 500;
                    font-size: 15px;
                    position: relative;
                    transition: color 0.3s ease;
                }
                
                .menu-link:hover {
                    color: #6A35F2;
                }
                
                /* মেনু আইটেম হোভার আন্ডারলাইন */
                .menu-link::after {
                    content: '';
                    position: absolute;
                    width: 0;
                    height: 2px;
                    bottom: -4px;
                    left: 50%;
                    background-color: #6A35F2;
                    transition: all 0.3s ease;
                    transform: translateX(-50%);
                }
                
                .menu-link:hover::after {
                    width: 100%;
                }
                
                /* ড্রপডাউন মেনু */
                .dropdown-menu {
                    display: none;
                    position: absolute;
                    top: 25px;
                    left: -20px;
                    width: 160px;
                    background-color: white;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                    padding: 8px 0;
                    z-index: 100;
                    opacity: 0;
                    transform: translateY(-10px);
                    animation: dropdownFade 0.3s ease forwards;
                }
                
                .menu-item:hover .dropdown-menu {
                    display: block;
                }
                
                .dropdown-item {
                    list-style: none;
                }
                
                .dropdown-link {
                    display: block;
                    padding: 8px 16px;
                    color: #333;
                    text-decoration: none;
                    transition: all 0.3s ease;
                    font-size: 14px;
                }
                
                .dropdown-link:hover {
                    background-color: rgba(106, 53, 242, 0.1);
                    color: #6A35F2;
                    transform: translateX(5px);
                }
                
                /* সেন্টার সেকশন - সার্চ বক্স */
                .nav-center {
                    flex: 1;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    padding: 0 20px;
                }
                
                /* সার্চ বক্স স্টাইল */
                .search-container {
                    width: 100%;
                    max-width: 450px;
                    position: relative;
                }
                
                .search-box0 {
                    width: 100%;
                    height: 40px;
                    border-radius: 5px;
                    border: 1px solid #dfe1e5;
                    background-color: #f5f5f5;
                    display: flex;
                    align-items: center;
                    padding: 0 15px;
                    transition: all 0.3s ease;
                }
                
                .search-box0:focus-within {
                    box-shadow: 0 1px 6px rgba(106, 53, 242, 0.2);
                    border-color: #6A35F2;
                    background-color: #fff;
                }
                
                .search-icon {
                    color: #6A35F2;
                    margin-right: 8px;
                    display: flex;
                    align-items: center;
                }
                
                .search-input {
                    flex: 1;
                    border: none;
                    outline: none;
                    background: transparent;
                    font-size: 14px;
                    color: #202124;
                }
                
                .search-input::placeholder {
                    color: #5f6368;
                    opacity: 0.8;
                }
                
                /* রাইট সেকশন - ইউটিলিটি আইটেম */
                .nav-right {
                    display: flex;
                    align-items: center;
                    gap: 10px; /* আইকনগুলোর মধ্যে গ্যাপ কমানো */
                }
                
        
                
        
                
                /* ভাষা টগল স্টাইল */
                .language-toggle {
                    background: transparent;
                    border: none;
                    cursor: pointer;
                    color: #5f6368;
                    font-size: 14px;
                    padding: 5px;
                    border-radius: 4px;
                    display: flex;
                    align-items: center;
                    gap: 5px;
                    transition: all 0.3s ease;
                }
                
        
                
                .language-toggle:hover {
                    background-color: rgba(106, 53, 242, 0.1);
                    color: #6A35F2;
                }
                
                /* কার্ট আইকন স্টাইল */
                .cart-icon {
                    position: relative;
                    color: #5f6368;
                    padding: 5px;
                    border-radius: 50%;
                    transition: all 0.3s ease;
                }
                
                .cart-icon:hover {
                    color: #6A35F2;
                    background-color: rgba(106, 53, 242, 0.1);
                }
                
                .cart-badge {
                    position: absolute;
                    top: -5px;
                    right: -5px;
                    background-color: #6A35F2;
                    color: white;
                    font-size: 10px;
                    width: 16px;
                    height: 16px;
                    border-radius: 50%;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }
                
                /* লগইন বাটন স্টাইল */
                .login-button {
                    background-color: #6A35F2;
                    color: white;
                    border: none;
                    padding: 6px 15px; /* ছোট করা হয়েছে */
                    border-radius: 5px;
                    font-size: 13px; /* ছোট করা হয়েছে */
                    font-weight: 500;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    text-decoration: none;
                }
                
                .login-button:hover {
                    background-color: #5628d8;
                    transform: translateY(-2px);
                    box-shadow: 0 4px 8px rgba(106, 53, 242, 0.2);
                }
                
                /* হ্যামবার্গার মেনু স্টাইল */
                .hamburger {
                    display: none;
                    cursor: pointer;
                    z-index: 100;
                    width: 30px;
                    height: 30px;
                    position: relative;
                    padding: 5px;
                }
                
                .hamburger div {
                    width: 20px;
                    height: 2px;
                    background-color: #333;
                    margin: 4px 0;
                    transition: all 0.3s ease-in-out;
                }
                
                /* মোবাইল সার্চ আইকন */
                .mobile-search-icon {
                    display: none;
                    cursor: pointer;
                    padding: 8px;
                    border-radius: 50%;
                    color: #6A35F2;
                    transition: all 0.3s ease;
                }
                
                .mobile-search-icon:hover {
                    background-color: rgba(106, 53, 242, 0.1);
                    color: #6A35F2;
                }
                
                /* ফুল স্ক্রিন সার্চ ওভারলে */
                .fullscreen-search {
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background-color: rgba(255, 255, 255, 0.95);
                    z-index: 100;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    opacity: 0;
                    visibility: hidden;
                    transition: all 0.3s ease;
                }
                
                .fullscreen-search.active {
                    opacity: 1;
                    visibility: visible;
                }
                
                .fullscreen-search-container {
                    width: 90%;
                    max-width: 600px;
                }
                
                .fullscreen-search-box {
                    width: 100%;
                    height: 50px;
                    border-radius: 5px;
                    border: 2px solid #6A35F2;
                    background-color: white;
                    display: flex;
                    align-items: center;
                    padding: 0 20px;
                    box-shadow: 0 4px 20px rgba(106, 53, 242, 0.15);
                }
                
                .fullscreen-search-input {
                    flex: 1;
                    border: none;
                    outline: none;
                    background: transparent;
                    font-size: 16px;
                    color: #202124;
                    padding: 0 10px;
                }
                
                .fullscreen-search-close {
                    cursor: pointer;
                    padding: 5px;
                    color: #5f6368;
                    transition: all 0.3s ease;
                }
                
                .fullscreen-search-close:hover {
                    color: #6A35F2;
                    transform: rotate(90deg);
                }
                
                /* মোবাইল রেসপনসিভ স্টাইল - সম্পূর্ণ পরিবর্তিত */
                @media screen and (max-width: 1024px) {
                    body {
                        padding-top: 50px; /* নেভবার হাইট অনুযায়ী অ্যাডজাস্ট করুন */
                    }
                    
                    nav {
                        padding: 0 10px;
                        height: 60px;
                    }
                    
                    .nav-left {
                        gap: 5px;
                    }
                    
                    .logo img {
                        max-width: 110px;
                    }
                    
                    /* সাইডবার এর বিকল্প স্টাইল */
                    .menu-items {
                        position: fixed;
                        top: 0;
                        left: -280px;
                        width: 280px;
                        height: 100vh;
                        background-color: white;
                        flex-direction: column;
                        padding: 80px 20px 30px;
                        gap: 5px;
                        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
                        transition: all 0.3s ease-in-out;
                        z-index: 95;
                        overflow-y: auto;
                    }
                    
                    .menu-items.active {
                        left: 0;
                        overflow: auto;        
          scrollbar-width: none;  
          -ms-overflow-style: none; 
                    }
                    
                    /* হ্যামবার্গার মেনু দেখাও */
                    .hamburger {
                        display: block;
                        margin-right: 5px;
                    }
                    
                    /* হ্যামবার্গার টু X এনিমেশন */
                    .hamburger.active div:nth-child(1) {
                        transform: rotate(-45deg) translate(-5px, 5px);
                    }
                    
                    .hamburger.active div:nth-child(2) {
                        opacity: 0;
                    }
                    
                    .hamburger.active div:nth-child(3) {
                        transform: rotate(45deg) translate(-5px, -5px);
                    }
                    
                    /* নেভবার সেন্টার হাইড */
                    .nav-center {
                        display: none;
                    }
                    
                    /* মোবাইল সার্চ আইকন দেখাও */
                    .mobile-search-icon {
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    }
                    
                    /* লগইন বাটন */
                    .login-button {
                        font-size: 12px;
                        padding: 5px 12px;
                    }
                    
                 
                    
                    /* মোবাইলে ড্রপডাউন মেনু পজিশন */
                    .dropdown-menu {
                        position: static;
                        box-shadow: none;
                        width: 100%;
                        border-radius: 6px;
                        margin-top: 5px;
                        margin-bottom: 5px;
                        background-color: #f5f5f5;
                        animation: none;
                        transform: none;
                        opacity: 1;
                        display: none;
                    }
                    
                    .menu-item.show-dropdown .dropdown-menu {
                        display: block;
                    }
                    
                    .dropdown-link:hover {
                        transform: translateX(5px);
                    }
                    
                    /* মেনু আইটেম ডিসপ্লে */
                    .menu-item {
                        width: 100%;
                        border-bottom: 1px solid #f0f0f0;
                    }
                    
                    .menu-link {
                        width: 100%;
                        display: block;
                        padding: 12px 0;
                    }
                    
                    /* মেনু আইটেম হোভার আন্ডারলাইন */
                    .menu-link::after {
                        display: none;
                    }
                    
                    /* অভারলে - সাইডবার অপেন হলে */
                    .overlay {
                        position: fixed;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        background-color: rgba(0, 0, 0, 0.5);
                        z-index: 90;
                        opacity: 0;
                        visibility: hidden;
                        transition: all 0.3s ease;
                    }
                    
                    /* মোবাইলে ড্রপডাউন টগল আইকন */
                    .dropdown-toggle {
                        float: right;
                        transition: transform 0.3s ease;
                    }
                    
                    .menu-item.show-dropdown .dropdown-toggle {
                        transform: rotate(180deg);
                    }
                    
                    /* আইকনগুলো কম্প্যাক্ট করুন */
                    .nav-right {
                        gap: 5px;
                    }
                    
        
                }
                
                /* আরও ছোট মোবাইল ডিভাইসের জন্য অতিরিক্ত অ্যাডজাস্টমেন্ট */
                @media screen and (max-width: 360px) {
                    .nav-right {
                        gap: 3px;
                    }
                    
                    .logo img {
                        max-width: 100px;
                    }
                    
                    .login-button {
                        padding: 4px 10px;
                        font-size: 11px;
                    }
                    
                    .theme-toggle, .cart-icon, .mobile-search-icon {
                        width: 24px;
                        height: 24px;
                        font-size: 13px;
                        padding: 0;
                    }
                }
                
                /* এনিমেশন কি-ফ্রেম */
                @keyframes dropdownFade {
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                
                /* একটিভ মেনু আইটেম স্টাইল */
                .menu-link.active {
                    color: #6A35F2;
                    font-weight: 600;
                 }
                    
                /* একটিভ মেনু আইটেমের আন্ডারলাইন রিমুভ */
                .menu-link.active::after {
                      display: none;
                }
        
                   /* কনটেইনার ম্যাক্স উইথের জন্য */
        .container4 {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        /* নেভবার জন্য */
        nav .container4 {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
        }
        
        /* নেভবার মডিফিকেশন */
        nav {
            width: 100%;
            height: 60px;
            background-color: white;
            position: fixed;
            top: 0;
            left: 0;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            z-index: 90;
        }
            </style>    
        
            <!-- নেভিগেশন বার -->
            <nav>
                <div class="container4">
                <!-- বাম সাইড - লোগো এবং মেনু -->
                <div class="nav-left">
                    <!-- হ্যামবার্গার মেনু বাটন (মোবাইল) -->
                    <div class="hamburger">
                        <div class="line1"></div>
                        <div class="line2"></div>
                        <div class="line3"></div>
                    </div>
                    
                    <!-- লোগো -->
                    <a href="Talimul Islam Academi.html" class="logo"><img src="img/talimul islam academy logo.png" alt="img" width="100%"></a>
                    
                    <!-- মেনু আইটেম -->
                    <ul class="menu-items">
                        <li class="menu-item">
                            <a href="Talimul Islam Academi.html" class="menu-link">হোম</a>
                        </li>
                        <li class="menu-item">
                            <a href="blog page.html" class="menu-link">ব্লগ</a>
                        </li> 
                        <li class="menu-item">
                            <a href="About us.html" class="menu-link">আমাদের সম্পর্কে</a>
                        </li>
                        <li class="menu-item dropdown">
                            <a href="javascript:void(0)" class="menu-link">কোর্স <i class="fas fa-chevron-down dropdown-toggle" style="font-size: 10px;"></i></a>
                            <ul class="dropdown-menu">
                                <li class="dropdown-item">
                                    <a href="#" class="dropdown-link">সকল কোর্স</a>
                                </li>
                                <li class="dropdown-item">
                                    <a href="Live course.html" class="dropdown-link">লাইভ কোর্স</a>
                                </li>
                            </ul>
                        </li>
                        <li class="menu-item">
                            <a href="Book.html" class="menu-link">বই</a>
                        </li>
                        <li class="menu-item">
                            <a href="Teacher.html" class="menu-link">শিক্ষক</a>
                        </li>
                        <li class="menu-item">
                            <a href="Advisors.html" class="menu-link">উপদেষ্টা</a>
                        </li>
                        <li class="menu-item">
                            <a href="Contact.html" class="menu-link">যোগাযোগ</a>
                        </li>
                    </ul>
                </div>
                
                <!-- সেন্টার - সার্চ বক্স -->
                <div class="nav-center">
                    <div class="search-container">
                        <div class="search-box0">
                            <div class="search-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <input 
                                type="text" 
                                class="search-input"
                                placeholder="কোর্স সার্চ করুন..." 
                                autocomplete="off">
                        </div>
                    </div>
                </div>
                
                <!-- ডান সাইড - ইউটিলিটি বাটন -->
                <div class="nav-right">
                    <!-- মোবাইল সার্চ আইকন -->
                    <div class="mobile-search-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    
                    <!-- থিম টগল -->
                    <button class="theme-toggle">
                        <i class="fas fa-moon"></i>
                    </button>
                    
                    <!-- ভাষা পরিবর্তন -->
                    <button class="language-toggle">
                        <i class="fas fa-globe"></i>
                        <span>বাংলা</span>
                    </button>
                    
                    <!-- কার্ট আইকন -->
                    <a href="Add to cart.html" class="cart-icon">
                      <i class="fas fa-shopping-cart"></i>
                      <span class="cart-badge">0</span>
                  </a>
        
        
                  <div class="user-menu-container">
                    <!-- লগইন বাটন - লগইন করার আগে শুধু এটি দেখানো হবে -->
                    <a href="#" class="login-button" id="loginButton">লগইন</a>
                    
                    <!-- প্রোফাইল আইকন - লগইন করার পরে এটি দেখানো হবে -->
                    <div class="profile-dropdown" id="profileDropdown" style="display: none;">
                        <button class="profile-icon">
                            <i class="fas fa-user-circle"></i>
                            <span class="profile-icon-text">প্রোফাইল</span>
                        </button>
                        <div class="dropdown-menu1">
                            <a href="Profile.html" class="dropdown-item">প্রোফাইল</a>
                            <a href="AftarLoginInMyCours.html" class="dropdown-item">আমার কোর্স</a>
                            <a href="Talimul Islam Academi.html" class="dropdown-item" id="logoutButton"><i class="fas fa-sign-out-alt"></i> লগআউট</a>
                        </div>
                    </div>
                </div>
        
        
                    </div>
                </div>
            </div>
            </nav>  
        
            <script>
                // চেক করুন যদি Font Awesome আগেই লোড আছে
                if (!document.querySelector('link[href*="font-awesome"]')) {
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
                    document.head.appendChild(link);
                    console.log('Font Awesome added to document head');
                }
            </script>
            
         <!-- *   1. ইউজার লগআউট হওয়ার পর সেশন ডাটা ক্লিয়ার করা -->
         <!-- *   2. কার্ট আইটেম ক্লিয়ার করা (যদি দরকার হয়) -->
         <!-- *   3. লগআউট পরবর্তী হোম পেইজে রিডাইরেক্ট করা -->
         <!-- *   4. সফল লগআউট হলে ব্যবহারকারীকে সাকসেস মেসেজ দেখানো -->
        <script>
    document.addEventListener('DOMContentLoaded', function() {
        // লগআউট বাটন খুঁজে বের করা
        const logoutButton = document.getElementById('logoutButton');
        
        // বাটনে ক্লিক ইভেন্ট লিসেনার যোগ করা
        if (logoutButton) {
            logoutButton.addEventListener('click', function(event) {
                // ডিফল্ট অ্যাকশন বন্ধ করা (যদি <a> ট্যাগের href কাজ করতে না দেয়া হয়)
                event.preventDefault();
                
                // ইউজার সেশন ক্লিয়ার করা (যদি লোকাল স্টোরেজে থাকে)
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('userData');
                localStorage.removeItem('userToken');
                // অন্যান্য প্রয়োজনীয় ডাটা মুছে ফেলা যেতে পারে
                
                // কার্ট ক্লিয়ার করা (যদি দরকার হয়)
                localStorage.removeItem('cartItems');
                
                // হোম পেইজে রিডাইরেক্ট করার কোড এখানে ছিল
                // window.location.href = 'Talimul Islam Academi.html';
            });
        }
    });
</script>
         <!-- *   1. বর্তমান URL অনুযায়ী মেনু আইটেম চিহ্নিত ও হাইলাইট করে -->
         <!-- *   2. ড্রপডাউন মেনুর আইটেম সঠিকভাবে কার্যকরী করে -->
         <!-- *   3. ক্লিক ইভেন্টের মাধ্যমে একটিভ ক্লাস নিয়ন্ত্রণ করে -->
         <!-- *   4. মোবাইল ডিভাইসে ড্রপডাউন মেনুর টগল ফাংশনালিটি পরিচালনা করে -->
         <!-- *   5. বিশেষ পেজগুলির জন্য অতিরিক্ত চেক (যেমন: "আমাদের সম্পর্কে", "ব্লগ" ও কোর্স পেজ) -->
        <script>
            // বর্তমান URL থেকে একটিভ পেজ নির্ধারণ
            document.addEventListener('DOMContentLoaded', function() {
                // সব মেনু লিংক নিয়ে আসা
                const menuLinks = document.querySelectorAll('.menu-link');
                
                // বর্তমান পেজের URL পাথনেম
                const currentPath = window.location.pathname;
                
                // একটি ট্র্যাকিং ভ্যারিয়েবল - কোন মেনু আইটেম একটিভ হয়েছে কিনা তা ট্র্যাক করতে
                let hasActiveMenuItem = false;
                
                // বিশেষ পেজগুলি আগে চেক করি - "আমাদের সম্পর্কে" এবং "ব্লগ"
                menuLinks.forEach(link => {
                    const href = link.getAttribute('href');
                    
                    // ভিজিবল টেক্সট কনটেন্ট চেক করা (লিংক টেক্সট)
                    const linkText = link.textContent.trim();
                    
                    // সঠিক পেজ URL চেক করা
                    if (href === currentPath || 
                        currentPath.endsWith(href) || 
                        (href !== 'javascript:void(0)' && href !== 'Talimul Islam Academi.html' && currentPath.includes(href))) {
                        link.classList.add('active');
                        hasActiveMenuItem = true;
                    }
                    
                    // বিশেষ পেজের জন্য অতিরিক্ত চেক
                    if ((linkText === 'আমাদের সম্পর্কে' && (currentPath.includes('About') || currentPath.includes('about'))) || 
                        (linkText === 'ব্লগ' && (currentPath.includes('blog') || currentPath.includes('Blog')))) {
                        link.classList.add('active');
                        hasActiveMenuItem = true;
                    }
                });
                
                // ড্রপডাউন মেনু আইটেমগুলোর জন্য অতিরিক্ত চেক
                const dropdownLinks = document.querySelectorAll('.dropdown-link');
                
                dropdownLinks.forEach(link => {
                    const href = link.getAttribute('href');
                    if (href === currentPath || currentPath.endsWith(href) || (href !== '#' && currentPath.includes(href))) {
                        link.classList.add('active');
                        
                        // প্যারেন্ট ড্রপডাউন মেনুকেও একটিভ করা
                        const parentDropdown = link.closest('.dropdown');
                        if (parentDropdown) {
                            const parentLink = parentDropdown.querySelector('.menu-link');
                            if (parentLink) {
                                parentLink.classList.add('active');
                            }
                        }
                        hasActiveMenuItem = true;
                    }
                });
                
                // হোম পেজের স্পেশাল কেস (শুধুমাত্র যদি অন্য কোন আইটেম একটিভ না হয়ে থাকে)
                if (!hasActiveMenuItem) {
                    const isHomePage = currentPath === '/' || 
                                      currentPath === '/index.html' || 
                                      currentPath === '' || 
                                      currentPath.endsWith('Talimul Islam Academi.html') ||
                                      currentPath.endsWith('/');
                                      
                    if (isHomePage) {
                        const homeLink = document.querySelector('.menu-link[href="Talimul Islam Academi.html"]');
                        if (homeLink) {
                            homeLink.classList.add('active');
                        }
                    }
                }
                
                // ক্লিক ইভেন্ট হ্যান্ডলার যুক্ত করা
                menuLinks.forEach(link => {
                    link.addEventListener('click', function(e) {
                        // ড্রপডাউন টগল লিংক এর ক্ষেত্রে একটিভ ক্লাস না যুক্ত করা
                        if (link.parentElement.classList.contains('dropdown') && window.innerWidth <= 1024) {
                            e.preventDefault(); // ড্রপডাউন টগল করার জন্য ডিফল্ট বিহেভিয়ার বাধা দেওয়া
                            return;
                        }
                        
                        // সব লিংক থেকে একটিভ ক্লাস রিমুভ
                        menuLinks.forEach(item => {
                            item.classList.remove('active');
                        });
                        
                        // ক্লিক করা লিংকে একটিভ ক্লাস যুক্ত
                        link.classList.add('active');
                    });
                });
                
                // মোবাইল ড্রপডাউন টগল ফাংশনালিটি
                const dropdownItems = document.querySelectorAll('.menu-item.dropdown');
                dropdownItems.forEach(item => {
                    const dropdownToggle = item.querySelector('.dropdown-toggle');
                    if (dropdownToggle) {
                        dropdownToggle.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            item.classList.toggle('show-dropdown');
                        });
                    }
                });
            });
            // ড্রপডাউন মেনু আইটেমগুলোর জন্য অতিরিক্ত চেক
            const dropdownLinks = document.querySelectorAll('.dropdown-link');
                
                dropdownLinks.forEach(link => {
                    const href = link.getAttribute('href');
                    if (href === currentPath || currentPath.endsWith(href) || (href !== '#' && currentPath.includes(href))) {
                        link.classList.add('active');
                        
                        // প্যারেন্ট ড্রপডাউন মেনুকেও একটিভ করা
                        const parentDropdown = link.closest('.dropdown-item').closest('.dropdown-menu').closest('.menu-item');
                        if (parentDropdown) {
                            const parentLink = parentDropdown.querySelector('.menu-link');
                            if (parentLink) {
                                parentLink.classList.add('active');
                            }
                        }
                        hasActiveMenuItem = true;
                    }
                });
                
                // বিশেষভাবে কোর্স সাব-পেজগুলি চেক করা
                if (currentPath.includes('course') || currentPath.includes('Course') || 
                    currentPath.includes('all-courses') || currentPath.includes('Live course')) {
                    // কোর্স ড্রপডাউন মেনুকে একটিভ করা
                    const courseDropdown = document.querySelector('.menu-item.dropdown .menu-link');
                    if (courseDropdown) {
                        courseDropdown.classList.add('active');
                        hasActiveMenuItem = true;
                    }
                }
        </script>
         <!-- *এই স্ক্রিপ্টটি কোর্স প্ল্যাটফর্মের কার্ট সিস্টেম পরিচালনার জন্য ব্যবহৃত হয়। -->
        <script>
            // কোর্স ডাটা
            const courses = [
            {
                  id: 1,
                  title: "বিশুদ্ধ তাজবিদসহ কুরআন শিক্ষার মাধ্যমে আধ্যাত্মিক উন্নতি অর্জন করুন।",
                  instructor: "মাওলানা আব্দুল্লাহ",
                  level: "বেসিক",
                  chapters: "১৮ অধ্যায়",
                  students: "৩৫০ শিক্ষার্থী",
                  rating: "৪.৮",
                  price: "৳৩,৫০০",
                  originalPrice: "৳৪,৫০০",
                  image: "14png.png",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                {
                  id: 2,
                  title: "হাদিসের সঠিক ব্যাখ্যা ও বিশ্লেষণ শিখুন, নবীর (সাঃ) জীবন থেকে শিক্ষা নিন।",
                  instructor: "মাওলানা ইব্রাহিম",
                  level: "মধ্যবর্তী",
                  chapters: "১২ অধ্যায়",
                  students: "২৪০ শিক্ষার্থী",
                  rating: "৪.৯",
                  price: "৳২,৮০০",
                  originalPrice: "৳৩,৫০০",
                  image: "Talimul Islam Academi.jpeg",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                {
                  id: 3,
                  title: "ইসলামী আইন ও জীবন বিধান শিখে আপনার দৈনন্দিন জীবনে সঠিক সিদ্ধান্ত নিন।",
                  instructor: "মাওলানা জাকির",
                  level: "বেসিক",
                  chapters: "২০ অধ্যায়",
                  students: "৪২০ শিক্ষার্থী",
                  rating: "৪.৭",
                  price: "৳৪,২০০",
                  originalPrice: "৳৫,০০০",
                  image: "14png.png",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                // Adding courses 4-10
                {
                  id: 4,
                  title: "আরবি ভাষার গভীরে প্রবেশ করুন, কুরআন ও হাদিস বুঝতে পারদর্শী হন।",
                  instructor: "মাওলানা রফিক",
                  level: "অ্যাডভান্সড",
                  chapters: "১৪ অধ্যায়",
                  students: "১৮০ শিক্ষার্থী",
                  rating: "৪.৬",
                  price: "৳৪,৮০০",
                  originalPrice: "৳৫,৫০০",
                  image: "/pexels-648298123-28872754.jpg",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                {
                  id: 5,
                  title: "কুরআনের তাফসির শিখে আল্লাহর কালামকে গভীরভাবে বুঝুন এবং জীবনে প্রয়োগ করুন।",
                  instructor: "মাওলানা সালেহ",
                  level: "মধ্যবর্তী",
                  chapters: "১৬ অধ্যায়",
                  students: "২৮০ শিক্ষার্থী",
                  rating: "৪.৮",
                  price: "৳৩,৮০০",
                  originalPrice: "৳৪,৫০০",
                  image: "pexels-648298123-28872754.jpg",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                {
                  id: 6,
                  title: "ইসলামী ইতিহাস, সংস্কৃতি ও শাস্ত্রের সঠিক জ্ঞান অর্জন করুন একটি বৈজ্ঞানিক দৃষ্টিভঙ্গি থেকে।",
                  instructor: "মাওলানা আরিফ বিল্লাহ",
                  level: "বেসিক",
                  chapters: "১৫ অধ্যায়",
                  students: "২৫০ শিক্ষার্থী",
                  rating: "৪.৭",
                  price: "৳৩,৬০০",
                  originalPrice: "৳৪,২০০",
                  image: "14png.png",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                {
                  id: 7,
                  title: "সঠিক বিশ্বাস ও তাওহিদের মৌলিক শিক্ষা গ্রহণ করে ঈমানকে দৃঢ় করুন।",
                  instructor: "মাওলানা হাসান",
                  level: "বেসিক",
                  chapters: "১৬ অধ্যায়",
                  students: "২২০ শিক্ষার্থী",
                  rating: "৪.৮",
                  price: "৳২,৯০০",
                  originalPrice: "৳৩,৫০০",
                  image: "14png.png",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                {
                  id: 8,
                  title: "প্রিয় নবী মুহাম্মাদ (সা.)-এর জীবনচরিত শিখে আদর্শ মুসলিম হিসেবে গড়ে উঠুন।",
                  instructor: "মাওলানা হাসান",
                  level: "বেসিক",
                  chapters: "১৬ অধ্যায়",
                  students: "২২০ শিক্ষার্থী",
                  rating: "৪.৮",
                  price: "৳২,৯০০",
                  originalPrice: "৳৩,৫০০",
                  image: "14png.png",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                {
                  id: 9,
                  title: "নৈতিকতা ও চরিত্র গঠনের ইসলামী শিক্ষায় নিজের ব্যক্তিত্ব উন্নত করুন।",
                  instructor: "মাওলানা হাসান",
                  level: "বেসিক",
                  chapters: "১৬ অধ্যায়",
                  students: "২২০ শিক্ষার্থী",
                  rating: "৪.৮",
                  price: "৳২,৯০০",
                  originalPrice: "৳৩,৫০০",
                  image: "14png.png",
                  instructorImage: "Talimul Islam Academi.jpeg"
                },
                {
                  id: 10,
                  title: "ইসলামের শান্তির বার্তা ছড়িয়ে দিতে দাওয়াহর সঠিক পদ্ধতি ও জ্ঞান অর্জন করুন।",
                  instructor: "মাওলানা হাসান",
                  level: "বেসিক",
                  chapters: "১৬ অধ্যায়",
                  students: "২২০ শিক্ষার্থী",
                  rating: "৪.৮",
                  price: "৳২,৯০০",
                  originalPrice: "৳৩,৫০০",
                  image: "14png.png",
                  instructorImage: "Talimul Islam Academi.jpeg"
                }
            ];
          
            // লোকাল স্টোরেজ থেকে কার্ট ডাটা লোড করা
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // পেজ লোড হলে কার্ট আইটেম রেন্ডার করা
            document.addEventListener('DOMContentLoaded', function() {
                renderCart();
                updateCartIcon();
                renderRecommendedCourses();
                
                // ডার্ক মোড টগল
                const savedTheme = localStorage.getItem('theme');
                if (savedTheme === 'dark') {
                    document.body.classList.add('dark-theme');
                }
            });
            
            // কার্ট রেন্ডার করার ফাংশন
            function renderCart() {
                const cartItems = document.getElementById('cartItems');
                const emptyCart = document.getElementById('emptyCart');
                const cartSummary = document.getElementById('cartSummary');
                
                // কার্ট খালি কিনা চেক করা
                if (cart.length === 0) {
                    emptyCart.style.display = 'block';
                    cartSummary.style.display = 'none';
                    return;
                }
                
                // কার্ট খালি না হলে
                emptyCart.style.display = 'none';
                cartSummary.style.display = 'block';
                
                // পুরাতন কার্ট আইটেম মুছে ফেলা
                cartItems.innerHTML = '';
                
                // নতুন কার্ট আইটেম যোগ করা
                let subtotal = 0;
                cart.forEach(item => {
                    const course = courses.find(c => c.id === item.id);
                    if (course) {
                        const cartItemElement = createCartItemElement(course, item.quantity);
                        cartItems.appendChild(cartItemElement);
                        subtotal += course.price * item.quantity;
                    }
                });
                
                // সামারি আপডেট করা
                updateSummary(subtotal);
            }
            
            // কার্ট আইটেম এলিমেন্ট তৈরি করার ফাংশন
            function createCartItemElement(course, quantity) {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="item-info">
                        <img src="${course.image}" alt="${course.title}" class="item-img">
                        <div class="item-details">
                            <h3>${course.title}</h3>
                            <div class="item-instructor">
                                <img src="${course.instructorImg}" alt="${course.instructor}">
                                <span>${course.instructor}</span>
                            </div>
                            <div class="item-meta">
                                <span><i class="fas fa-book-open"></i> ${course.lessons}</span>
                                <span><i class="fas fa-star"></i> ${course.rating}</span>
                            </div>
                        </div>
                    </div>
                    <div class="item-quantity">
                        <div class="quantity-wrapper">
                            <button class="qty-btn" onclick="updateQuantity(${course.id}, ${quantity - 1})">-</button>
                            <input type="text" value="${quantity}" class="qty-input" readonly>
                            <button class="qty-btn" onclick="updateQuantity(${course.id}, ${quantity + 1})">+</button>
                        </div>
                    </div>
                    <div class="item-price">৳${course.price.toLocaleString()}</div>
                    <div class="item-actions">
                        <button class="remove-item" onclick="removeFromCart(${course.id})">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                `;
                return cartItem;
            }
            
            // পরিমাণ আপডেট করার ফাংশন
            function updateQuantity(courseId, newQuantity) {
                if (newQuantity <= 0) {
                    removeFromCart(courseId);
                    return;
                }
                
                const courseIndex = cart.findIndex(item => item.id === courseId);
                if (courseIndex !== -1) {
                    cart[courseIndex].quantity = newQuantity;
                    localStorage.setItem('cart', JSON.stringify(cart));
                    renderCart();
                    updateCartIcon();
                }
            }
            
            // কার্ট থেকে আইটেম রিমোভ করার ফাংশন
            function removeFromCart(courseId) {
                cart = cart.filter(item => item.id !== courseId);
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
                updateCartIcon();
            }
            
            // সামারি আপডেট করার ফাংশন
            function updateSummary(subtotal) {
                const totalItems = document.getElementById('totalItems');
                const subtotalElement = document.getElementById('subtotal');
                const discountElement = document.getElementById('discount');
                const grandTotalElement = document.getElementById('grandTotal');
                
                // মোট কার্ট আইটেমের পরিমাণ গণনা
                const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
                
                // ডিসকাউন্ট ক্যালকুলেশন (উদাহরণস্বরূপ: ১০% ডিসকাউন্ট)
                const discount = Math.round(subtotal * 0.1);
                const grandTotal = subtotal - discount;
                
                // সামারি আপডেট করা
                totalItems.textContent = itemCount;
                subtotalElement.textContent = `৳${subtotal.toLocaleString()}`;
                discountElement.textContent = `-৳${discount.toLocaleString()}`;
                grandTotalElement.textContent = `৳${grandTotal.toLocaleString()}`;
            }
            
            // কার্ট আইকন আপডেট করার ফাংশন
            function updateCartIcon() {
                const cartBadge = document.querySelector('.cart-badge');
                if (cartBadge) {
                    const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
                    cartBadge.textContent = itemCount;
                }
            }
            
            // কার্টে যোগ করার ফাংশন
            function addToCart(courseId) {
                const existingItem = cart.find(item => item.id === courseId);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        id: courseId,
                        quantity: 1
                    });
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
                updateCartIcon();
                
                // স্যাটিসফ্যাকশন মেসেজ দেখানো
                showNotification('কোর্সটি কার্টে যোগ করা হয়েছে!');
            }
            
            // নোটিফিকেশন দেখানোর ফাংশন
            function showNotification(message) {
                // যদি আগে থেকে নোটিফিকেশন থাকে তবে সেটি মুছে ফেলা
                const existingNotification = document.querySelector('.notification');
                if (existingNotification) {
                    existingNotification.remove();
                }
                
                // নতুন নোটিফিকেশন তৈরি করা
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.innerHTML = `
                    <div style="position: fixed; bottom: 20px; right: 20px; background-color: #6A35F2; color: white; padding: 12px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 1000; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-check-circle"></i>
                        <span>${message}</span>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // 3 সেকেন্ড পর নোটিফিকেশন মুছে ফেলা
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
            
            // রিকমেন্ডেড কোর্স রেন্ডার করার ফাংশন
            function renderRecommendedCourses() {
                const recommendedCoursesElement = document.getElementById('recommendedCourses');
                
                // কোর্স মিশ্রিত করার ফাংশন
                const shuffledCourses = [...courses].sort(() => 0.5 - Math.random());
                
                // 3টি কোর্স নেওয়া (যদি আছে)
                const recommendedCourses = shuffledCourses.slice(0, 3);
                
                recommendedCoursesElement.innerHTML = '';
                
                // কোর্স কার্ড তৈরি করা
                recommendedCourses.forEach(course => {
                    const courseElement = document.createElement('div');
                    courseElement.className = 'course-card';
                    courseElement.innerHTML = `
                        <a href="course-details.html?id=${course.id}" class="course-card-link" aria-label="${course.title} বিস্তারিত"></a>
                        <div class="course-thumbnail">
                            <img src="${course.image}" alt="${course.title}">
                            <div class="level-badge ${course.level === 'বেসিক' ? 'beginner' : course.level === 'মধ্যবর্তী' ? 'intermediate' : 'advanced'}">${course.level}</div>
                        </div>
                        <div class="course-info">
                            <div class="instructor">
                                <img src="${course.instructorImg}" alt="শিক্ষক" class="instructor-img">
                                <span>${course.instructor}</span>
                            </div>
                            <h3 class="<h3 class="course-title">${course.title}</h3>
                            <div class="course-meta">
                                <span><i class="fas fa-book-open"></i> ${course.lessons}</span>
                                <span><i class="fas fa-users"></i> ${course.students}</span>
                                <span><i class="fas fa-star"></i> ${course.rating}</span>
                            </div>
                            <div class="course-price">
                                <span class="current-price">৳${course.price.toLocaleString()}</span>
                                <span class="original-price">৳${course.originalPrice.toLocaleString()}</span>
                                <span class="discount-percentage">
                                    ${Math.round((1 - course.price / course.originalPrice) * 100)}% ছাড়
                                </span>
                            </div>
                            <button class="add-to-cart-btn" onclick="addToCart(${course.id})">
                                <i class="fas fa-shopping-cart"></i> কার্টে যোগ করুন
                            </button>
                        </div>
                    `;
                    recommendedCoursesElement.appendChild(courseElement);
                });
            }
          
          
             // কার্ট আইকন আপডেট করার ফাংশন
             function updateCartIcon() {
                const cartBadge = document.querySelector('.cart-badge');
                if (cartBadge) {
                    const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
                    cartBadge.textContent = itemCount;
                    
                    // আইটেম থাকলে ব্যাজ দেখাব, না থাকলে লুকাবে
                    if (itemCount > 0) {
                        cartBadge.style.display = 'flex';
                    } else {
                        cartBadge.style.display = 'none';
                    }
                }
            }
            
            // পেজ লোড হওয়ার সময় কার্ট আইকন আপডেট করা
            document.addEventListener('DOMContentLoaded', function() {
                // লোকাল স্টোরেজ থেকে কার্ট আপডেট করা
                cart = JSON.parse(localStorage.getItem('cart')) || [];
                
                // কার্ট আইকন আপডেট করা
                updateCartIcon();
            });
            
            // কার্টে যোগ করার ফাংশন
            function addToCart(courseId) {
                const existingItem = cart.find(item => item.id === courseId);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        id: courseId,
                        quantity: 1
                    });
                }
                
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartIcon(); // কার্ট আইকন আপডেট করা
                
                // যদি কার্ট পেইজে থাকি তবে কার্ট রেন্ডার করা
                if (document.getElementById('cartItems')) {
                    renderCart();
                }
                
                // স্যাটিসফ্যাকশন মেসেজ দেখানো
                showNotification('কোর্সটি কার্টে যোগ করা হয়েছে!');
            }
            
            // কার্ট থেকে আইটেম রিমোভ করার ফাংশন
            function removeFromCart(courseId) {
                cart = cart.filter(item => item.id !== courseId);
                localStorage.setItem('cart', JSON.stringify(cart));
                
                // কার্ট আইকন আপডেট করা
                updateCartIcon();
                
                // যদি কার্ট পেইজে থাকি তবে কার্ট রেন্ডার করা
                if (document.getElementById('cartItems')) {
                    renderCart();
                }
            }
        </script>
        
        <style>
            /* সার্চ পেজ স্টাইল */
            .search-header {
                background-color: #f5f7fa;
                padding: 2rem 1rem;
                text-align: center;
                margin-bottom: 2rem;
            }
            
            .search-container {
                max-width: 1200px;
                margin: 0 auto;
                padding: 0 1rem;
            }
            
            .search-title {
                font-size: 1.75rem;
                margin-bottom: 0.5rem;
                color: #333;
            }
            
            .search-query {
                font-weight: bold;
                color: #3182ce;
            }
            
            .results-count {
                color: #666;
                margin-bottom: 2rem;
            }
            
            .search-results {
                display: grid;
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                gap: 2rem;
                margin-bottom: 3rem;
            }
            
            .no-results {
                grid-column: 1 / -1;
                text-align: center;
                padding: 4rem 1rem;
                background-color: #f9f9f9;
                border-radius: 8px;
            }
            
            .no-results-icon {
                font-size: 3rem;
                color: #cbd5e0;
                margin-bottom: 1rem;
            }
            
            .no-results h3 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
                color: #333;
            }
            
            .no-results p {
                color: #666;
                max-width: 500px;
                margin: 0 auto;
            }
            
            /* মোবাইল সার্চ ওভারলে স্টাইল */
            .fullscreen-search {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(255, 255, 255, 0.98);
                z-index: 1000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .fullscreen-search.active {
                opacity: 1;
                visibility: visible;
            }
            
            .fullscreen-search-container {
                display: flex;
                align-items: center;
                justify-content: center;
                height: 100%;
                padding: 0 1rem;
            }
            
            .fullscreen-search-box {
                display: flex;
                width: 100%;
                max-width: 600px;
                background-color: #fff;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                padding: 0.75rem 1rem;
                position: relative;
            }
            
            .search-icon {
                color: #6A35F2;
                font-size: 1.25rem;
                margin-right: 0.75rem;
                display: flex;
                align-items: center;
            }
            
            .fullscreen-search-input {
                flex-grow: 1;
                border: none;
                font-size: 1.25rem;
                outline: none;
                background: transparent;
            }
            
            .fullscreen-search-close {
                color: #777;
                font-size: 1.25rem;
                cursor: pointer;
                display: flex;
                align-items: center;
                padding: 0 0.5rem;
            }
            
            @media (max-width: 768px) {
                .search-results {
                    grid-template-columns: 1fr;
                }
            }
        </style>
        <!-- মোবাইল সার্চ ওভারলে -->
        <div class="fullscreen-search">
            <div class="fullscreen-search-container">
                <div class="fullscreen-search-box">
                    <div class="search-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <input
                        type="text"
                        class="fullscreen-search-input"
                        placeholder="কোর্স সার্চ করুন"
                        autocomplete="off">
                    <div class="fullscreen-search-close">
                        <i class="fas fa-times"></i>
                    </div>
                </div>
            </div>
        </div>  
        <!-- ফুল স্ক্রিন সার্চ ওভারলে (মোবাইল) -->
        <div class="fullscreen-search">
                <div class="fullscreen-search-container">
                    <div class="fullscreen-search-box">
                        <div class="search-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <input 
                            type="text" 
                            class="fullscreen-search-input"
                            placeholder="কোর্স সার্চ করুন" 
                            autocomplete="off">
                        <div class="fullscreen-search-close">
                            <i class="fas fa-times"></i>
                        </div>
                    </div>
                </div>
        </div>
        <!-- সাইডবার অভারলে -->
        <div class="overlay"></div>
        <!-- * ফিচারসমূহ: -->
        <!-- * - হ্যামবার্গার মেনু টগল ও ওভারলে হ্যান্ডলিং -->
        <!-- * - মোবাইলে ড্রপডাউন মেনু টগল -->
        <!-- * - ডার্ক মোড সক্রিয়/বন্ধ করার ব্যবস্থা -->
        <!-- * - ভাষা পরিবর্তনের টগল (বাংলা/English) -->
        <!-- * - মোবাইল ডিভাইসে ফুলস্ক্রিন সার্চ টগল -->
        <!-- * - ব্রাউজার রিসাইজ হলে ইউআই এলিমেন্ট রিসেট করা -->
        <script>
                // হ্যামবার্গার মেনু টগল
                const hamburger = document.querySelector('.hamburger');
                const menuItems = document.querySelector('.menu-items');
                const overlay = document.querySelector('.overlay');
                
                hamburger.addEventListener('click', function() {
                    this.classList.toggle('active');
                    menuItems.classList.toggle('active');
                    overlay.classList.toggle('active');
                    document.body.style.overflow = menuItems.classList.contains('active') ? 'hidden' : '';
                });
                
                // অভারলে ক্লিক করলে মেনু বন্ধ
                overlay.addEventListener('click', function() {
                    hamburger.classList.remove('active');
                    menuItems.classList.remove('active');
                    overlay.classList.remove('active');
                    document.body.style.overflow = '';
                });
                
                // মোবাইলে ড্রপডাউন টগল
                const dropdownItems = document.querySelectorAll('.menu-item.dropdown');
                
                dropdownItems.forEach(item => {
                    const menuLink = item.querySelector('.menu-link');
                    menuLink.addEventListener('click', function(e) {
                        // ডেস্কটপ ব্যবহারকারীদের জন্য লিংক এ ক্লিক করা যাবে
                        if (window.innerWidth > 1024) {
                            return;
                        }
                        
                        // মোবাইলে ড্রপডাউন টগল করুন
                        e.preventDefault();
                        item.classList.toggle('show-dropdown');
                        
                        // অন্যান্য খোলা ড্রপডাউন বন্ধ করুন
                        dropdownItems.forEach(otherItem => {
                            if (otherItem !== item && otherItem.classList.contains('show-dropdown')) {
                                otherItem.classList.remove('show-dropdown');
                            }
                        });
                    });
                });
                
        
                
                // ভাষা পরিবর্তন
                const languageToggle = document.querySelector('.language-toggle');
                let currentLanguage = 'বাংলা';
                
                languageToggle.addEventListener('click', function() {
                    if (currentLanguage === 'বাংলা') {
                        currentLanguage = 'English';
                        this.querySelector('span').textContent = 'English';
                    } else {
                        currentLanguage = 'বাংলা';
                        this.querySelector('span').textContent = 'বাংলা';
                    }
                });
                
                // মোবাইল সার্চ টগল
                const mobileSearchIcon = document.querySelector('.mobile-search-icon');
                const fullscreenSearch = document.querySelector('.fullscreen-search');
                const fullscreenSearchClose = document.querySelector('.fullscreen-search-close');
                const fullscreenSearchInput = document.querySelector('.fullscreen-search-input');
                
                mobileSearchIcon.addEventListener('click', function() {
                    fullscreenSearch.classList.add('active');
                    document.body.style.overflow = 'hidden';
                    setTimeout(() => {
                        fullscreenSearchInput.focus();
                    }, 300);
                });
                
                fullscreenSearchClose.addEventListener('click', function() {
                    fullscreenSearch.classList.remove('active');
                    document.body.style.overflow = '';
                });
                
                // ব্রাউজার রিসাইজ হ্যান্ডলার
                window.addEventListener('resize', function() {
                    if (window.innerWidth > 1024) {
                        // ডেস্কটপ মোডে সব রিসেট
                        hamburger.classList.remove('active');
                        menuItems.classList.remove('active');
                        overlay.classList.remove('active');
                        document.body.style.overflow = '';
                        
                        // সমস্ত ওপেন ড্রপডাউন রিসেট 
                        dropdownItems.forEach(item => {
                            item.classList.remove('show-dropdown');
                        });
                    }
                });
        </script>
        
        <!-- ডার্ক মোড -->
        <style>
            /* Theme Toggle Styles */
        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            color:#6A35F2;
            transition: color 0.3s ease;
        }
        
        .theme-toggle:hover {
            color: #6A35F2
        }
        
        /* Icon transition */
        .theme-toggle i {
            transition: transform 0.3s ease;
        }
        
        .theme-toggle i:hover {
            transform: rotate(360deg);
        }
        </style>
        <!-- * - DOMContentLoaded ইভেন্টে স্ক্রিপ্ট চালু হয় -->
        <!-- * - নির্দিষ্ট HTML এলিমেন্টের তালিকা থেকে কালো ব্যাকগ্রাউন্ড চিহ্নিত করে টেক্সটের রঙ পরিবর্তন -->
        <!-- * - '.dark-mode-text' ক্লাস প্রয়োগ করে হোয়াইট টেক্সট দেখায় -->
        <!-- * - ডার্ক/লাইট মোডের জন্য মুন/সান আইকন টগল -->
        <!-- * - ব্যবহারকারীর থিম পছন্দ লোকালস্টোরেজে সংরক্ষণ করে -->
        <!-- * - পেজ লোডের সময় পূর্বের পছন্দ অনুযায়ী থিম প্রয়োগ হয় -->
        <script>
            document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.querySelector('.theme-toggle');
            const elementsToToggle = [
                'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 
                'p', 'a', 'img', 'div', 'span', 
                'ul', 'ol', 'li', 
                'table', 'tr', 'td', 'th', 
                'form', 'input', 'textarea', 'button', 
                'label', 'select', 'option', 
                'br', 'hr', 
                'strong', 'em', 
                'video', 'audio', 'iframe', 
                'section', 'article', 'header', 'footer', 
                'nav', 'main', 'aside'
            ];
        
            // Create sun and moon icons
            const moonIcon = document.createElement('i');
            moonIcon.classList.add('fas', 'fa-moon');
            const sunIcon = document.createElement('i');
            sunIcon.classList.add('fas', 'fa-sun');
        
            // Check for saved theme preference or system preference
            const savedTheme = localStorage.getItem('theme');
            const prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
        
            // Function to check if an element should be toggled
            const shouldToggleElement = (element) => {
                // Check if the element or its parent has a background-color that is black
                const style = window.getComputedStyle(element);
                const backgroundColor = style.backgroundColor;
                
                // Check for black backgrounds (rgba(0,0,0,1), #000, rgb(0,0,0), etc.)
                const isBlackBackground = 
                    backgroundColor === 'rgb(0, 0, 0)' || 
                    backgroundColor === 'rgba(0, 0, 0, 1)' || 
                    backgroundColor === '#000' || 
                    backgroundColor === '#000000';
        
                return isBlackBackground;
            };
        
            // Function to set theme
            function setTheme(theme) {
                if (theme === 'dark') {
                    // Add dark mode class to body
                    document.body.classList.add('dark-mode');
                    
                    // Toggle icon
                    themeToggle.innerHTML = '';
                    themeToggle.appendChild(sunIcon);
        
                    // Toggle text color for elements with black backgrounds
                    elementsToToggle.forEach(selector => {
                        const elements = document.querySelectorAll(selector);
                        elements.forEach(element => {
                            if (shouldToggleElement(element)) {
                                element.classList.add('dark-mode-text');
                            }
                        });
                    });
        
                    localStorage.setItem('theme', 'dark');
                } else {
                    // Remove dark mode class from body
                    document.body.classList.remove('dark-mode');
                    
                    // Toggle icon
                    themeToggle.innerHTML = '';
                    themeToggle.appendChild(moonIcon);
        
                    // Remove dark mode text color
                    elementsToToggle.forEach(selector => {
                        const elements = document.querySelectorAll(selector);
                        elements.forEach(element => {
                            element.classList.remove('dark-mode-text');
                        });
                    });
        
                    localStorage.setItem('theme', 'light');
                }
            }
        
            // Add CSS for dark mode
            const styleTag = document.createElement('style');
            styleTag.textContent = `
                body.dark-mode {
                    background-color: #121212;
                    color: #ffffff;
                }
                
                .dark-mode-text {
                    color: white !important;
                }
                
                /* Additional dark mode styles */
                body.dark-mode a {
                    color: #4299e1; /* Soft blue for links */
                }
                
                body.dark-mode input, 
                body.dark-mode textarea, 
                body.dark-mode select {
                    background-color: #2d2d2d;
                    color: #ffffff;
                    border-color: #444;
                }
            `;
            document.head.appendChild(styleTag);
        
            // Initial theme setup
            if (savedTheme) {
                setTheme(savedTheme);
            } else if (prefersDarkMode) {
                setTheme('dark');
            } else {
                // Ensure moon icon is set for default light mode
                themeToggle.appendChild(moonIcon);
            }
        
            // Theme toggle event listener
            themeToggle.addEventListener('click', () => {
                const currentTheme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
                setTheme(currentTheme === 'light' ? 'dark' : 'light');
            });
        });
        </script>
        <style>
        /* Dark Mode Styles */
        body.dark-mode {
        background-color: #121212;
        color: #ffffff;
        }
        body.dark-mode nav {
        background-color: #1e1e1e;
        color: #ffffff;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        }
        body.dark-mode .menu-link,
        body.dark-mode .dropdown-link {
        color: #e0e0e0;
        }
        body.dark-mode .search-box0 {
        background-color: #2c2c2c;
        border-color: none;
        }
        body.dark-mode .search-input {
        background-color: none;
        color: #ffffff;
        background: none;
        }
        body.dark-mode {
        background-color: #333;
        color: #ffd700;
        }
        body.dark-mode .cart-icon,
        body.dark-mode .language-toggle,
        body.dark-mode .profile-icon {
        color: #e0e0e0;
        }
        /* Smooth Transition for Theme Change */
        body,
        body.dark-mode,
        nav,
        .menu-link,
        .search-box,
        .search-input {
        transition: background-color 0.3s ease, 
        color 0.3s ease, 
        border-color 0.3s ease;
        }
        body.dark-mode nav .search-box0 {
            border: 1px solid rgba(229, 229, 229, 0.1);
        }
        body.dark-mode .dropdown-menu {
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode .dropdown-menu .dropdown-item {
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode .login-button {
        background-color: #6A35F2;
        color: #ffffff;
        }
        body.dark-mode nav .profile-dropdown .profile-icon{
        color:#6A35F2;
        }
        body.dark-mode nav .profile-dropdown .dropdown-menu1{
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode nav .profile-dropdown .dropdown-menu1 .dropdown-item{
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode nav .profile-dropdown .dropdown-menu1 .dropdown-item:hover{
        background-color: #6A35F2;
        }
        
        
        
        /* মোবাইল মোডে nav */
        @media screen and (max-width: 1024px){
            body.dark-mode .hamburger .line1{
        background-color:   #ffffff;
        color: #ffffff;
        }
        body.dark-mode .hamburger .line2{
        background-color:   #ffffff;
        color: #ffffff;
        }
        body.dark-mode .hamburger .line3{
        background-color:   #ffffff;
        color: #ffffff;
        }
        body.dark-mode .menu-items {
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode .menu-item{
        width: 100%;
        border-bottom: none;
        }
        body.dark-mode nav ul li a:hover{
            color:#6A35F2 ;
        }
        
        }
        /* লগইন পপআপ */
        body.dark-mode .login-popup,
        body.dark-mode .login-popup input {
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode .login-popup h1,
        body.dark-mode .login-popup label{
        color: #ffffff;
        }
        /* টেষ্ট */
        body.dark-mode {
            background-color: #121212;
            color: #E0E0E0;
        }
        
        body.dark-mode .container {
            background-color: #1e1e1e;
            color: #E0E0E0;
        }
        
        body.dark-mode .logo,
        body.dark-mode .title,
        body.dark-mode label,
        body.dark-mode .form-footer,
        body.dark-mode .modal-title,
        body.dark-mode .modal-body,
        body.dark-mode .timer {
            color: #E0E0E0;
        }
        
        body.dark-mode input:focus {
            border-color: #8A6CFF;
        }
        
        body.dark-mode .error-message {
            color: #ff6b6b;
        }
        
        body.dark-mode .button,
        body.dark-mode .modal-button {
            background-color: #8A6CFF;
            color: white;
        }
        
        body.dark-mode .resend-button {
            color: #A786FF;
        }
        
        body.dark-mode .resend-button:disabled {
            color: #555;
        }
        
        body.dark-mode .modal-content {
            background-color: #2a2a2a;
            color: #E0E0E0;
        }
        
        body.dark-mode .success-message {
            background-color: #264d3c;
            color: #b2f5ea;
        }
        
        body.dark-mode .spinner {
            border: 4px solid #444;
            border-top: 4px solid #A786FF;
        }
        
        
        
        
        
        
        /* বিশেষজ্ঞ প্রশিক্ষকদের সাথে অনলাইনে নতুন দক্ষতা শিখুন */
        body.dark-mode .container {
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode .container .hero-content h1,
        body.dark-mode .container .hero-content p  {
        background-color: #1e1e1e;
        color: #ffffff;
        }
        
        
        
        
        
        
        body.dark-mode .container .hero-content .buttons .btn-primary {
        background-color:#6A35F2;
        color: #ffffff;
        border: none;
        }
        body.dark-mode .container .hero-content .buttons .btn-primary:hover{
        background-color:#114A32;
        color: #ffffff;
        }
        body.dark-mode .container .hero-content .buttons .btn-secondary {
        background-color:#ffffff;
        color: black;
        border: none;
        }
        /* আপনি কি শিখতে চান? */
        body.dark-mode .container2 {
            margin-top: 20px;
            border-radius: 10px;
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode .container2 .header h1,
        body.dark-mode .container2 .header p{
            margin-top: 20px;
            border-radius: 10px;
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode .container2 .madrasah-category{
        background-color: #1e1e1e;
        box-shadow: 0 4px 8px rgba(20, 4, 9, 0.9);
        color: #ffffff;
        }
        body.dark-mode .container2 .madrasah-category h3,
        body.dark-mode .container2 .madrasah-category p{
        color: #ffffff;
        }
        /* কুরআন ও তাজবিদ */
        body.dark-mode .container3 {
        background-color: #1e1e1e;
        color: #ffffff;
        }
        body.dark-mode .container3 .feature-card{
        background-color: #1e1e1e;
        box-shadow: 0 4px 8px rgba(20, 4, 9, 0.9);
        color: #ffffff;
        }
        
        body.dark-mode .container3 .feature-card h2,
        body.dark-mode .container3 .feature-card span{
            margin-top: 20px;
            border-radius: 10px;
        color: #ffffff;
        }
        /* আমাদের মাদ্রাসা কোর্সসমূহ */
        body.dark-mode .container1{
        background-color: #1e1e1e;
        box-shadow: 0 4px 8px rgba(20, 4, 9, 0.9);
        color: #ffffff;
        }
        body.dark-mode .container1 .section-header h2,
        body.dark-mode .container1 .section-header p{
        color: #ffffff;
        }
        body.dark-mode .container1 .course-card{
        background-color: 	#2a2a2a;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        color: #ffffff;
        }
        body.dark-mode .container1 .course-card .add-to-cart-btn{
        background-color: 	#2a2a2a;
        color: #ffffff;
        }
        
        body.dark-mode .container1 .course-card .level-badge{
        color: #ffffff;
        }
        body.dark-mode .container1 .course-card .instructor span{
        color: #ffffff;
        }
        body.dark-mode .container1 .course-card .course-title{
        color: #ffffff;
        }
        body.dark-mode .container1 .course-card span{
        color: #ffffff;
        }
        body.dark-mode .container1 .course-card .course-meta { 
            border-top: 1px solid #3a3a3a;
        }
        body.dark-mode .container1 .course-card .course-footer { 
            border-top: 1px solid #3a3a3a;
        }
        body.dark-mode .container1 .course-card .buy-now-btn{ 
        color: #ffffff;
        }
        /* কেন মাদ্রাসা অনলাইন বেছে নিবেন */
        body.dark-mode .container6{
        background-color: #1e1e1e;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        color: #ffffff;
        }
        body.dark-mode .container6 .header2 h1,
        body.dark-mode .container6 .header2 p{
        color: #ffffff;
        }
        body.dark-mode .container6 .feature1,
        body.dark-mode .container6 .feature1 h3,
        body.dark-mode .container6 .feature1 p{
        background-color: 	#2a2a2a;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        color: #ffffff;
        }
        /* আমাদের শিক্ষার্থীরা কী বলেন? */
        body.dark-mode .testimonials{
        background-color: #1e1e1e;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        color: #ffffff;
        }
        body.dark-mode .testimonials h2,
        body.dark-mode .testimonials p,
        body.dark-mode .testimonials h4{
        color: #ffffff;
        }
        body.dark-mode .testimonial{
        background-color: #2a2a2a;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        color: #ffffff;
        }
        /* ফুটার সেকশন */
        body.dark-mode footer{
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        color: #ffffff;
        }
        body.dark-mode footer .footer-list li a{
         color: #ffffff;
        }
        body.dark-mode footer .footer-bottom-links a{
         color: #ffffff;
        }
        
        
        
        
        
        
        </style>
        
         <!-- * ১. ডেস্কটপ ও মোবাইল সার্চ ইনপুট পরিচালনা করে (Enter প্রেসে রিডাইরেক্ট করে) -->
         <!-- * ২. মোবাইল ডিভাইসে ফুলস্ক্রিন সার্চ UI চালু ও বন্ধ করা যায় -->
         <!-- * ৩. সার্চ কুয়েরি অনুযায়ী কোর্স ফিল্টার করে ফলাফল দেখায় (লোকাল অ্যারে থেকে) -->
         <!-- * ৪. ফলাফল না পেলে প্রাসঙ্গিক বার্তা দেখায় -->
         <!-- * ৫. কোর্স লেভেল অনুযায়ী CSS ক্লাস ডিটারমাইন করে -->
         <!-- * ৬. লোকালস্টোরেজ থেকে কার্ট আইটেম পড়ে UI-তে কার্ট কাউন্ট আপডেট করে -->
        <script>
            // Get all needed DOM elements
        document.addEventListener('DOMContentLoaded', function() {
          // Desktop search
          const searchInput = document.querySelector('.search-input');
          // Mobile search
          const mobileSearchBtn = document.querySelector('.mobile-search-btn');
          const fullscreenSearch = document.querySelector('.fullscreen-search');
          const fullscreenSearchInput = document.querySelector('.fullscreen-search-input');
          const fullscreenSearchClose = document.querySelector('.fullscreen-search-close');
          const overlay = document.querySelector('.overlay');
          
          // Handle desktop search
          if (searchInput) {
            searchInput.addEventListener('keyup', function(e) {
              if (e.key === 'Enter') {
                const searchTerm = searchInput.value.trim();
                if (searchTerm) {
                  redirectToSearchPage(searchTerm);
                }
              }
            });
          }
          
          // Handle mobile search toggle
          if (mobileSearchBtn) {
            mobileSearchBtn.addEventListener('click', function() {
              fullscreenSearch.classList.add('active');
              setTimeout(() => {
                fullscreenSearchInput.focus();
              }, 300);
            });
          }
          
          // Handle fullscreen search close
          if (fullscreenSearchClose) {
            fullscreenSearchClose.addEventListener('click', function() {
              fullscreenSearch.classList.remove('active');
            });
          }
          
          // Handle fullscreen search input
          if (fullscreenSearchInput) {
            fullscreenSearchInput.addEventListener('keyup', function(e) {
              if (e.key === 'Enter') {
                const searchTerm = fullscreenSearchInput.value.trim();
                if (searchTerm) {
                  redirectToSearchPage(searchTerm);
                }
              }
            });
          }
          
          // Redirect to search page with search term
          function redirectToSearchPage(searchTerm) {
            window.location.href = 'search.html?q=' + encodeURIComponent(searchTerm);
          }
          
          // Search page functionality
          const urlParams = new URLSearchParams(window.location.search);
          const searchQuery = urlParams.get('q');
          
          if (window.location.pathname.includes('search.html') && searchQuery) {
            performSearch(searchQuery);
          }
          
          function performSearch(query) {
            // Normalize query for case-insensitive matching
            const normalizedQuery = query.toLowerCase();
            
            // Display the search query
            const searchQueryDisplay = document.querySelector('.search-query');
            if (searchQueryDisplay) {
              searchQueryDisplay.textContent = `"${query}"`;
            }
            
            // Get all courses from the page
            // In a real implementation, you would fetch this data from a database
            const courses = [
              {
                id: 1,
                title: "বিশুদ্ধ তাজবিদসহ কুরআন শিক্ষার মাধ্যমে আধ্যাত্মিক উন্নতি অর্জন করুন।",
                instructor: "মাওলানা আব্দুল্লাহ",
                level: "বেসিক",
                chapters: "১৮ অধ্যায়",
                students: "৩৫০ শিক্ষার্থী",
                rating: "৪.৮",
                price: "৳৩,৫০০",
                originalPrice: "৳৪,৫০০",
                image: "14png.png",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              {
                id: 2,
                title: "হাদিসের সঠিক ব্যাখ্যা ও বিশ্লেষণ শিখুন, নবীর (সাঃ) জীবন থেকে শিক্ষা নিন।",
                instructor: "মাওলানা ইব্রাহিম",
                level: "মধ্যবর্তী",
                chapters: "১২ অধ্যায়",
                students: "২৪০ শিক্ষার্থী",
                rating: "৪.৯",
                price: "৳২,৮০০",
                originalPrice: "৳৩,৫০০",
                image: "Talimul Islam Academi.jpeg",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              {
                id: 3,
                title: "ইসলামী আইন ও জীবন বিধান শিখে আপনার দৈনন্দিন জীবনে সঠিক সিদ্ধান্ত নিন।",
                instructor: "মাওলানা জাকির",
                level: "বেসিক",
                chapters: "২০ অধ্যায়",
                students: "৪২০ শিক্ষার্থী",
                rating: "৪.৭",
                price: "৳৪,২০০",
                originalPrice: "৳৫,০০০",
                image: "14png.png",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              // Adding courses 4-10
              {
                id: 4,
                title: "আরবি ভাষার গভীরে প্রবেশ করুন, কুরআন ও হাদিস বুঝতে পারদর্শী হন।",
                instructor: "মাওলানা রফিক",
                level: "অ্যাডভান্সড",
                chapters: "১৪ অধ্যায়",
                students: "১৮০ শিক্ষার্থী",
                rating: "৪.৬",
                price: "৳৪,৮০০",
                originalPrice: "৳৫,৫০০",
                image: "/pexels-648298123-28872754.jpg",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              {
                id: 5,
                title: "কুরআনের তাফসির শিখে আল্লাহর কালামকে গভীরভাবে বুঝুন এবং জীবনে প্রয়োগ করুন।",
                instructor: "মাওলানা সালেহ",
                level: "মধ্যবর্তী",
                chapters: "১৬ অধ্যায়",
                students: "২৮০ শিক্ষার্থী",
                rating: "৪.৮",
                price: "৳৩,৮০০",
                originalPrice: "৳৪,৫০০",
                image: "pexels-648298123-28872754.jpg",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              {
                id: 6,
                title: "ইসলামী ইতিহাস, সংস্কৃতি ও শাস্ত্রের সঠিক জ্ঞান অর্জন করুন একটি বৈজ্ঞানিক দৃষ্টিভঙ্গি থেকে।",
                instructor: "মাওলানা আরিফ বিল্লাহ",
                level: "বেসিক",
                chapters: "১৫ অধ্যায়",
                students: "২৫০ শিক্ষার্থী",
                rating: "৪.৭",
                price: "৳৩,৬০০",
                originalPrice: "৳৪,২০০",
                image: "14png.png",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              {
                id: 7,
                title: "সঠিক বিশ্বাস ও তাওহিদের মৌলিক শিক্ষা গ্রহণ করে ঈমানকে দৃঢ় করুন।",
                instructor: "মাওলানা হাসান",
                level: "বেসিক",
                chapters: "১৬ অধ্যায়",
                students: "২২০ শিক্ষার্থী",
                rating: "৪.৮",
                price: "৳২,৯০০",
                originalPrice: "৳৩,৫০০",
                image: "14png.png",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              {
                id: 8,
                title: "প্রিয় নবী মুহাম্মাদ (সা.)-এর জীবনচরিত শিখে আদর্শ মুসলিম হিসেবে গড়ে উঠুন।",
                instructor: "মাওলানা হাসান",
                level: "বেসিক",
                chapters: "১৬ অধ্যায়",
                students: "২২০ শিক্ষার্থী",
                rating: "৪.৮",
                price: "৳২,৯০০",
                originalPrice: "৳৩,৫০০",
                image: "14png.png",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              {
                id: 9,
                title: "নৈতিকতা ও চরিত্র গঠনের ইসলামী শিক্ষায় নিজের ব্যক্তিত্ব উন্নত করুন।",
                instructor: "মাওলানা হাসান",
                level: "বেসিক",
                chapters: "১৬ অধ্যায়",
                students: "২২০ শিক্ষার্থী",
                rating: "৪.৮",
                price: "৳২,৯০০",
                originalPrice: "৳৩,৫০০",
                image: "14png.png",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
              {
                id: 10,
                title: "ইসলামের শান্তির বার্তা ছড়িয়ে দিতে দাওয়াহর সঠিক পদ্ধতি ও জ্ঞান অর্জন করুন।",
                instructor: "মাওলানা হাসান",
                level: "বেসিক",
                chapters: "১৬ অধ্যায়",
                students: "২২০ শিক্ষার্থী",
                rating: "৪.৮",
                price: "৳২,৯০০",
                originalPrice: "৳৩,৫০০",
                image: "14png.png",
                instructorImage: "Talimul Islam Academi.jpeg"
              },
            ];
            
            // Filter courses based on search query
            const filteredCourses = courses.filter(course => {
              return (
                course.title.toLowerCase().includes(normalizedQuery) ||
                course.instructor.toLowerCase().includes(normalizedQuery) ||
                course.level.toLowerCase().includes(normalizedQuery)
              );
            });
            
            // Get the results container
            const resultsContainer = document.querySelector('.search-results');
            
            if (resultsContainer) {
              // Clear previous results
              resultsContainer.innerHTML = '';
              
              // Display results or "no results" message
              if (filteredCourses.length > 0) {
                // Update results count
                const resultsCount = document.querySelector('.results-count');
                if (resultsCount) {
                  resultsCount.textContent = `${filteredCourses.length} টি ফলাফল পাওয়া গেছে`;
                }
                
                // Add each course card to results
                filteredCourses.forEach(course => {
                  const courseCard = createCourseCard(course);
                  resultsContainer.appendChild(courseCard);
                });
              } else {
                // Display no results message
                const noResults = document.createElement('div');
                noResults.className = 'no-results';
                noResults.innerHTML = `
                  <div class="no-results-icon">
                    <i class="fas fa-search"></i>
                  </div>
                  <h3>কোনো কোর্স পাওয়া যায়নি</h3>
                  <p>"${query}" এর জন্য কোনো ফলাফল নেই। অনুগ্রহ করে অন্য কিছু খুঁজুন।</p>
                `;
                resultsContainer.appendChild(noResults);
                
                // Update results count
                const resultsCount = document.querySelector('.results-count');
                if (resultsCount) {
                  resultsCount.textContent = '০ টি ফলাফল পাওয়া গেছে';
                }
              }
            }
          }
          
          
          
          // Helper function to get level class name
          function getLevelClass(level) {
            switch(level) {
              case 'বেসিক':
                return 'beginner';
              case 'মধ্যবর্তী':
                return 'intermediate';
              case 'অ্যাডভান্সড':
                return 'advanced';
              default:
                return 'beginner';
            }
          }
        });
        
        
        // Function to update cart count in the UI
        function updateCartCount() {
          const cartCountElement = document.querySelector('.cart-count');
          if (cartCountElement) {
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            cartCountElement.textContent = cartItems.length;
            
            // Show/hide based on cart count
            if (cartItems.length > 0) {
              cartCountElement.classList.remove('hidden');
            } else {
              cartCountElement.classList.add('hidden');
            }
          }
        }
        </script>
        
         <!-- * ১. ডেস্কটপ এবং মোবাইল উভয় প্ল্যাটফর্মে সার্চ ইনপুট থেকে Enter চাপলে সার্চ পেজে রিডাইরেক্ট করে। -->
         <!-- * ২. মোবাইল ডিভাইসে সার্চ আইকনে ক্লিক করলে ফুলস্ক্রিন সার্চ UI চালু করে এবং প্রয়োজনমতো ফোকাস দেয়। -->
         <!-- * ৩. লোকাল স্টোরেজ ব্যবহার করে ব্যবহারকারীর সার্চ কিওয়ার্ড সংরক্ষণ ও পুনরুদ্ধার করে। -->
         <!-- * ৪. ইউজার ইনপুট ভ্যালিডেশন করে অবাঞ্ছিত বাংলা হসন্ত (্) চিহ্ন সরিয়ে পরিষ্কার কিওয়ার্ড নিশ্চিত করে। -->
        <script>
            // নেভিগেশন বারের সার্চ বক্স এবং কোর্স অন্বেষণ পেজের সার্চ বক্স সংযোগ করার জন্য স্ক্রিপ্ট
        document.addEventListener('DOMContentLoaded', function() {
            // অ্যালিমেন্ট সিলেক্ট করুন
            const navSearchBox = document.querySelector('.nav-center .search-input');
            const mobileSearchIcon = document.querySelector('.mobile-search-icon');
            const searchContainer = document.querySelector('.search-container');
            
            // সার্চ কোয়েরী ভ্যালিডেশন ফাংশন যোগ করি
            function validateSearchQuery(query) {
                if (!query) return '';
                // হসন্ত চিহ্ন ("্") বা অন্যান্য অবাঞ্ছিত চিহ্ন সরানো
                return query.trim().replace(/[\u0BCD\u09CD]/g, '');
            }
            
            // মোবাইল সার্চ আইকনে ক্লিক করার ইভেন্ট হ্যান্ডলার
            if (mobileSearchIcon) {
                mobileSearchIcon.addEventListener('click', function() {
                    // চেক করুন যে আমরা কোর্স অন্বেষণ পেজে আছি কিনা
                    if (window.location.pathname.includes('Search.html')) {
                        // যদি আমরা ইতিমধ্যে সার্চ পেজে থাকি, শুধু সার্চ বক্স শো করুন এবং ফোকাস করুন
                        if (searchContainer) {
                            searchContainer.classList.add('active');
                            const courseSearchInput = document.getElementById('searchInput');
                            if (courseSearchInput) {
                                courseSearchInput.focus();
                            }
                        }
                    } else {
                        // যদি আমরা সার্চ পেজে না থাকি, সার্চ পেজে রিডাইরেক্ট করুন
                        // লোকাল স্টোরেজে ফ্ল্যাগ সেট করুন যে ফোকাস দরকার
                        localStorage.setItem('searchFocusNeeded', 'true');
                        
                        // বর্তমান সার্চ বক্সের ভ্যালু সংরক্ষণ করুন (যদি থাকে)
                        if (navSearchBox && navSearchBox.value.trim() !== '') {
                            const cleanQuery = validateSearchQuery(navSearchBox.value);
                            localStorage.setItem('lastSearchQuery', cleanQuery);
                            window.location.href = 'Search.html?q=' + encodeURIComponent(cleanQuery);
                        } else {
                            // খালি সার্চ বক্সের সাথে সার্চ পেজে যান
                            window.location.href = 'Search.html';
                        }
                    }
                });
            }
            
            // মোবাইল নেভিগেশন বারের সার্চ বক্সে ক্লিক করার ইভেন্ট হ্যান্ডলার
            if (navSearchBox) {
                navSearchBox.addEventListener('click', function(e) {
                    // প্রপাগেশন বন্ধ করুন যাতে অন্য কোন ইভেন্ট হ্যান্ডলার ট্রিগার না হয়
                    e.stopPropagation();
                    
                    // চেক করুন যে আমরা কোর্স অন্বেষণ পেজে আছি কিনা
                    if (!window.location.pathname.includes('Search.html')) {
                        // যদি আমরা সার্চ পেজে না থাকি, সার্চ পেজে রিডাইরেক্ট করুন
                        localStorage.setItem('searchFocusNeeded', 'true');
                        
                        // বর্তমান সার্চ ভ্যালু সংরক্ষণ করুন (যদি থাকে)
                        if (navSearchBox.value.trim() !== '') {
                            const cleanQuery = validateSearchQuery(navSearchBox.value);
                            localStorage.setItem('lastSearchQuery', cleanQuery);
                            window.location.href = 'Search.html?q=' + encodeURIComponent(cleanQuery);
                        } else {
                            // খালি সার্চ বক্সের সাথে সার্চ পেজে যান
                            window.location.href = 'Search.html';
                        }
                    }
                });
        
                // নিশ্চিত করা যে ইনপুট ফিল্ডে অবাঞ্ছিত চিহ্ন প্রবেশ না করে
                navSearchBox.addEventListener('input', function() {
                    const cleanValue = validateSearchQuery(this.value);
                    if (cleanValue !== this.value) {
                        this.value = cleanValue;
                    }
                });
            }
            
            // সার্চ পেজ লোড হলে লোকাল স্টোরেজ থেকে সার্চ ভ্যালু পুনরুদ্ধার করুন
            if (window.location.pathname.includes('Search.html')) {
                const courseSearchInput = document.getElementById('searchInput');
                
                if (courseSearchInput) {
                    // URL থেকে কোয়েরি পরামিতি পড়ুন
                    const urlParams = new URLSearchParams(window.location.search);
                    const searchQuery = urlParams.get('q');
                    
                    // লোকাল স্টোরেজ থেকে সার্চ কোয়েরি চেক করুন
                    const storedQuery = localStorage.getItem('lastSearchQuery');
                    const focusNeeded = localStorage.getItem('searchFocusNeeded') === 'true';
                    
                    // সার্চ ইনপুটে সঠিক মান সেট করুন
                    if (searchQuery) {
                        const cleanQuery = validateSearchQuery(searchQuery);
                        courseSearchInput.value = cleanQuery;
                        if (navSearchBox) {
                            navSearchBox.value = cleanQuery;
                        }
                        
                        // কোর্স সার্চ ফাংশন কল করুন
                        if (typeof searchCourses === 'function' && cleanQuery) {
                            searchCourses(cleanQuery);
                        }
                    } else if (storedQuery) {
                        const cleanQuery = validateSearchQuery(storedQuery);
                        courseSearchInput.value = cleanQuery;
                        if (navSearchBox) {
                            navSearchBox.value = cleanQuery;
                        }
                        
                        // কোর্স সার্চ ফাংশন কল করুন
                        if (typeof searchCourses === 'function' && cleanQuery) {
                            searchCourses(cleanQuery);
                        }
                    }
                    
                    // অবাঞ্ছিত চিহ্ন থেকে রক্ষা করতে ইনপুট ইভেন্ট লিসেনার যোগ করুন
                    courseSearchInput.addEventListener('input', function() {
                        const cleanValue = validateSearchQuery(this.value);
                        if (cleanValue !== this.value) {
                            this.value = cleanValue;
                        }
                    });
                    
                    // যদি ফোকাস প্রয়োজন হয়
                    if (focusNeeded) {
                        setTimeout(function() {
                            courseSearchInput.focus();
                            // কার্সর শেষে রাখুন
                            const length = courseSearchInput.value.length;
                            courseSearchInput.setSelectionRange(length, length);
                            
                            // সার্চ কন্টেইনার অ্যাক্টিভ করুন (মোবাইল ভিউতে)
                            if (searchContainer) {
                                searchContainer.classList.add('active');
                            }
                            
                            // লোকাল স্টোরেজ থেকে ফ্ল্যাগ মুছে ফেলুন
                            localStorage.removeItem('searchFocusNeeded');
                        }, 100);
                    }
                }
            }
        });
        </script>
        
        <!-- স্টাইল অংশে যোগ করুন (বডি ট্যাগের আগে) -->
        <style>
            /* ব্লার ওভারলে */
            .blur-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.4);
                backdrop-filter: blur(5px);
                -webkit-backdrop-filter: blur(5px);
                z-index: 98;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .blur-overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            /* লগইন পপআপ */
            .login-popup {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) scale(0.9);
                width: 90%;
                max-width: 400px;
                background-color: white;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
                z-index: 99;
                /* padding: 25px; */
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s ease;
            }
            
            .login-popup.active {
                opacity: 1;
                visibility: visible;
                transform: translate(-50%, -50%) scale(1);
            }
            
            /* লগইন টাইটেল */
            .login-title {
                text-align: center;
                margin-bottom: 20px;
                font-size: 22px;
                font-weight: 600;
                color: #333;
            }
            
            /* ফর্ম গ্রুপ */
            .form-group {
                margin-bottom: 15px;
            }
            
            .form-group label {
                display: block;
                margin-bottom: 5px;
                font-size: 14px;
                color: #555;
            }
            
            .form-group input {
                width: 100%;
                padding: 10px 15px;
                border: 1px solid #ddd;
                border-radius: 5px;
                font-size: 14px;
                transition: all 0.3s ease;
            }
            
            .form-group input:focus {
                border-color: #6A35F2;
                box-shadow: 0 0 0 2px rgba(106, 53, 242, 0.1);
                outline: none;
            }
            
            /* লগইন বাটন */
            .login-submit {
                width: 100%;
                padding: 12px;
                background-color: #6A35F2;
                color: white;
                border: none;
                border-radius: 5px;
                font-size: 16px;
                font-weight: 500;
                cursor: pointer;
                transition: all 0.3s ease;
                margin-top: 10px;
            }
            
            .login-submit:hover {
                background-color: #5628d8;
            }
            
            /* পাসওয়ার্ড ভুলে গেছেন লিংক */
            .forgot-password {
                text-align: right;
                margin: 10px 0;
            }
            
            .forgot-password a {
                color: #6A35F2;
                font-size: 13px;
                text-decoration: none;
            }
            
            .forgot-password a:hover {
                text-decoration: underline;
            }
            
            /* মেম্বার না হলে */
            .register-link {
                text-align: center;
                margin-top: 20px;
                font-size: 14px;
                color: #555;
            }
            
            .register-link a {
                color: #6A35F2;
                font-weight: 500;
                text-decoration: none;
            }
            
            .register-link a:hover {
                text-decoration: underline;
            }
            
            /* ক্লোজ বাটন */
            .close-login {
                position: absolute;
                top: 15px;
                right: 15px;
                background: transparent;
                border: none;
                font-size: 20px;
                color: #888;
                cursor: pointer;
                transition: all 0.3s ease;
            }
            
            .close-login:hover {
                color: #6A35F2;
                transform: rotate(90deg);
            }
            
            /* সোশ্যাল লগইন বাটন */
            .social-login {
                margin-top: 20px;
                text-align: center;
            }
            
            .social-login-title {
                position: relative;
                margin-bottom: 15px;
                font-size: 13px;
                color: #777;
            }
            
            .social-login-title:before,
            .social-login-title:after {
                content: "";
                position: absolute;
                top: 50%;
                width: calc(50% - 70px);
                height: 1px;
                background-color: #ddd;
            }
            
            .social-login-title:before {
                left: 0;
            }
            
            .social-login-title:after {
                right: 0;
            }
            
            .social-buttons {
                display: flex;
                justify-content: center;
                gap: 10px;
            }
            
            .social-button {
                width: 50px;
                height: 50px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                border: 1px solid #ddd;
                color: #555;
                font-size: 18px;
                transition: all 0.3s ease;
            }
            
            .social-button:hover {
                background-color: #f5f5f5;
                transform: translateY(-3px);
            }
            
            .facebook {
                color: #3b5998;
            }
            
            .google {
                color: #dd4b39;
            }
            
            /* ডার্ক থিম সাপোর্ট */
            body.dark-theme .login-popup {
                background-color: #1f1f1f;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            }
            
            body.dark-theme .login-title {
                color: #e0e0e0;
            }
            
            body.dark-theme .form-group label {
                color: #aaa;
            }
            
            body.dark-theme .form-group input {
                background-color: #2d2d2d;
                border-color: #3d3d3d;
                color: #e0e0e0;
            }
            
            body.dark-theme .register-link,
            body.dark-theme .social-login-title {
                color: #aaa;
            }
            
            body.dark-theme .social-button {
                border-color: #3d3d3d;
                color: #aaa;
            }
            
            body.dark-theme .social-button:hover {
                background-color: #2d2d2d;
            }
            
            body.dark-theme .close-login {
                color: #aaa;
            }
            
            body.dark-theme .social-login-title:before,
            body.dark-theme .social-login-title:after {
                background-color: #3d3d3d;
            }
        </style>
        <style>
            .container {
                background-color: white;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
                width: 100%;
                max-width: 450px;
                padding: 20px 20px;
                text-align: center;
            }
        
            .logo {
                font-size: 24px;
                font-weight: bold;
                /* margin-bottom: 15px; */
                color: #333;
                letter-spacing: 1px;
            }
        
            .title {
                font-size: 28px;
                color: #333;
                margin-bottom: 20px;
            }
        
            .form-container {
                display: block;
                width: 100%;
            }
        
            .form-group {
                margin-bottom: 15px;
                text-align: left;
            }
        
            label {
                display: block;
                margin-bottom: 8px;
                font-size: 16px;
                font-weight: bold;
                color: #333;
            }
        
            input {
                width: 100%;
                padding: 12px 15px;
                border: 1px solid #ddd;
                border-radius: 5px;
                font-size: 16px;
                transition: border-color 0.3s;
            }
        
            input:focus {
                outline: none;
                border-color: #6A35F2;
            }
        
            .error-message {
                color: #e74c3c;
                font-size: 14px;
                margin-top: 5px;
                display: none;
            }
        
            .show-error {
                display: block;
            }
        
            .password-container {
                position: relative;
            }
        
            .toggle-password {
                position: absolute;
                right: 15px;
                top: 50%;
                transform: translateY(-50%);
                background: none;
                border: none;
                color: #666;
                cursor: pointer;
                font-size: 14px;
            }
        
            .button {
                background-color: #6A35F2;
                color: white;
                border: none;
                border-radius: 5px;
                padding: 12px 20px;
                width: 100%;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
                transition: background-color 0.3s;
                margin-top: 10px;
                opacity: 0.9;
            }
        
            .button:hover {
                opacity: 1;
                transition: opacity 0.5s ease-in-out;
            }
        
            .form-footer {
                margin-top: 20px;
                font-size: 15px;
                color: #666;
            }
        
            .form-footer a {
                color: #6A35F2;
                text-decoration: none;
                font-weight: bold;
            }
        
            .form-footer a:hover {
                text-decoration: underline;
            }
        
            .form-switch {
                margin-top: 30px;
            }
        
            #emailCheckForm, #otpVerificationForm, #signupForm {
                display: none;
            }
        
            /* For mobile screens */
            @media (max-width: 480px) {
                .container {
                    padding: 30px 15px;
                }
                
                .title {
                    font-size: 24px;
                }
                
                input {
                    padding: 10px 12px;
                }
            }
        
            .success-message {
                background-color: #d4edda;
                color: #155724;
                padding: 15px;
                border-radius: 5px;
                margin-bottom: 20px;
                display: none;
            }
            
            .otp-container {
                margin: 20px 0;
            }
            
            .otp-input {
                display: flex;
                justify-content: center;
                margin: 15px 0;
            }
            
            .otp-input input {
                width: 50px;
                height: 50px;
                font-size: 24px;
                text-align: center;
                margin: 0 5px;
            }
            
            .timer {
                color: #6A35F2;
                font-size: 16px;
                margin-top: 10px;
                font-weight: bold;
            }
            
            .resend-button {
                background: none;
                border: none;
                color: #6A35F2;
                text-decoration: underline;
                cursor: pointer;
                font-size: 14px;
                margin-top: 10px;
            }
            
            .resend-button:disabled {
                color: #999;
                text-decoration: none;
                cursor: not-allowed;
            }
            
            .modal {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                z-index: 1000;
                justify-content: center;
                align-items: center;
               }
            
            .modal-content {
                background-color: white;
                padding: 30px;
                border-radius: 5px;
                max-width: 400px;
                text-align: center;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            }
            
            .modal-title {
                font-size: 22px;
                margin-bottom: 15px;
                color: #333;
            }
            
            .modal-body {
                margin-bottom: 20px;
                font-size: 16px;
                color: #666;
            }
            
            .modal-button {
                background-color: #6A35F2;
                color: white;
                border: none;
                border-radius: 5px;
                padding: 10px 20px;
                font-size: 16px;
                cursor: pointer;
            }
        
        
        
        
        
        
        
            .loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1001;
        }
        
        .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #6A35F2;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
        }
        </style> 
        <!-- এই HTML কোড বডি ট্যাগের শেষে যোগ করুন, শেষ স্ক্রিপ্ট এর আগে -->
        <!-- ব্লার ওভারলে -->
        <div class="blur-overlay"></div>
        <!-- লগইন পপআপ -->
        <div class="login-popup">
            <button class="close-login">
                <i class="fas fa-times"></i>
            </button>
            <div class="container">        
                <div id="loginSection">
                    <h1 class="title">লগইন করুন</h1>
                    
                    <div class="success-message" id="registrationSuccess">
                        আপনার একাউন্ট সফলভাবে তৈরি হয়েছে। এখন লগইন করুন।
                    </div>
                    
                    <form id="loginForm" class="form-container" autocomplete="off">
                        <div class="form-group">
                            <label for="loginEmail">ইমেইল</label>
                            <input name="login_email" id="loginEmail" placeholder="আপনার ইমেইল লিখুন">
                            <p class="error-message" id="loginEmailError">অনুগ্রহ করে একটি সঠিক ইমেইল প্রদান করুন</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="loginPassword">পাসওয়ার্ড</label>
                            <div class="password-container">
                                <input name="login_password" id="loginPassword" placeholder="আপনার পাসওয়ার্ড লিখুন">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('loginPassword', 'loginPasswordToggle')" id="loginPasswordToggle">দেখুন</button>
                            </div>
                            <p class="error-message" id="loginPasswordError">পাসওয়ার্ড প্রয়োজন</p>
                        </div>
                        
                        <button type="submit" class="button">লগইন করুন</button>
                        
                        <div class="form-footer">
                            একাউন্ট নেই? <a href="#" onclick="toggleForm('emailCheck'); return false;">নতুন একাউন্ট খুলুন</a>
                        </div>
                    </form>
                </div>
                
                <!-- Step 1: Email Check Form -->
                <div id="emailCheckSection">
                    <h1 class="title">নতুন একাউন্ট খুলুন</h1>
                    
                    <form id="emailCheckForm" class="form-container">
                        <div class="form-group">
                            <label for="checkEmail">ইমেইল</label>
                            <input type="email" id="checkEmail" placeholder="আপনার ইমেইল লিখুন">
                            <p class="error-message" id="checkEmailError">অনুগ্রহ করে একটি সঠিক ইমেইল প্রদান করুন</p>
                        </div>
                        
                        <button type="submit" class="button">এগিয়ে যান</button>
                        
                        <div class="form-footer">
                            ইতিমধ্যে একাউন্ট আছে? <a href="#" onclick="toggleForm('login'); return false;">লগইন করুন</a>
                        </div>
                    </form>
                </div>
                
                <!-- Step 2: OTP Verification Form -->
                <div id="otpVerificationSection">
                    <h1 class="title">অটিপি যাচাইকরণ</h1>
                    
                    <form id="otpVerificationForm" class="form-container">
                        <p>আপনার ইমেইলে (<span id="userEmail"></span>) ৪ সংখ্যার অটিপি পাঠানো হয়েছে</p>
                        
                        <div class="otp-container">
                            <label>অটিপি দিন</label>
                            <div class="otp-input">
                                <input type="text" maxlength="1" id="otp1" class="otp-digit">
                                <input type="text" maxlength="1" id="otp2" class="otp-digit">
                                <input type="text" maxlength="1" id="otp3" class="otp-digit">
                                <input type="text" maxlength="1" id="otp4" class="otp-digit">
                            </div>
                            <p class="error-message" id="otpError">অনুগ্রহ করে সঠিক অটিপি দিন</p>
                            
                            <div class="timer" id="otpTimer">বাকি সময়: <span id="timer">02:00</span></div>
                            <button type="button" class="resend-button" id="resendOtp" disabled>পুনরায় অটিপি পাঠান</button>
                        </div>
                        
                        <button type="submit" class="button">যাচাই করুন</button>
                        
                        <div class="form-footer">
                            <a href="#" onclick="toggleForm('emailCheck'); return false;">ফিরে যান</a>
                        </div>
                    </form>
                </div>
                
                <!-- Step 3: Complete Registration Form -->
                <div id="signupSection">
                    <h1 class="title">রেজিস্ট্রেশন সম্পন্ন করুন</h1>
                    
                    <form id="signupForm" class="form-container">
                        <div class="form-group">
                            <label for="signupName">পূর্ণ নাম</label>
                            <input type="text" id="signupName" placeholder="আপনার পূর্ণ নাম লিখুন">
                            <p class="error-message" id="signupNameError">নাম প্রয়োজন</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="signupPassword">পাসওয়ার্ড</label>
                            <div class="password-container">
                                <input type="password" id="signupPassword" placeholder="একটি শক্তিশালী পাসওয়ার্ড লিখুন">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('signupPassword', 'signupPasswordToggle')" id="signupPasswordToggle">দেখুন</button>
                            </div>
                            <p class="error-message" id="signupPasswordError">পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="signupConfirmPassword">পাসওয়ার্ড নিশ্চিত করুন</label>
                            <div class="password-container">
                                <input type="password" id="signupConfirmPassword" placeholder="পাসওয়ার্ড আবার লিখুন">
                                <button type="button" class="toggle-password" onclick="togglePasswordVisibility('signupConfirmPassword', 'confirmPasswordToggle')" id="confirmPasswordToggle">দেখুন</button>
                            </div>
                            <p class="error-message" id="signupConfirmPasswordError">পাসওয়ার্ড মিলছে না</p>
                        </div>
                        
                        <button type="submit" class="button">রেজিস্ট্রেশন সম্পন্ন করুন</button>
                    </form>
                </div>
        </div>
        <!-- Success Modal -->
        <div class="modal" id="successModal">
                <div class="modal-content">
                    <h2 class="modal-title">অভিনন্দন!</h2>
                    <p class="modal-body">আপনার রেজিস্ট্রেশন সফলভাবে সম্পন্ন হয়েছে। এখন আপনি লগইন করতে পারেন।</p>
                    <button class="modal-button" onclick="closeModal()">বুঝেছি</button>
                </div>
        </div>
        </div>
        
        
        <!-- * ১. "লগইন" বাটনে ক্লিক করলে পপআপ চালু হয় এবং ব্যাকগ্রাউন্ড ব্লার হয়। -->
        <!-- * ২. "×" ক্লোজ বাটন বা ব্যাকগ্রাউন্ডে (blur overlay) ক্লিক করলে পপআপ বন্ধ হয়। -->
        <!-- * ৩. পপআপ খোলার সময় স্ক্রল বন্ধ করে এবং বন্ধ হলে আবার চালু করে। -->
        <!-- * ৪. ফর্ম সাবমিট করলে (ডেমো উদ্দেশ্যে) লগইন সফল বার্তা দেখায় এবং পপআপ বন্ধ করে। -->
        
        
        
        
        
        
        
        
        
<!-- <script>
                    // API URL - সার্ভার URL
                    const API_URL = 'https://talimul-islam.onrender.com';
                    const DB_API_URL = 'https://t-i-a-storage-backend.onrender.com';  // MongoDB backend URL
                                        
                    let currentEmail = '';
                    let otpTimer;
                    let tokenRefreshInterval;
                    
                    // সাধারণ ফাংশন
                    // Toggle between forms
                    function toggleForm(formType) {
                        document.getElementById('loginSection').style.display = 'none';
                        document.getElementById('emailCheckSection').style.display = 'none';
                        document.getElementById('otpVerificationSection').style.display = 'none';
                        document.getElementById('signupSection').style.display = 'none';
                        
                        document.getElementById('loginForm').style.display = 'none';
                        document.getElementById('emailCheckForm').style.display = 'none';
                        document.getElementById('otpVerificationForm').style.display = 'none';
                        document.getElementById('signupForm').style.display = 'none';
                        
                        if (formType === 'login') {
                            document.getElementById('loginSection').style.display = 'block';
                            document.getElementById('loginForm').style.display = 'block';
                        } else if (formType === 'emailCheck') {
                            document.getElementById('emailCheckSection').style.display = 'block';
                            document.getElementById('emailCheckForm').style.display = 'block';
                        } else if (formType === 'otpVerification') {
                            document.getElementById('otpVerificationSection').style.display = 'block';
                            document.getElementById('otpVerificationForm').style.display = 'block';
                        } else if (formType === 'signup') {
                            document.getElementById('signupSection').style.display = 'block';
                            document.getElementById('signupForm').style.display = 'block';
                        }
                    }
                    
                    // Toggle password visibility
                    function togglePasswordVisibility(inputId, toggleId) {
                        const passwordInput = document.getElementById(inputId);
                        const toggleButton = document.getElementById(toggleId);
                        
                        if (passwordInput.type === 'password') {
                            passwordInput.type = 'text';
                            toggleButton.textContent = 'লুকান';
                        } else {
                            passwordInput.type = 'password';
                            toggleButton.textContent = 'দেখুন';
                        }
                    }
                    
                    // Start OTP timer
                    function startOTPTimer() {
                        let totalSeconds = 120; // 2 minutes
                        
                        clearInterval(otpTimer);
                        document.getElementById('resendOtp').disabled = true;
                        
                        // Update timer display immediately
                        const minutes = Math.floor(totalSeconds / 60);
                        const seconds = totalSeconds % 60;
                        document.getElementById('timer').textContent = 
                            (minutes < 10 ? '0' + minutes : minutes) + ':' + 
                            (seconds < 10 ? '0' + seconds : seconds);
                        
                        otpTimer = setInterval(function() {
                            totalSeconds--;
                            
                            const minutes = Math.floor(totalSeconds / 60);
                            const seconds = totalSeconds % 60;
                            
                            document.getElementById('timer').textContent = 
                                (minutes < 10 ? '0' + minutes : minutes) + ':' + 
                                (seconds < 10 ? '0' + seconds : seconds);
                            
                            if (totalSeconds <= 0) {
                                clearInterval(otpTimer);
                                document.getElementById('resendOtp').disabled = false;
                            }
                        }, 1000);
                    }
                    
                    // লোডিং ফাংশন
                    // লোডিং স্পিনার তৈরি করুন
                    function createLoader() {
                        const loader = document.createElement('div');
                        loader.className = 'loader';
                        loader.id = 'pageLoader';
                        
                        const spinner = document.createElement('div');
                        spinner.className = 'spinner';
                        
                        loader.appendChild(spinner);
                        document.body.appendChild(loader);
                    }
                    
                    // লোডিং দেখানোর ফাংশন
                    function showLoading() {
                        if (!document.getElementById('pageLoader')) {
                            createLoader();
                        }
                        document.getElementById('pageLoader').style.display = 'flex';
                        // document.body.style.cursor = 'wait';
                    }
                    
                    // লোডিং বন্ধ করার ফাংশন
                    function hideLoading() {
                        const loader = document.getElementById('pageLoader');
                        if (loader) {
                            loader.style.display = 'none';
                        }
                        // document.body.style.cursor = 'default';
                    }
                    
                    // Show error with specified message
                    function showError(elementId, message) {
                        const errorElement = document.getElementById(elementId);
                        errorElement.textContent = message;
                        errorElement.classList.add('show-error');
                    }
                    
                    // Hide error
                    function hideError(elementId) {
                        document.getElementById(elementId).classList.remove('show-error');
                    }
                    
                    // Email validation function
                    function validateEmail(email) {
                        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        return re.test(email);
                    }
                    
                    // নোটিফিকেশন পপআপ ফাংশন - alert এর পরিবর্তে
                    function showNotification(message, type = 'success') {
                        // পূর্বের নোটিফিকেশন রিমুভ করুন
                        const existingNotification = document.getElementById('customNotification');
                        if (existingNotification) {
                            existingNotification.remove();
                        }
                        
                        // নতুন নোটিফিকেশন তৈরি করুন
                        const notification = document.createElement('div');
                        notification.id = 'customNotification';
                        notification.className = `custom-notification ${type}`;
                        
                        // নোটিফিকেশন কনটেন্ট
                        notification.innerHTML = `
                            <div class="notification-content">
                                <span class="notification-message">${message}</span>
                                <span class="notification-close">&times;</span>
                            </div>
                        `;
                        
                        // নোটিফিকেশন স্টাইল
                        notification.style.position = 'fixed';
                        notification.style.top = '20px';
                        notification.style.right = '20px';
                        notification.style.backgroundColor = type === 'success' ? '#4CAF50' : '#f44336';
                        notification.style.color = 'white';
                        notification.style.padding = '15px';
                        notification.style.borderRadius = '5px';
                        notification.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
                        notification.style.zIndex = '9999';
                        notification.style.transition = 'all 0.3s ease';
                        notification.style.opacity = '0';
                        
                        // বডিতে অ্যাড করুন
                        document.body.appendChild(notification);
                        
                        // ফেড ইন এফেক্ট
                        setTimeout(() => {
                            notification.style.opacity = '1';
                        }, 10);
                        
                        // ক্লোজ বাটন ফাংশনালিটি
                        const closeButton = notification.querySelector('.notification-close');
                        closeButton.style.marginLeft = '15px';
                        closeButton.style.cursor = 'pointer';
                        closeButton.style.fontWeight = 'bold';
                        
                        closeButton.addEventListener('click', function() {
                            notification.style.opacity = '0';
                            setTimeout(() => {
                                notification.remove();
                            }, 300);
                        });
                        
                        // অটো ক্লোজ
                        setTimeout(() => {
                            notification.style.opacity = '0';
                            setTimeout(() => {
                                notification.remove();
                            }, 300);
                        }, 5000);
                    }
                    
                    // মডাল ফাংশন
                    // Open modal
                    function openModal() {
                        document.getElementById('successModal').style.display = 'flex';
                    }
                    
                    // Close modal
                    function closeModal() {
                        document.getElementById('successModal').style.display = 'none';
                        toggleForm('login');
                    }
                    
                    // টোকেন রিফ্রেশ ফাংশন
                    async function refreshToken() {
                        try {
                            const token = localStorage.getItem('authToken');
                            if (!token) return false;
                            
                            const response = await fetch(`${DB_API_URL}/refresh-token`, {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                    'Authorization': `Bearer ${token}`
                                }
                            });
                            
                            const data = await response.json();
                            
                            if (data.success && data.token) {
                                // নতুন টোকেন সেভ করুন
                                localStorage.setItem('authToken', data.token);
                                if (data.user) {
                                    localStorage.setItem('currentUser', JSON.stringify(data.user));
                                }
                                return true;
                            } else {
                                return false;
                            }
                        } catch (error) {
                            console.error('Token refresh error:', error);
                            return false;
                        }
                    }
                    
                    // অটো টোকেন রিফ্রেশ সেটআপ
                    function setupTokenRefresh() {
                        // প্রতি 10 মিনিটে টোকেন রিফ্রেশ করুন
                        tokenRefreshInterval = setInterval(async () => {
                            const isRefreshed = await refreshToken();
                            if (!isRefreshed) {
                                // রিফ্রেশ ফেইল হলে লগআউট করুন
                                handleAutoLogout();
                            }
                        }, 10 * 60 * 1000); // 10 মিনিট
                    }
                    
                    // অটো লগআউট হ্যান্ডলার
                    function handleAutoLogout() {
                        // সেশন ক্লিয়ার করুন
                        localStorage.removeItem('authToken');
                        localStorage.removeItem('currentUser');
                        
                        // ইন্টারভাল ক্লিয়ার করুন
                        if (tokenRefreshInterval) {
                            clearInterval(tokenRefreshInterval);
                        }
                        
                        // UI আপডেট করুন
                        checkLoginStatus();
                        
                        // ইউজারকে জানান
                        showNotification('আপনার সেশন শেষ হয়ে গেছে। আবার লগইন করুন।', 'error');
                    }
                    
                    // লগইন স্টেটাস চেক করার উন্নত ফাংশন
                    async function checkLoginStatus() {
                        // localStorage থেকে টোকেন পড়ুন
                        const token = localStorage.getItem('authToken');
                        
                        const loginButton = document.getElementById('loginButton');
                        const profileDropdown = document.getElementById('profileDropdown');
                        
                        if (token) {
                            try {
                                // টোকেন ভ্যালিডেট করার জন্য API কল
                                const response = await fetch(`${DB_API_URL}/validate-token`, {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                        'Authorization': `Bearer ${token}`
                                    }
                                });
                                
                                const data = await response.json();
                                
                                if (data.valid) {
                                    // লগইন করা আছে, প্রোফাইল আইকন দেখান
                                    if (loginButton) loginButton.style.display = 'none';
                                    if (profileDropdown) profileDropdown.style.display = 'block';
                                    
                                    // যদি ইউজার ডাটা থাকে তাহলে সেট করুন
                                    if (data.user) {
                                        localStorage.setItem('currentUser', JSON.stringify(data.user));
                                    }
                                    
                                    // অটো রিফ্রেশ সেটআপ করুন (যদি এখনো না করা হয়ে থাকে)
                                    if (!tokenRefreshInterval) {
                                        setupTokenRefresh();
                                    }
                                    
                                    return true;
                                } else {
                                    // টোকেন ভ্যালিড নয়, রিফ্রেশ করার চেষ্টা করুন
                                    const isRefreshed = await refreshToken();
                                    if (isRefreshed) {
                                        return await checkLoginStatus();
                                    } else {
                                        // রিফ্রেশ ফেইল হলে লগআউট
                                        handleAutoLogout();
                                        return false;
                                    }
                                }
                            } catch (error) {
                                console.error('Error validating token:', error);
                                // নেটওয়ার্ক এরর হলে রিফ্রেশ করার চেষ্টা করুন
                                const isRefreshed = await refreshToken();
                                if (!isRefreshed) {
                                    handleAutoLogout();
                                }
                                return false;
                            }
                        } else {
                            // লগইন করা নেই, লগইন বাটন দেখান
                            if (loginButton) loginButton.style.display = 'block';
                            if (profileDropdown) profileDropdown.style.display = 'none';
                            
                            // ইন্টারভাল ক্লিয়ার করুন
                            if (tokenRefreshInterval) {
                                clearInterval(tokenRefreshInterval);
                                tokenRefreshInterval = null;
                            }
                            
                            return false;
                        }
                    }
                    
                    // সফল লগইনের পর টোকেন সেভ করার ফাংশন
                    function saveAuthToken(token, user) {
                        localStorage.setItem('authToken', token);
                        localStorage.setItem('currentUser', JSON.stringify(user));
                        
                        // অটো রিফ্রেশ সেটআপ করুন
                        setupTokenRefresh();
                        
                        // UI আপডেট করুন
                        checkLoginStatus();
                    }
                    
                    // ইউজার অ্যাক্টিভিটি ট্র্যাক করার জন্য
                    let userActivityTimer;
                    
                    // ইউজার অ্যাক্টিভিটি রিসেট করুন
                    function resetUserActivity() {
                        if (userActivityTimer) {
                            clearTimeout(userActivityTimer);
                        }
                        
                        // ৩০ মিনিট নিষ্ক্রিয় থাকলে সতর্কতা দিন
                        userActivityTimer = setTimeout(() => {
                            const token = localStorage.getItem('authToken');
                            if (token) {
                                showNotification('আপনি দীর্ঘক্ষণ নিষ্ক্রিয় রয়েছেন। অ্যাক্টিভ থাকার জন্য পেজে ক্লিক করুন।', 'error');
                            }
                        }, 30 * 60 * 1000); // ৩০ মিনিট
                    }
                    
                    // ইউজার অ্যাক্টিভিটি ইভেন্ট লিস্টেনার
                    function setupUserActivityTracking() {
                        const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart', 'click'];
                        
                        events.forEach(event => {
                            document.addEventListener(event, resetUserActivity, true);
                        });
                        
                        // প্রথম বার সেটআপ
                        resetUserActivity();
                    }
                    
                    // When the page loads - মূল ইনিশিয়ালাইজেশন
                    document.addEventListener('DOMContentLoaded', function() {
                        // Initialize the page
                        toggleForm('login');
                        
                        // Set up OTP input fields for automatic focus
                        const otpInputs = document.querySelectorAll('.otp-digit');
                        
                        for (let i = 0; i < otpInputs.length; i++) {
                            otpInputs[i].addEventListener('input', function() {
                                if (this.value.length === 1) {
                                    if (i < otpInputs.length - 1) {
                                        otpInputs[i + 1].focus();
                                    }
                                }
                            });
                            
                            otpInputs[i].addEventListener('keydown', function(e) {
                                if (e.key === 'Backspace' && this.value.length === 0) {
                                    if (i > 0) {
                                        otpInputs[i - 1].focus();
                                    }
                                }
                            });
                        }
                        
                        // Set up event listeners for password toggle buttons
                        const passwordToggleButtons = document.querySelectorAll('.toggle-password');
                        passwordToggleButtons.forEach(button => {
                            button.addEventListener('click', function() {
                                const inputId = this.getAttribute('data-target');
                                const toggleId = this.id;
                                togglePasswordVisibility(inputId, toggleId);
                            });
                        });
                        
                        // Set up navigation buttons
                        const goToEmailCheck = document.getElementById('goToEmailCheck');
                        if (goToEmailCheck) {
                            goToEmailCheck.addEventListener('click', function() {
                                toggleForm('emailCheck');
                            });
                        }
                        
                        const goToLogin = document.getElementById('goToLogin');
                        if (goToLogin) {
                            goToLogin.addEventListener('click', function() {
                                toggleForm('login');
                            });
                        }
                        
                        // Set up modal close button
                        const closeModalBtn = document.getElementById('closeModal');
                        if (closeModalBtn) {
                            closeModalBtn.addEventListener('click', closeModal);
                        }
                        
                        // লগইন পপআপ এবং ব্লার এফেক্ট
                        const loginButton = document.querySelector('.login-button');
                        const loginPopup = document.querySelector('.login-popup');
                        const blurOverlay = document.querySelector('.blur-overlay');
                        const closeLogin = document.querySelector('.close-login');
                        
                        // লগইন বাটনে ক্লিক করলে
                        if (loginButton) {
                            loginButton.addEventListener('click', function(e) {
                                e.preventDefault();
                                loginPopup.classList.add('active');
                                blurOverlay.classList.add('active');
                                document.body.style.overflow = 'hidden'; // স্ক্রল বন্ধ করুন
                            });
                        }
                        
                        // ক্লোজ বাটনে ক্লিক করলে
                        if (closeLogin) {
                            closeLogin.addEventListener('click', function() {
                                loginPopup.classList.remove('active');
                                blurOverlay.classList.remove('active');
                                document.body.style.overflow = ''; // স্ক্রল চালু করুন
                            });
                        }
                        
                        // ব্লার ওভারলেতে ক্লিক করলে
                        if (blurOverlay) {
                            blurOverlay.addEventListener('click', function() {
                                loginPopup.classList.remove('active');
                                blurOverlay.classList.remove('active');
                                document.body.style.overflow = ''; // স্ক্রল চালু করুন
                            });
                        }
                        
                        // প্রোফাইল ড্রপডাউন হোভার সেটআপ (ক্লিক ইভেন্ট রিমুভ করা হয়েছে)
                        // CSS হোভার ইফেক্ট ব্যবহার করার জন্য JavaScript ক্লিক ইভেন্ট রিমুভ করুন
                        // এখন শুধুমাত্র CSS :hover সিলেক্টর কাজ করবে
                        
                        // লগআউট বাটন সেটআপ
                        const logoutButton = document.getElementById('logoutButton');
                        if (logoutButton) {
                            logoutButton.addEventListener('click', async function(e) {
                                e.preventDefault();
                                
                                try {
                                    const token = localStorage.getItem('authToken');
                                    
                                    if (token) {
                                        // লগআউট API কল
                                        const response = await fetch(`${DB_API_URL}/logout`, {
                                            method: 'POST',
                                            headers: {
                                                'Content-Type': 'application/json',
                                                'Authorization': `Bearer ${token}`
                                            }
                                        });
                                        
                                        const data = await response.json();
                                        
                                        if (data.success) {
                                            // সফল লগআউট
                                            showNotification(data.message || 'আপনি সফলভাবে লগআউট করেছেন।', 'success');
                                        } else {
                                            showNotification(data.message || 'লগআউট করতে সমস্যা হয়েছে।', 'error');
                                        }
                                    }
                                } catch (error) {
                                    console.error('Logout error:', error);
                                } finally {
                                    // সেশন স্টোরেজ থেকে উসার ডেটা মুছুন
                                    localStorage.removeItem('authToken');
                                    localStorage.removeItem('currentUser');
                                    
                                    // ইন্টারভাল ক্লিয়ার করুন
                                    if (tokenRefreshInterval) {
                                        clearInterval(tokenRefreshInterval);
                                        tokenRefreshInterval = null;
                                    }
                                    
                                    // অ্যাক্টিভিটি ট্র্যাকিং বন্ধ করুন
                                    if (userActivityTimer) {
                                        clearTimeout(userActivityTimer);
                                    }
                                    
                                    // লগইন স্টেটাস আপডেট করুন
                                    checkLoginStatus();
                                }
                            });
                        }
                        
                        // পেজ লোড হওয়ার সময় লগইন স্টেটাস চেক করুন
                        checkLoginStatus();
                        
                        // ইউজার অ্যাক্টিভিটি ট্র্যাকিং সেটআপ করুন
                        setupUserActivityTracking();
                        
                        // পেজ বন্ধ হওয়ার আগে ক্লিনআপ
                        window.addEventListener('beforeunload', function() {
                            if (tokenRefreshInterval) {
                                clearInterval(tokenRefreshInterval);
                            }
                            if (userActivityTimer) {
                                clearTimeout(userActivityTimer);
                            }
                        });
                        
                        // ভিজিবিলিটি চেঞ্জ হ্যান্ডলার
                        document.addEventListener('visibilitychange', function() {
                            if (!document.hidden) {
                                // পেজ ভিজিবল হলে লগইন স্টেটাস চেক করুন
                                checkLoginStatus();
                            }
                        });
                    });
                    
</script>  -->


  

<script>
    // API URL - সার্ভার URL
    const API_URL = 'https://talimul-islam.onrender.com';
    const DB_API_URL = 'https://t-i-a-storage-backend.onrender.com';  // MongoDB backend URL
                        
    let currentEmail = '';
    let otpTimer;
    let tokenRefreshInterval;



    // অপ্টিমাইজড Timeout - ৫ সেকেন্ড করা হয়েছে ১০ সেকেন্ডের পরিবর্তে
const fetchWithTimeout = async (url, options, timeout = 5000) => {
const controller = new AbortController();
const timeoutId = setTimeout(() => controller.abort(), timeout);

try {
const response = await fetch(url, {
    ...options,
    signal: controller.signal
});
clearTimeout(timeoutId);
return response;
} catch (error) {
clearTimeout(timeoutId);
if (error.name === 'AbortError') {
    throw new Error('রিকোয়েস্ট টাইমআউট হয়েছে');
}
throw error;
}
};
    


    // সাধারণ ফাংশন
    // Toggle between forms
    function toggleForm(formType) {
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('emailCheckSection').style.display = 'none';
        document.getElementById('otpVerificationSection').style.display = 'none';
        document.getElementById('signupSection').style.display = 'none';
        
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('emailCheckForm').style.display = 'none';
        document.getElementById('otpVerificationForm').style.display = 'none';
        document.getElementById('signupForm').style.display = 'none';
        
        if (formType === 'login') {
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('loginForm').style.display = 'block';
        } else if (formType === 'emailCheck') {
            document.getElementById('emailCheckSection').style.display = 'block';
            document.getElementById('emailCheckForm').style.display = 'block';
        } else if (formType === 'otpVerification') {
            document.getElementById('otpVerificationSection').style.display = 'block';
            document.getElementById('otpVerificationForm').style.display = 'block';
        } else if (formType === 'signup') {
            document.getElementById('signupSection').style.display = 'block';
            document.getElementById('signupForm').style.display = 'block';
        }
    }
    
    // Toggle password visibility
    function togglePasswordVisibility(inputId, toggleId) {
        const passwordInput = document.getElementById(inputId);
        const toggleButton = document.getElementById(toggleId);
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            toggleButton.textContent = 'লুকান';
        } else {
            passwordInput.type = 'password';
            toggleButton.textContent = 'দেখুন';
        }
    }
    
    // Start OTP timer
    function startOTPTimer() {
        let totalSeconds = 120; // 2 minutes
        
        clearInterval(otpTimer);
        document.getElementById('resendOtp').disabled = true;
        
        // Update timer display immediately
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        document.getElementById('timer').textContent = 
            (minutes < 10 ? '0' + minutes : minutes) + ':' + 
            (seconds < 10 ? '0' + seconds : seconds);
        
        otpTimer = setInterval(function() {
            totalSeconds--;
            
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            
            document.getElementById('timer').textContent = 
                (minutes < 10 ? '0' + minutes : minutes) + ':' + 
                (seconds < 10 ? '0' + seconds : seconds);
            
            if (totalSeconds <= 0) {
                clearInterval(otpTimer);
                document.getElementById('resendOtp').disabled = false;
            }
        }, 1000);
    }
    
    // লোডিং ফাংশন
    // লোডিং স্পিনার তৈরি করুন
    function createLoader() {
        const loader = document.createElement('div');
        loader.className = 'loader';
        loader.id = 'pageLoader';
        
        const spinner = document.createElement('div');
        spinner.className = 'spinner';
        
        loader.appendChild(spinner);
        document.body.appendChild(loader);
    }
    
    // লোডিং দেখানোর ফাংশন
    function showLoading() {
        if (!document.getElementById('pageLoader')) {
            createLoader();
        }
        document.getElementById('pageLoader').style.display = 'flex';
        // document.body.style.cursor = 'wait';
    }
    
    // লোডিং বন্ধ করার ফাংশন
    function hideLoading() {
        const loader = document.getElementById('pageLoader');
        if (loader) {
            loader.style.display = 'none';
        }
        // document.body.style.cursor = 'default';
    }
    
    // Show error with specified message
    function showError(elementId, message) {
        const errorElement = document.getElementById(elementId);
        errorElement.textContent = message;
        errorElement.classList.add('show-error');
    }
    
    // Hide error
    function hideError(elementId) {
        document.getElementById(elementId).classList.remove('show-error');
    }
    
    // Email validation function
    function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }
    
    // নোটিফিকেশন পপআপ ফাংশন - alert এর পরিবর্তে
    function showNotification(message, type = 'success') {
        // পূর্বের নোটিফিকেশন রিমুভ করুন
        const existingNotification = document.getElementById('customNotification');
        if (existingNotification) {
            existingNotification.remove();
        }
        
        // নতুন নোটিফিকেশন তৈরি করুন
        const notification = document.createElement('div');
        notification.id = 'customNotification';
        notification.className = `custom-notification ${type}`;
        
        // নোটিফিকেশন কনটেন্ট
        notification.innerHTML = `
            <div class="notification-content">
                <span class="notification-message">${message}</span>
                <span class="notification-close">&times;</span>
            </div>
        `;
        
        // নোটিফিকেশন স্টাইল
        notification.style.position = 'fixed';
        notification.style.top = '20px';
        notification.style.right = '20px';
        notification.style.backgroundColor = type === 'success' ? '#4CAF50' : '#f44336';
        notification.style.color = 'white';
        notification.style.padding = '15px';
        notification.style.borderRadius = '5px';
        notification.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
        notification.style.zIndex = '9999';
        notification.style.transition = 'all 0.3s ease';
        notification.style.opacity = '0';
        
        // বডিতে অ্যাড করুন
        document.body.appendChild(notification);
        
        // ফেড ইন এফেক্ট
        setTimeout(() => {
            notification.style.opacity = '1';
        }, 10);
        
        // ক্লোজ বাটন ফাংশনালিটি
        const closeButton = notification.querySelector('.notification-close');
        closeButton.style.marginLeft = '15px';
        closeButton.style.cursor = 'pointer';
        closeButton.style.fontWeight = 'bold';
        
        closeButton.addEventListener('click', function() {
            notification.style.opacity = '0';
            setTimeout(() => {
                notification.remove();
            }, 300);
        });
        
        // অটো ক্লোজ
        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => {
                notification.remove();
            }, 300);
        }, 5000);
    }
    
    // মডাল ফাংশন
    // Open modal
    function openModal() {
        document.getElementById('successModal').style.display = 'flex';
    }
    
    // Close modal
    function closeModal() {
        document.getElementById('successModal').style.display = 'none';
        toggleForm('login');
    }
    
    // অপ্টিমাইজড টোকেন রিফ্রেশ ফাংশন - দ্রুত টাইমআউট এবং ক্যাশিং
    async function refreshToken() {
        try {
            const token = localStorage.getItem('authToken');
            if (!token) return false;
            
            // দ্রুত টাইমআউট (৩ সেকেন্ড) লগইন/রেজিস্ট্রেশনের জন্য
            const response = await fetchWithTimeout(`${DB_API_URL}/refresh-token`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                }
            }, 3000);
            
            const data = await response.json();
            
            if (data.success && data.token) {
                // নতুন টোকেন সেভ করুন
                localStorage.setItem('authToken', data.token);
                if (data.user) {
                    localStorage.setItem('currentUser', JSON.stringify(data.user));
                }
                return true;
            } else {
                return false;
            }
        } catch (error) {
            console.error('Token refresh error:', error);
            return false;
        }
    }
    
    // অপ্টিমাইজড অটো টোকেন রিফ্রেশ সেটআপ - ইন্টারভাল বৃদ্ধি করা হয়েছে
    function setupTokenRefresh() {
        // প্রতি ১৫ মিনিটে টোকেন রিফ্রেশ করুন (১০ মিনিটের পরিবর্তে)
        tokenRefreshInterval = setInterval(async () => {
            const isRefreshed = await refreshToken();
            if (!isRefreshed) {
                // রিফ্রেশ ফেইল হলে লগআউট করুন
                handleAutoLogout();
            }
        }, 15 * 60 * 1000); // ১৫ মিনিট
    }
    
    // অটো লগআউট হ্যান্ডলার
    function handleAutoLogout() {
        // সেশন ক্লিয়ার করুন
        localStorage.removeItem('authToken');
        localStorage.removeItem('currentUser');
        
        // ইন্টারভাল ক্লিয়ার করুন
        if (tokenRefreshInterval) {
            clearInterval(tokenRefreshInterval);
        }
        
        // UI আপডেট করুন
        checkLoginStatus();
        
        // ইউজারকে জানান
        showNotification('আপনার সেশন শেষ হয়ে গেছে। আবার লগইন করুন।', 'error');
    }
    
    // অপ্টিমাইজড লগইন স্টেটাস চেক - কম API কল এবং ক্যাশিং
    async function checkLoginStatus() {
        // localStorage থেকে টোকেন পড়ুন
        const token = localStorage.getItem('authToken');
        
        const loginButton = document.getElementById('loginButton');
        const profileDropdown = document.getElementById('profileDropdown');
        
        if (token) {
            try {
                // দ্রুত টাইমআউট (২ সেকেন্ড)
                const response = await fetchWithTimeout(`${DB_API_URL}/validate-token`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    }
                }, 2000);
                
                const data = await response.json();
                
                if (data.valid) {
                    // লগইন করা আছে, প্রোফাইল আইকন দেখান
                    if (loginButton) loginButton.style.display = 'none';
                    if (profileDropdown) profileDropdown.style.display = 'block';
                    
                    // যদি ইউজার ডাটা থাকে তাহলে সেট করুন
                    if (data.user) {
                        localStorage.setItem('currentUser', JSON.stringify(data.user));
                    }
                    
                    // অটো রিফ্রেশ সেটআপ করুন (যদি এখনো না করা হয়ে থাকে)
                    if (!tokenRefreshInterval) {
                        setupTokenRefresh();
                    }
                    
                    return true;
                } else {
                    // টোকেন ভ্যালিড নয়, সরাসরি লগআউট (রিফ্রেশের চেষ্টা না করে)
                    handleAutoLogout();
                    return false;
                }
            } catch (error) {
                console.error('Error validating token:', error);
                // নেটওয়ার্ক এরর হলে সরাসরি লগআউট
                handleAutoLogout();
                return false;
            }
        } else {
            // লগইন করা নেই, লগইন বাটন দেখান
            if (loginButton) loginButton.style.display = 'block';
            if (profileDropdown) profileDropdown.style.display = 'none';
            
            // ইন্টারভাল ক্লিয়ার করুন
            if (tokenRefreshInterval) {
                clearInterval(tokenRefreshInterval);
                tokenRefreshInterval = null;
            }
            
            return false;
        }
    }
    
    // সফল লগইনের পর টোকেন সেভ করার ফাংশন
    function saveAuthToken(token, user) {
        localStorage.setItem('authToken', token);
        localStorage.setItem('currentUser', JSON.stringify(user));
        
        // অটো রিফ্রেশ সেটআপ করুন
        setupTokenRefresh();
        
        // UI আপডেট করুন - অ্যাসিঙ্ক না করে সরাসরি
        const loginButton = document.getElementById('loginButton');
        const profileDropdown = document.getElementById('profileDropdown');
        
        if (loginButton) loginButton.style.display = 'none';
        if (profileDropdown) profileDropdown.style.display = 'block';
    }
    
    // অপ্টিমাইজড ইউজার অ্যাক্টিভিটি ট্র্যাকিং - সময় বৃদ্ধি
    let userActivityTimer;
    
    // ইউজার অ্যাক্টিভিটি রিসেট করুন
    function resetUserActivity() {
        if (userActivityTimer) {
            clearTimeout(userActivityTimer);
        }
        
        // ৪৫ মিনিট নিষ্ক্রিয় থাকলে সতর্কতা দিন (৩০ মিনিটের পরিবর্তে)
        userActivityTimer = setTimeout(() => {
            const token = localStorage.getItem('authToken');
            if (token) {
                showNotification('আপনি দীর্ঘক্ষণ নিষ্ক্রিয় রয়েছেন। অ্যাক্টিভ থাকার জন্য পেজে ক্লিক করুন।', 'error');
            }
        }, 45 * 60 * 1000); // ৪৫ মিনিট
    }
    
    // ইউজার অ্যাক্টিভিটি ইভেন্ট লিস্টেনার
    function setupUserActivityTracking() {
        const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart', 'click'];
        
        events.forEach(event => {
            document.addEventListener(event, resetUserActivity, true);
        });
        
        // প্রথম বার সেটআপ
        resetUserActivity();
    }
    
    // When the page loads - মূল ইনিশিয়ালাইজেশন
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize the page
        toggleForm('login');
        
        // Set up OTP input fields for automatic focus
        const otpInputs = document.querySelectorAll('.otp-digit');
        
        for (let i = 0; i < otpInputs.length; i++) {
            otpInputs[i].addEventListener('input', function() {
                if (this.value.length === 1) {
                    if (i < otpInputs.length - 1) {
                        otpInputs[i + 1].focus();
                    }
                }
            });
            
            otpInputs[i].addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && this.value.length === 0) {
                    if (i > 0) {
                        otpInputs[i - 1].focus();
                    }
                }
            });
        }
        
        // Set up event listeners for password toggle buttons
        const passwordToggleButtons = document.querySelectorAll('.toggle-password');
        passwordToggleButtons.forEach(button => {
            button.addEventListener('click', function() {
                const inputId = this.getAttribute('data-target');
                const toggleId = this.id;
                togglePasswordVisibility(inputId, toggleId);
            });
        });
        
        // Set up navigation buttons
        const goToEmailCheck = document.getElementById('goToEmailCheck');
        if (goToEmailCheck) {
            goToEmailCheck.addEventListener('click', function() {
                toggleForm('emailCheck');
            });
        }
        
        const goToLogin = document.getElementById('goToLogin');
        if (goToLogin) {
            goToLogin.addEventListener('click', function() {
                toggleForm('login');
            });
        }
        
        // Set up modal close button
        const closeModalBtn = document.getElementById('closeModal');
        if (closeModalBtn) {
            closeModalBtn.addEventListener('click', closeModal);
        }
        
        // লগইন পপআপ এবং ব্লার এফেক্ট
        const loginButton = document.querySelector('.login-button');
        const loginPopup = document.querySelector('.login-popup');
        const blurOverlay = document.querySelector('.blur-overlay');
        const closeLogin = document.querySelector('.close-login');
        
        // লগইন বাটনে ক্লিক করলে
        if (loginButton) {
            loginButton.addEventListener('click', function(e) {
                e.preventDefault();
                loginPopup.classList.add('active');
                blurOverlay.classList.add('active');
                document.body.style.overflow = 'hidden'; // স্ক্রল বন্ধ করুন
            });
        }
        
        // ক্লোজ বাটনে ক্লিক করলে
        if (closeLogin) {
            closeLogin.addEventListener('click', function() {
                loginPopup.classList.remove('active');
                blurOverlay.classList.remove('active');
                document.body.style.overflow = ''; // স্ক্রল চালু করুন
            });
        }
        
        // ব্লার ওভারলেতে ক্লিক করলে
        if (blurOverlay) {
            blurOverlay.addEventListener('click', function() {
                loginPopup.classList.remove('active');
                blurOverlay.classList.remove('active');
                document.body.style.overflow = ''; // স্ক্রল চালু করুন
            });
        }
        
        // প্রোফাইল ড্রপডাউন হোভার সেটআপ (ক্লিক ইভেন্ট রিমুভ করা হয়েছে)
        // CSS হোভার ইফেক্ট ব্যবহার করার জন্য JavaScript ক্লিক ইভেন্ট রিমুভ করুন
        // এখন শুধুমাত্র CSS :hover সিলেক্টর কাজ করবে
        
        // লগআউট বাটন সেটআপ
        const logoutButton = document.getElementById('logoutButton');
        if (logoutButton) {
            logoutButton.addEventListener('click', async function(e) {
                e.preventDefault();
                
                try {
                    const token = localStorage.getItem('authToken');
                    
                    if (token) {
                        // দ্রুত লগআউট API কল (৩ সেকেন্ড টাইমআউট)
                        const response = await fetchWithTimeout(`${DB_API_URL}/logout`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${token}`
                            }
                        }, 3000);
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            // সফল লগআউট
                            showNotification(data.message || 'আপনি সফলভাবে লগআউট করেছেন।', 'success');
                        } else {
                            showNotification(data.message || 'লগআউট করতে সমস্যা হয়েছে।', 'error');
                        }
                    }
                } catch (error) {
                    console.error('Logout error:', error);
                } finally {
                    // সেশন স্টোরেজ থেকে উসার ডেটা মুছুন
                    localStorage.removeItem('authToken');
                    localStorage.removeItem('currentUser');
                    
                    // ইন্টারভাল ক্লিয়ার করুন
                    if (tokenRefreshInterval) {
                        clearInterval(tokenRefreshInterval);
                        tokenRefreshInterval = null;
                    }
                    
                    // অ্যাক্টিভিটি ট্র্যাকিং বন্ধ করুন
                    if (userActivityTimer) {
                        clearTimeout(userActivityTimer);
                    }
                    
                    // UI আপডেট করুন - দ্রুত
                    const loginButton = document.getElementById('loginButton');
                    const profileDropdown = document.getElementById('profileDropdown');
                    
                    if (loginButton) loginButton.style.display = 'block';
                    if (profileDropdown) profileDropdown.style.display = 'none';
                }
            });
        }
        
        // পেজ লোড হওয়ার সময় দেরি করে লগইন স্টেটাস চেক করুন (ব্যাকগ্রাউন্ডে)
        setTimeout(() => {
            checkLoginStatus();
        }, 1000);
        
        // ইউজার অ্যাক্টিভিটি ট্র্যাকিং সেটআপ করুন
        setupUserActivityTracking();
        
        // পেজ বন্ধ হওয়ার আগে ক্লিনআপ
        window.addEventListener('beforeunload', function() {
            if (tokenRefreshInterval) {
                clearInterval(tokenRefreshInterval);
            }
            if (userActivityTimer) {
                clearTimeout(userActivityTimer);
            }
        });
        
        // ভিজিবিলিটি চেঞ্জ হ্যান্ডলার - দেরি যোগ করা হয়েছে
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                // পেজ ভিজিবল হলে ৫০০ms পরে লগইন স্টেটাস চেক করুন
                setTimeout(() => {
                    checkLoginStatus();
                }, 500);
            }
        });
    });

    
    
</script> 
<!-- <script>
    // Handle Email Check form submission
    document.addEventListener('DOMContentLoaded', function() {
       const emailCheckForm = document.getElementById('emailCheckForm');
       if (emailCheckForm) {
           emailCheckForm.addEventListener('submit', async function(e) {
               e.preventDefault();
               
               // Reset error messages
               document.querySelectorAll('.error-message').forEach(el => {
                   el.classList.remove('show-error');
               });
               
               const email = document.getElementById('checkEmail').value;
               let isValid = true;
               
               // Email validation
               if (!email || !validateEmail(email)) {
                   showError('checkEmailError', 'অনুগ্রহ করে একটি বৈধ ইমেইল লিখুন');
                   isValid = false;
               }
               
               if (isValid) {
                   try {
                       showLoading();
                       
                       // API কল - ইমেইল চেক করুন
                       const checkResponse = await fetch(`${DB_API_URL}/check-email`, {
                           method: 'POST',
                           headers: {
                               'Content-Type': 'application/json',
                           },
                           body: JSON.stringify({ email: email }),
                       });
                       
                       const checkData = await checkResponse.json();
                       
                       if (checkData.exists) {
                           showError('checkEmailError', 'এই ইমেইল দিয়ে ইতিমধ্যে একটি একাউন্ট আছে');
                           hideLoading();
                           return;
                       }
                       
                       // Store the email for later use
                       currentEmail = email;
                       document.getElementById('userEmail').textContent = email;
                       
                       // API কল - সার্ভারে OTP পাঠানোর অনুরোধ
                       const response = await fetch(`${API_URL}/api/send-otp`, {
                           method: 'POST',
                           headers: {
                               'Content-Type': 'application/json',
                           },
                           body: JSON.stringify({ email: email }),
                       });
                       
                       const data = await response.json();
                       
                       if (!data.success) {
                           throw new Error(data.message || 'OTP পাঠাতে ত্রুটি হয়েছে');
                       }
                       
                       // Clear OTP input fields
                       document.querySelectorAll('.otp-digit').forEach(input => {
                           input.value = '';
                       });
                       
                       // Start timer
                       startOTPTimer();
                       
                       // Show OTP verification form
                       toggleForm('otpVerification');
                       
                   } catch (error) {
                       console.error('Error:', error);
                       showNotification(error.message || 'OTP পাঠাতে ত্রুটি হয়েছে। পরে আবার চেষ্টা করুন।', 'error');
                   } finally {
                       hideLoading();
                   }
               }
           });
       }
   });
   
   // Handle Resend OTP button
   document.addEventListener('DOMContentLoaded', function() {
       const resendOtpButton = document.getElementById('resendOtp');
       if (resendOtpButton) {
           resendOtpButton.addEventListener('click', async function() {
               if (this.disabled) return;
               
               try {
                   showLoading();
                   this.disabled = true;
                   
                   // API কল - পুনরায় OTP পাঠানোর অনুরোধ
                   const response = await fetch(`${API_URL}/api/send-otp`, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                       },
                       body: JSON.stringify({ email: currentEmail }),
                   });
                   
                   const data = await response.json();
                   
                   if (!data.success) {
                       throw new Error(data.message || 'OTP পাঠাতে ত্রুটি হয়েছে');
                   }
                   
                   // Clear OTP input fields
                   document.querySelectorAll('.otp-digit').forEach(input => {
                       input.value = '';
                   });
                   
                   // Restart timer
                   startOTPTimer();
                   
                   // Show message
                   showNotification('নতুন অটিপি পাঠানো হয়েছে। অনুগ্রহ করে আপনার ইমেইল চেক করুন।', 'success');
                   
               } catch (error) {
                   console.error('Error:', error);
                   showNotification(error.message || 'OTP পাঠাতে ত্রুটি হয়েছে। পরে আবার চেষ্টা করুন।', 'error');
                   this.disabled = false;
               } finally {
                   hideLoading();
               }
           });
       }
   });
   
   // Handle OTP Verification form submission
   document.addEventListener('DOMContentLoaded', function() {
       const otpVerificationForm = document.getElementById('otpVerificationForm');
       if (otpVerificationForm) {
           otpVerificationForm.addEventListener('submit', async function(e) {
               e.preventDefault();
               
               // Reset error messages
               hideError('otpError');
               
               // Get entered OTP
               const enteredOTP = 
                   document.getElementById('otp1').value +
                   document.getElementById('otp2').value +
                   document.getElementById('otp3').value +
                   document.getElementById('otp4').value;
               
               // Validate OTP
               if (enteredOTP.length !== 4) {
                   showError('otpError', 'অনুগ্রহ করে সম্পূর্ণ অটিপি দিন');
                   return;
               }
               
               try {
                   showLoading();
                   
                   // API কল - OTP যাচাই করার অনুরোধ
                   const response = await fetch(`${API_URL}/api/verify-otp`, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                       },
                       body: JSON.stringify({ 
                           email: currentEmail,
                           otp: enteredOTP
                       }),
                   });
                   
                   const data = await response.json();
                   
                   if (!data.success) {
                       // Show error message
                       showError('otpError', data.message || 'অবৈধ OTP');
                       return;
                   }
                   
                   // OTP is valid, proceed to final registration step
                   clearInterval(otpTimer);
                   toggleForm('signup');
                   
               } catch (error) {
                   console.error('Error:', error);
                   showError('otpError', error.message || 'OTP যাচাই করতে ত্রুটি হয়েছে।');
               } finally {
                   hideLoading();
               }
           });
       }
   });
   
   // Handle Registration form submission
   document.addEventListener('DOMContentLoaded', function() {
       const signupForm = document.getElementById('signupForm');
       if (signupForm) {
           signupForm.addEventListener('submit', async function(e) {
               e.preventDefault();
               
               // Reset error messages
               document.querySelectorAll('.error-message').forEach(el => {
                   el.classList.remove('show-error');
               });
               
               const name = document.getElementById('signupName').value.trim();
               const password = document.getElementById('signupPassword').value;
               const confirmPassword = document.getElementById('signupConfirmPassword').value;
               
               let isValid = true;
               
               // Validation
               if (!name) {
                   showError('signupNameError', 'নাম আবশ্যক');
                   isValid = false;
               }
               
               if (!password || password.length < 6) {
                   showError('signupPasswordError', 'পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে');
                   isValid = false;
               }
               
               if (password !== confirmPassword) {
                   showError('signupConfirmPasswordError', 'পাসওয়ার্ড মিলছে না');
                   isValid = false;
               }
               
               if (!isValid) return;
               
               try {
                   showLoading();
                   
                   // নতুন ইউজার তৈরির জন্য API কল
                   const response = await fetch(`${DB_API_URL}/register`, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                       },
                       body: JSON.stringify({
                           name: name,
                           email: currentEmail,
                           password: password
                       }),
                   });
                   
                   const data = await response.json();
                   
                   if (!data.success) {
                       throw new Error(data.message || 'রেজিস্ট্রেশন সম্পন্ন করতে ত্রুটি হয়েছে');
                   }
                   
                   console.log('User registered:', data.user); // For demo purposes
                   
                   // Show success modal
                   openModal();
                   
                   // Clear form fields
                   document.getElementById('signupForm').reset();
                   
               } catch (error) {
                   console.error('Registration error:', error);
                   showNotification(error.message || 'রেজিস্ট্রেশন সম্পন্ন করতে ত্রুটি হয়েছে। পরে আবার চেষ্টা করুন।', 'error');
               } finally {
                   hideLoading();
               }
           });
       }
   });
   
   // Handle Login form submission
   document.addEventListener('DOMContentLoaded', function() {
       const loginForm = document.getElementById('loginForm');
       if (loginForm) {
           loginForm.addEventListener('submit', async function(e) {
               e.preventDefault();
               
               // Reset error messages
               document.querySelectorAll('.error-message').forEach(el => {
                   el.classList.remove('show-error');
               });
               
               const email = document.getElementById('loginEmail').value;
               const password = document.getElementById('loginPassword').value;
               let isValid = true;
               
               // Email validation
               if (!email || !validateEmail(email)) {
                   showError('loginEmailError', 'অনুগ্রহ করে একটি বৈধ ইমেইল লিখুন');
                   isValid = false;
               }
               
               // Password validation
               if (!password) {
                   showError('loginPasswordError', 'পাসওয়ার্ড আবশ্যক');
                   isValid = false;
               }
               
               if (isValid) {
                   try {
                       showLoading();
                       
                       // লগইন API কল
                       const response = await fetch(`${DB_API_URL}/login`, {
                           method: 'POST',
                           headers: {
                               'Content-Type': 'application/json',
                           },
                           body: JSON.stringify({
                               email: email,
                               password: password
                           }),
                       });
                       
                       const data = await response.json();
                       
                       if (!data.success) {
                           throw new Error(data.message || 'লগইন করতে ত্রুটি হয়েছে');
                       }
                       
                       // সেশন স্টোরেজে টোকেন এবং ইউজার ডেটা সংরক্ষণ করুন
                       sessionStorage.setItem('authToken', data.token);
                       sessionStorage.setItem('currentUser', JSON.stringify(data.user));
                       
                       // লগইন টাইম স্টোর করুন
                       sessionStorage.setItem('loginTime', Date.now().toString());
                       
                       // লগইন পপআপ বন্ধ করুন
                       const loginPopup = document.querySelector('.login-popup');
                       const blurOverlay = document.querySelector('.blur-overlay');
                       
                       if (loginPopup) loginPopup.classList.remove('active');
                       if (blurOverlay) blurOverlay.classList.remove('active');
                       document.body.style.overflow = '';
                       
                       // লগইন স্টেটাস আপডেট করুন
                       checkLoginStatus();
                       
                       showNotification('সফলভাবে লগইন করা হয়েছে! স্বাগতম ' + data.user.name, 'success');
                       
                   } catch (error) {
                       console.error('Login error:', error);
                       showNotification(error.message || 'ভুল ইমেইল বা পাসওয়ার্ড। অনুগ্রহ করে আবার চেষ্টা করুন।', 'error');
                   } finally {
                       hideLoading();
                   }
               }
           });
       }
   });
   
   // জেনারেল লগইন পপআপ ফাংশনালিটি
   document.addEventListener('DOMContentLoaded', function() {
       const loginForm = document.getElementById('login-form');
       if (loginForm) {
           loginForm.addEventListener('submit', function(e) {
               e.preventDefault();
               // লগইন লজিক এখানে লিখুন
               showNotification('লগইন সম্পন্ন হয়েছে!', 'success');
               
               const loginPopup = document.querySelector('.login-popup');
               const blurOverlay = document.querySelector('.blur-overlay');
               
               if (loginPopup) loginPopup.classList.remove('active');
               if (blurOverlay) blurOverlay.classList.remove('active');
               document.body.style.overflow = '';
           });
       }
   });

   // CSS for custom notification
   document.addEventListener('DOMContentLoaded', function() {
       const style = document.createElement('style');
       style.textContent = `
           .custom-notification {
               position: fixed;
               top: 20px;
               right: 20px;
               padding: 15px;
               border-radius: 5px;
               box-shadow: 0 2px 10px rgba(0,0,0,0.2);
               z-index: 9999;
               opacity: 0;
               transition: all 0.3s ease;
           }
           
           .custom-notification.success {
               background-color: #4CAF50;
               color: white;
           }
           
           .custom-notification.error {
               background-color: #f44336;
               color: white;
           }
           
           .notification-content {
               display: flex;
               align-items: center;
               justify-content: space-between;
           }
           
           .notification-close {
               margin-left: 15px;
               cursor: pointer;
               font-weight: bold;
           }
           
           .loader {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               background-color: rgba(255, 255, 255, 0.7);
               display: flex;
               justify-content: center;
               align-items: center;
               z-index: 9999;
           }
           
           .spinner {
               width: 40px;
               height: 40px;
               border: 4px solid #f3f3f3;
               border-top: 4px solid #3498db;
               border-radius: 50%;
               animation: spin 1s linear infinite;
           }
           
           @keyframes spin {
               0% { transform: rotate(0deg); }
               100% { transform: rotate(360deg); }
           }
       `;
       document.head.appendChild(style);
   });

   // ডিবাগিং কোড যোগ করা - সব ফাংশনের সাথে লগ বার্তা দেখাবে
console.log('Profile Dropdown Script Loaded');

document.addEventListener('DOMContentLoaded', function() {
   console.log('DOM Content Loaded - Setting up profile dropdown');
   
   // সেশন স্টোরেজ চেক করুন
   const token = sessionStorage.getItem('authToken');
   console.log('Auth Token exists:', !!token);
   
   // আমাদের এলিমেন্টগুলি আছে কিনা চেক করুন
   const loginButton = document.getElementById('loginButton');
   const profileDropdown = document.getElementById('profileDropdown');
   const profileIcon = document.querySelector('.profile-icon');
   
   console.log('Login Button found:', !!loginButton);
   console.log('Profile Dropdown found:', !!profileDropdown);
   console.log('Profile Icon found:', !!profileIcon);
   
   // প্রোফাইল ড্রপডাউন স্টাইল যোগ করুন
   addProfileDropdownStyles();
   

   
   
   // লগইন স্টেটাস আপডেট করুন
   checkLoginStatus();
   
   // লগআউট বাটন ইভেন্ট
   const logoutButton = document.getElementById('logoutButton');
   if (logoutButton) {
       console.log('Adding click event to logout button');
       logoutButton.addEventListener('click', handleLogout);
   } else {
       console.error('Logout button not found in the DOM');
   }
});



// লগআউট হ্যান্ডেল করার ফাংশন
async function handleLogout(e) {
   e.preventDefault();
   console.log('Logout button clicked');
   
   try {
       const token = sessionStorage.getItem('authToken');
       
       if (token) {
           // লগআউট API কল
           console.log('Calling logout API');
           try {
               const response = await fetch(`${DB_API_URL}/logout`, {
                   method: 'POST',
                   headers: {
                       'Content-Type': 'application/json',
                       'Authorization': `Bearer ${token}`
                   }
               });
               
               const data = await response.json();
               
               if (data.success) {
                   console.log('Logout successful');
                   showNotification(data.message || 'আপনি সফলভাবে লগআউট করেছেন।', 'success');
               } else {
                   console.error('Logout API returned error:', data.message);
                   showNotification(data.message || 'লগআউট করতে সমস্যা হয়েছে।', 'error');
               }
           } catch (apiError) {
               console.error('Logout API call failed:', apiError);
               // এপিআই কল ব্যর্থ হলেও লগআউট করুন
               showNotification('লগআউট প্রক্রিয়া সম্পন্ন হয়েছে।', 'success');
           }
       } else {
           console.warn('No auth token found for logout');
       }
   } catch (error) {
       console.error('Logout error:', error);
   } finally {
       // সেশন স্টোরেজ থেকে উসার ডেটা মুছুন
       console.log('Removing user data from session storage');
       sessionStorage.removeItem('authToken');
       sessionStorage.removeItem('currentUser');
       sessionStorage.removeItem('loginTime');
       
       // লগইন স্টেটাস আপডেট করুন
       checkLoginStatus();
       
       // পেজ রিলোড করুন (অপশনাল)
       console.log('Reloading page');
       window.location.href = 'Talimul Islam Academi.html';
   }
}

// স্টাইল যোগ করার ফাংশন
function addProfileDropdownStyles() {
   console.log('Adding profile dropdown styles');
   
   // আগে থেকে স্টাইল এলিমেন্ট আছে কিনা চেক করুন
   if (document.getElementById('profileDropdownStyles')) {
       console.log('Styles already exist, skipping');
       return;
   }
   
   const style = document.createElement('style');
   style.id = 'profileDropdownStyles';
   style.textContent = `
       /* User Menu Container Styles */
       .user-menu-container {
           position: relative;
           display: inline-block;
       }
       
       /* Login Button Styles */
       .login-button {
           display: inline-block;
           padding: 8px 15px;
           background-color: #4CAF50;
           color: white;
           border-radius: 4px;
           text-decoration: none;
           font-weight: bold;
           transition: background-color 0.3s;
       }
       
       .login-button:hover {
           background-color: #45a049;
       }
       
       /* Profile Dropdown Styles */
       .profile-dropdown {
           display: none;
           position: relative;
       }
       
       .profile-icon {
           background: none;
           border: none;
           font-size: 24px;
           color: #333;
           cursor: pointer;
           padding: 5px;
       }
       
       /* Font Awesome Fallback */
       .profile-icon-text {
           display: none;
       }
       
       .no-fontawesome .profile-icon-text {
           display: inline;
           font-weight: bold;
       }
       
       .dropdown-menu1 {
           display: none;
           position: absolute;
           right: 0;
           background-color: white;
           min-width: 180px;
           box-shadow: 0 8px 16px rgba(0,0,0,0.1);
           z-index: 1000;
           border-radius: 4px;
           overflow: hidden;
       }
       
       .dropdown-item {
           display: block;
           padding: 10px 15px;
           text-decoration: none;
           color: #333;
           transition: background-color 0.2s;
       }
       
       .dropdown-item:hover {
           background-color: #f8f8f8;
       }
   `;
   document.head.appendChild(style);
   console.log('Styles added to document head');
}

// লগইন টাইম চেক করার ফাংশন
function isLoginExpired() {
   const loginTime = sessionStorage.getItem('loginTime');
   if (!loginTime) return true;
   
   const currentTime = Date.now();
   const loginTimestamp = parseInt(loginTime);
   const timeDiff = currentTime - loginTimestamp;
   
   // 24 ঘন্টা = 24 * 60 * 60 * 1000 = 86400000 মিলিসেকেন্ড
   const twentyFourHours = 24 * 60 * 60 * 1000;
   
   return timeDiff > twentyFourHours;
}

// চেক লগইন স্ট্যাটাস আপডেটেড ফাংশন (Fixed)
async function checkLoginStatus() {
   console.log('Checking login status');
   
   // সেশন স্টোরেজ থেকে টোকেন পড়ুন
   const token = sessionStorage.getItem('authToken');
   
   const loginButton = document.getElementById('loginButton');
   const profileDropdown = document.getElementById('profileDropdown');
   
   // Font Awesome লোড হয়েছে কিনা চেক করুন
   checkFontAwesome();
   
   if (!loginButton || !profileDropdown) {
       console.error('Login button or profile dropdown not found');
       console.log('loginButton:', loginButton);
       console.log('profileDropdown:', profileDropdown);
       return false;
   }
   
   if (token) {
       console.log('Auth token found, checking expiration...');
       
       // লগইন টাইম এক্সপায়ার হয়েছে কিনা চেক করুন
       if (isLoginExpired()) {
           console.log('Login expired, logging out');
           sessionStorage.removeItem('authToken');
           sessionStorage.removeItem('currentUser');
           sessionStorage.removeItem('loginTime');
           loginButton.style.display = 'block';
           profileDropdown.style.display = 'none';
           return false;
       }
       
       // লগইন করা আছে এবং এক্সপায়ার হয়নি, প্রোফাইল আইকন দেখান
       console.log('User is logged in and not expired, showing profile dropdown');
       loginButton.style.display = 'none';
       profileDropdown.style.display = 'block';
       return true;
   } else {
       // লগইন করা নেই, লগইন বাটন দেখান
       console.log('No auth token, showing login button');
       loginButton.style.display = 'block';
       profileDropdown.style.display = 'none';
       return false;
   }
}

// Font Awesome লোড হয়েছে কিনা চেক করুন
function checkFontAwesome() {
   console.log('Checking if Font Awesome is loaded');
   
   // Font Awesome লোড হয়েছে কিনা চেক করুন
   const isFontAwesomeLoaded = (function() {
       // Check if any Font Awesome classes are applied
       const span = document.createElement('span');
       span.className = 'fa';
       span.style.display = 'none';
       document.body.appendChild(span);
       const result = window.getComputedStyle(span).fontFamily.includes('Font');
       document.body.removeChild(span);
       return result;
   })();
   
   console.log('Font Awesome loaded:', isFontAwesomeLoaded);
   
   if (!isFontAwesomeLoaded) {
       console.log('Font Awesome not detected, adding fallback');
       // Font Awesome না থাকলে লিংক যোগ করুন
       const link = document.createElement('link');
       link.rel = 'stylesheet';
       link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
       document.head.appendChild(link);
       
       // ফলব্যাক ক্লাস যোগ করুন
       document.body.classList.add('no-fontawesome');
       

   }
}

// পেজ লোড এবং রিফ্রেশের সময় লগইন স্টেটাস চেক করুন
window.addEventListener('load', function() {
   console.log('Page loaded, checking login status');
   checkLoginStatus();
});

// পেজ ভিজিবল হলে লগইন স্টেটাস চেক করুন
document.addEventListener('visibilitychange', function() {
   if (!document.hidden) {
       console.log('Page became visible, checking login status');
       checkLoginStatus();
   }
});

// ইনিশিয়ালাইজ স্ক্রিপ্ট ইমিডিয়েটলি
console.log('Profile dropdown script initialized');
</script>  -->

<!-- টেষ্ট -->
<script>
    // Handle Email Check form submission
    document.addEventListener('DOMContentLoaded', function() {
       const emailCheckForm = document.getElementById('emailCheckForm');
       if (emailCheckForm) {
           emailCheckForm.addEventListener('submit', async function(e) {
               e.preventDefault();
               
               // Reset error messages
               document.querySelectorAll('.error-message').forEach(el => {
                   el.classList.remove('show-error');
               });
               
               const email = document.getElementById('checkEmail').value;
               let isValid = true;
               
               // Email validation
               if (!email || !validateEmail(email)) {
                   showError('checkEmailError', 'অনুগ্রহ করে একটি বৈধ ইমেইল লিখুন');
                   isValid = false;
               }
               
               if (isValid) {
                   try {
                       showLoading();
                       
                       // API কল - ইমেইল চেক করুন
                       const checkResponse = await fetch(`${DB_API_URL}/check-email`, {
                           method: 'POST',
                           headers: {
                               'Content-Type': 'application/json',
                           },
                           body: JSON.stringify({ email: email }),
                       });
                       
                       const checkData = await checkResponse.json();
                       
                       if (checkData.exists) {
                           showError('checkEmailError', 'এই ইমেইল দিয়ে ইতিমধ্যে একটি একাউন্ট আছে');
                           hideLoading();
                           return;
                       }
                       
                       // Store the email for later use
                       currentEmail = email;
                       document.getElementById('userEmail').textContent = email;
                       
                       // API কল - সার্ভারে OTP পাঠানোর অনুরোধ
                       const response = await fetch(`${API_URL}/api/send-otp`, {
                           method: 'POST',
                           headers: {
                               'Content-Type': 'application/json',
                           },
                           body: JSON.stringify({ email: email }),
                       });
                       
                       const data = await response.json();
                       
                       if (!data.success) {
                           throw new Error(data.message || 'OTP পাঠাতে ত্রুটি হয়েছে');
                       }
                       
                       // Clear OTP input fields
                       document.querySelectorAll('.otp-digit').forEach(input => {
                           input.value = '';
                       });
                       
                       // Start timer
                       startOTPTimer();
                       
                       // Show OTP verification form
                       toggleForm('otpVerification');
                       
                   } catch (error) {
                       console.error('Error:', error);
                       showNotification(error.message || 'OTP পাঠাতে ত্রুটি হয়েছে। পরে আবার চেষ্টা করুন।', 'error');
                   } finally {
                       hideLoading();
                   }
               }
           });
       }
   });
   
   // Handle Resend OTP button
   document.addEventListener('DOMContentLoaded', function() {
       const resendOtpButton = document.getElementById('resendOtp');
       if (resendOtpButton) {
           resendOtpButton.addEventListener('click', async function() {
               if (this.disabled) return;
               
               try {
                   showLoading();
                   this.disabled = true;
                   
                   // API কল - পুনরায় OTP পাঠানোর অনুরোধ
                   const response = await fetch(`${API_URL}/api/send-otp`, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                       },
                       body: JSON.stringify({ email: currentEmail }),
                   });
                   
                   const data = await response.json();
                   
                   if (!data.success) {
                       throw new Error(data.message || 'OTP পাঠাতে ত্রুটি হয়েছে');
                   }
                   
                   // Clear OTP input fields
                   document.querySelectorAll('.otp-digit').forEach(input => {
                       input.value = '';
                   });
                   
                   // Restart timer
                   startOTPTimer();
                   
                   // Show message
                   showNotification('নতুন অটিপি পাঠানো হয়েছে। অনুগ্রহ করে আপনার ইমেইল চেক করুন।', 'success');
                   
               } catch (error) {
                   console.error('Error:', error);
                   showNotification(error.message || 'OTP পাঠাতে ত্রুটি হয়েছে। পরে আবার চেষ্টা করুন।', 'error');
                   this.disabled = false;
               } finally {
                   hideLoading();
               }
           });
       }
   });
   
   // Handle OTP Verification form submission
   document.addEventListener('DOMContentLoaded', function() {
       const otpVerificationForm = document.getElementById('otpVerificationForm');
       if (otpVerificationForm) {
           otpVerificationForm.addEventListener('submit', async function(e) {
               e.preventDefault();
               
               // Reset error messages
               hideError('otpError');
               
               // Get entered OTP
               const enteredOTP = 
                   document.getElementById('otp1').value +
                   document.getElementById('otp2').value +
                   document.getElementById('otp3').value +
                   document.getElementById('otp4').value;
               
               // Validate OTP
               if (enteredOTP.length !== 4) {
                   showError('otpError', 'অনুগ্রহ করে সম্পূর্ণ অটিপি দিন');
                   return;
               }
               
               try {
                   showLoading();
                   
                   // API কল - OTP যাচাই করার অনুরোধ
                   const response = await fetch(`${API_URL}/api/verify-otp`, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                       },
                       body: JSON.stringify({ 
                           email: currentEmail,
                           otp: enteredOTP
                       }),
                   });
                   
                   const data = await response.json();
                   
                   if (!data.success) {
                       // Show error message
                       showError('otpError', data.message || 'অবৈধ OTP');
                       return;
                   }
                   
                   // OTP is valid, proceed to final registration step
                   clearInterval(otpTimer);
                   toggleForm('signup');
                   
               } catch (error) {
                   console.error('Error:', error);
                   showError('otpError', error.message || 'OTP যাচাই করতে ত্রুটি হয়েছে।');
               } finally {
                   hideLoading();
               }
           });
       }
   });
   
   // Handle Registration form submission
   document.addEventListener('DOMContentLoaded', function() {
       const signupForm = document.getElementById('signupForm');
       if (signupForm) {
           signupForm.addEventListener('submit', async function(e) {
               e.preventDefault();
               
               // Reset error messages
               document.querySelectorAll('.error-message').forEach(el => {
                   el.classList.remove('show-error');
               });
               
               const name = document.getElementById('signupName').value.trim();
               const password = document.getElementById('signupPassword').value;
               const confirmPassword = document.getElementById('signupConfirmPassword').value;
               
               let isValid = true;
               
               // Validation
               if (!name) {
                   showError('signupNameError', 'নাম আবশ্যক');
                   isValid = false;
               }
               
               if (!password || password.length < 6) {
                   showError('signupPasswordError', 'পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে');
                   isValid = false;
               }
               
               if (password !== confirmPassword) {
                   showError('signupConfirmPasswordError', 'পাসওয়ার্ড মিলছে না');
                   isValid = false;
               }
               
               if (!isValid) return;
               
               try {
                   showLoading();
                   
                   // নতুন ইউজার তৈরির জন্য API কল
                   const response = await fetch(`${DB_API_URL}/register`, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                       },
                       body: JSON.stringify({
                           name: name,
                           email: currentEmail,
                           password: password
                       }),
                   });
                   
                   const data = await response.json();
                   
                   if (!data.success) {
                       throw new Error(data.message || 'রেজিস্ট্রেশন সম্পন্ন করতে ত্রুটি হয়েছে');
                   }
                   
                   console.log('User registered:', data.user); // For demo purposes
                   
                   // Show success modal
                   openModal();
                   
                   // Clear form fields
                   document.getElementById('signupForm').reset();
                   
               } catch (error) {
                   console.error('Registration error:', error);
                   showNotification(error.message || 'রেজিস্ট্রেশন সম্পন্ন করতে ত্রুটি হয়েছে। পরে আবার চেষ্টা করুন।', 'error');
               } finally {
                   hideLoading();
               }
           });
       }
   });
   
   // Handle Login form submission
   document.addEventListener('DOMContentLoaded', function() {
       const loginForm = document.getElementById('loginForm');
       if (loginForm) {
           loginForm.addEventListener('submit', async function(e) {
               e.preventDefault();
               
               // Reset error messages
               document.querySelectorAll('.error-message').forEach(el => {
                   el.classList.remove('show-error');
               });
               
               const email = document.getElementById('loginEmail').value;
               const password = document.getElementById('loginPassword').value;
               let isValid = true;
               
               // Email validation
               if (!email || !validateEmail(email)) {
                   showError('loginEmailError', 'অনুগ্রহ করে একটি বৈধ ইমেইল লিখুন');
                   isValid = false;
               }
               
               // Password validation
               if (!password) {
                   showError('loginPasswordError', 'পাসওয়ার্ড আবশ্যক');
                   isValid = false;
               }
               
               if (isValid) {
                   try {
                       showLoading();
                       
                       // লগইন API কল
                       const response = await fetch(`${DB_API_URL}/login`, {
                           method: 'POST',
                           headers: {
                               'Content-Type': 'application/json',
                           },
                           body: JSON.stringify({
                               email: email,
                               password: password
                           }),
                       });
                       
                       const data = await response.json();
                       
                       if (!data.success) {
                           throw new Error(data.message || 'লগইন করতে ত্রুটি হয়েছে');
                       }
                       
                       // সেশন স্টোরেজে টোকেন এবং ইউজার ডেটা সংরক্ষণ করুন
                       sessionStorage.setItem('authToken', data.token);
                       sessionStorage.setItem('currentUser', JSON.stringify(data.user));
                       
                       // লগইন টাইম স্টোর করুন
                       sessionStorage.setItem('loginTime', Date.now().toString());
                       
                       // লগইন পপআপ বন্ধ করুন
                       const loginPopup = document.querySelector('.login-popup');
                       const blurOverlay = document.querySelector('.blur-overlay');
                       
                       if (loginPopup) loginPopup.classList.remove('active');
                       if (blurOverlay) blurOverlay.classList.remove('active');
                       document.body.style.overflow = '';
                       
                       // লগইন স্টেটাস আপডেট করুন
                       checkLoginStatus();
                       
                       showNotification('সফলভাবে লগইন করা হয়েছে! স্বাগতম ' + data.user.name, 'success');
                       
                   } catch (error) {
                       console.error('Login error:', error);
                       showNotification(error.message || 'ভুল ইমেইল বা পাসওয়ার্ড। অনুগ্রহ করে আবার চেষ্টা করুন।', 'error');
                   } finally {
                       hideLoading();
                   }
               }
           });
       }
   });
   
   // জেনারেল লগইন পপআপ ফাংশনালিটি
   document.addEventListener('DOMContentLoaded', function() {
       const loginForm = document.getElementById('login-form');
       if (loginForm) {
           loginForm.addEventListener('submit', function(e) {
               e.preventDefault();
               // লগইন লজিক এখানে লিখুন
               showNotification('লগইন সম্পন্ন হয়েছে!', 'success');
               
               const loginPopup = document.querySelector('.login-popup');
               const blurOverlay = document.querySelector('.blur-overlay');
               
               if (loginPopup) loginPopup.classList.remove('active');
               if (blurOverlay) blurOverlay.classList.remove('active');
               document.body.style.overflow = '';
           });
       }
   });

   // CSS for custom notification
   document.addEventListener('DOMContentLoaded', function() {
       const style = document.createElement('style');
       style.textContent = `
           .custom-notification {
               position: fixed;
               top: 20px;
               right: 20px;
               padding: 15px;
               border-radius: 5px;
               box-shadow: 0 2px 10px rgba(0,0,0,0.2);
               z-index: 9999;
               opacity: 0;
               transition: all 0.3s ease;
           }
           
           .custom-notification.success {
               background-color: #4CAF50;
               color: white;
           }
           
           .custom-notification.error {
               background-color: #f44336;
               color: white;
           }
           
           .notification-content {
               display: flex;
               align-items: center;
               justify-content: space-between;
           }
           
           .notification-close {
               margin-left: 15px;
               cursor: pointer;
               font-weight: bold;
           }
           
           .loader {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               height: 100%;
               background-color: rgba(255, 255, 255, 0.7);
               display: flex;
               justify-content: center;
               align-items: center;
               z-index: 9999;
           }
           
           .spinner {
               width: 40px;
               height: 40px;
               border: 4px solid #f3f3f3;
               border-top: 4px solid #3498db;
               border-radius: 50%;
               animation: spin 1s linear infinite;
           }
           
           @keyframes spin {
               0% { transform: rotate(0deg); }
               100% { transform: rotate(360deg); }
           }
       `;
       document.head.appendChild(style);
   });

   // ডিবাগিং কোড যোগ করা - সব ফাংশনের সাথে লগ বার্তা দেখাবে
console.log('Profile Dropdown Script Loaded');

document.addEventListener('DOMContentLoaded', function() {
   console.log('DOM Content Loaded - Setting up profile dropdown');
   
   // সেশন স্টোরেজ চেক করুন
   const token = sessionStorage.getItem('authToken');
   console.log('Auth Token exists:', !!token);
   
   // আমাদের এলিমেন্টগুলি আছে কিনা চেক করুন
   const loginButton = document.getElementById('loginButton');
   const profileDropdown = document.getElementById('profileDropdown');
   const profileIcon = document.querySelector('.profile-icon');
   
   console.log('Login Button found:', !!loginButton);
   console.log('Profile Dropdown found:', !!profileDropdown);
   console.log('Profile Icon found:', !!profileIcon);
   
   // প্রোফাইল ড্রপডাউন স্টাইল যোগ করুন
   addProfileDropdownStyles();
   

   
   
   // লগইন স্টেটাস আপডেট করুন
   checkLoginStatus();
   
   // লগআউট বাটন ইভেন্ট
   const logoutButton = document.getElementById('logoutButton');
   if (logoutButton) {
       console.log('Adding click event to logout button');
       logoutButton.addEventListener('click', handleLogout);
   } else {
       console.error('Logout button not found in the DOM');
   }
});



// লগআউট হ্যান্ডেল করার ফাংশন
async function handleLogout(e) {
   e.preventDefault();
   console.log('Logout button clicked');
   
   try {
       const token = sessionStorage.getItem('authToken');
       
       if (token) {
           // লগআউট API কল
           console.log('Calling logout API');
           try {
               const response = await fetch(`${DB_API_URL}/logout`, {
                   method: 'POST',
                   headers: {
                       'Content-Type': 'application/json',
                       'Authorization': `Bearer ${token}`
                   }
               });
               
               const data = await response.json();
               
               if (data.success) {
                   console.log('Logout successful');
                   showNotification(data.message || 'আপনি সফলভাবে লগআউট করেছেন।', 'success');
               } else {
                   console.error('Logout API returned error:', data.message);
                   showNotification(data.message || 'লগআউট করতে সমস্যা হয়েছে।', 'error');
               }
           } catch (apiError) {
               console.error('Logout API call failed:', apiError);
               // এপিআই কল ব্যর্থ হলেও লগআউট করুন
               showNotification('লগআউট প্রক্রিয়া সম্পন্ন হয়েছে।', 'success');
           }
       } else {
           console.warn('No auth token found for logout');
       }
   } catch (error) {
       console.error('Logout error:', error);
   } finally {
       // সেশন স্টোরেজ থেকে উসার ডেটা মুছুন
       console.log('Removing user data from session storage');
       sessionStorage.removeItem('authToken');
       sessionStorage.removeItem('currentUser');
       sessionStorage.removeItem('loginTime');
       
       // লগইন স্টেটাস আপডেট করুন
       checkLoginStatus();
   }
}

// স্টাইল যোগ করার ফাংশন
function addProfileDropdownStyles() {
   console.log('Adding profile dropdown styles');
   
   // আগে থেকে স্টাইল এলিমেন্ট আছে কিনা চেক করুন
   if (document.getElementById('profileDropdownStyles')) {
       console.log('Styles already exist, skipping');
       return;
   }
   
   const style = document.createElement('style');
   style.id = 'profileDropdownStyles';
   style.textContent = `
       /* User Menu Container Styles */
       .user-menu-container {
           position: relative;
           display: inline-block;
       }
       
       /* Login Button Styles */
       .login-button {
           display: inline-block;
           padding: 8px 15px;
           background-color: #4CAF50;
           color: white;
           border-radius: 4px;
           text-decoration: none;
           font-weight: bold;
           transition: background-color 0.3s;
       }
       
       .login-button:hover {
           background-color: #45a049;
       }
       
       /* Profile Dropdown Styles */
       .profile-dropdown {
           display: none;
           position: relative;
       }
       
       .profile-icon {
           background: none;
           border: none;
           font-size: 24px;
           color: #333;
           cursor: pointer;
           padding: 5px;
       }
       
       /* Font Awesome Fallback */
       .profile-icon-text {
           display: none;
       }
       
       .no-fontawesome .profile-icon-text {
           display: inline;
           font-weight: bold;
       }
       
       .dropdown-menu1 {
           display: none;
           position: absolute;
           right: 0;
           background-color: white;
           min-width: 180px;
           box-shadow: 0 8px 16px rgba(0,0,0,0.1);
           z-index: 1000;
           border-radius: 4px;
           overflow: hidden;
       }
       
       .dropdown-item {
           display: block;
           padding: 10px 15px;
           text-decoration: none;
           color: #333;
           transition: background-color 0.2s;
       }
       
       .dropdown-item:hover {
           background-color: #f8f8f8;
       }
   `;
   document.head.appendChild(style);
   console.log('Styles added to document head');
}

// লগইন টাইম চেক করার ফাংশন
function isLoginExpired() {
   const loginTime = sessionStorage.getItem('loginTime');
   if (!loginTime) return true;
   
   const currentTime = Date.now();
   const loginTimestamp = parseInt(loginTime);
   const timeDiff = currentTime - loginTimestamp;
   
   // 24 ঘন্টা = 24 * 60 * 60 * 1000 = 86400000 মিলিসেকেন্ড
   const twentyFourHours = 24 * 60 * 60 * 1000;
   
   return timeDiff > twentyFourHours;
}

// চেক লগইন স্ট্যাটাস আপডেটেড ফাংশন (Fixed)
async function checkLoginStatus() {
   console.log('Checking login status');
   
   // সেশন স্টোরেজ থেকে টোকেন পড়ুন
   const token = sessionStorage.getItem('authToken');
   
   const loginButton = document.getElementById('loginButton');
   const profileDropdown = document.getElementById('profileDropdown');
   
   // Font Awesome লোড হয়েছে কিনা চেক করুন
   checkFontAwesome();
   
   if (!loginButton || !profileDropdown) {
       console.error('Login button or profile dropdown not found');
       console.log('loginButton:', loginButton);
       console.log('profileDropdown:', profileDropdown);
       return false;
   }
   
   if (token) {
       console.log('Auth token found, checking expiration...');
       
       // লগইন টাইম এক্সপায়ার হয়েছে কিনা চেক করুন
       if (isLoginExpired()) {
           console.log('Login expired, logging out');
           sessionStorage.removeItem('authToken');
           sessionStorage.removeItem('currentUser');
           sessionStorage.removeItem('loginTime');
           loginButton.style.display = 'block';
           profileDropdown.style.display = 'none';
           return false;
       }
       
       // লগইন করা আছে এবং এক্সপায়ার হয়নি, প্রোফাইল আইকন দেখান
       console.log('User is logged in and not expired, showing profile dropdown');
       loginButton.style.display = 'none';
       profileDropdown.style.display = 'block';
       return true;
   } else {
       // লগইন করা নেই, লগইন বাটন দেখান
       console.log('No auth token, showing login button');
       loginButton.style.display = 'block';
       profileDropdown.style.display = 'none';
       return false;
   }
}

// Font Awesome লোড হয়েছে কিনা চেক করুন
function checkFontAwesome() {
   console.log('Checking if Font Awesome is loaded');
   
   // Font Awesome লোড হয়েছে কিনা চেক করুন
   const isFontAwesomeLoaded = (function() {
       // Check if any Font Awesome classes are applied
       const span = document.createElement('span');
       span.className = 'fa';
       span.style.display = 'none';
       document.body.appendChild(span);
       const result = window.getComputedStyle(span).fontFamily.includes('Font');
       document.body.removeChild(span);
       return result;
   })();
   
   console.log('Font Awesome loaded:', isFontAwesomeLoaded);
   
   if (!isFontAwesomeLoaded) {
       console.log('Font Awesome not detected, adding fallback');
       // Font Awesome না থাকলে লিংক যোগ করুন
       const link = document.createElement('link');
       link.rel = 'stylesheet';
       link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
       document.head.appendChild(link);
       
       // ফলব্যাক ক্লাস যোগ করুন
       document.body.classList.add('no-fontawesome');
       

   }
}

// পেজ লোড এবং রিফ্রেশের সময় লগইন স্টেটাস চেক করুন
window.addEventListener('load', function() {
   console.log('Page loaded, checking login status');
   checkLoginStatus();
});

// পেজ ভিজিবল হলে লগইন স্টেটাস চেক করুন
document.addEventListener('visibilitychange', function() {
   if (!document.hidden) {
       console.log('Page became visible, checking login status');
       checkLoginStatus();
   }
});

// ইনিশিয়ালাইজ স্ক্রিপ্ট ইমিডিয়েটলি
console.log('Profile dropdown script initialized');
</script>
<!-- লগআউট অটোভাবে বন্ধ করার কোড টেষ্ট  -->
<script>
    // ==============================================
// PERSISTENT LOGIN SYSTEM - AUTO LOGOUT DISABLER
// ==============================================
// এই কোডটি সব অটো লগআউট ফিচার বন্ধ করে দেবে
// একবার লগইন করলে ম্যানুয়াল লগআউট না করা পর্যন্ত লগইন থাকবে

document.addEventListener('DOMContentLoaded', function() {
    console.log('Persistent Login System activated');
    
    // ১. সব টাইমার এবং ইন্টারভাল বন্ধ করুন
    function disableAutoLogout() {
        // OTP টাইমার বন্ধ করুন (এটি রাখা যেতে পারে)
        // if (otpTimer) {
        //     clearInterval(otpTimer);
        // }
        
        // টোকেন রিফ্রেশ ইন্টারভাল বন্ধ করুন
        if (window.tokenRefreshInterval) {
            clearInterval(window.tokenRefreshInterval);
            window.tokenRefreshInterval = null;
        }
        
        // ইউজার ইনঅ্যাক্টিভিটি টাইমার বন্ধ করুন
        if (window.userActivityTimer) {
            clearTimeout(window.userActivityTimer);
            window.userActivityTimer = null;
        }
        
        console.log('All auto-logout timers disabled');
    }
    
    // ২. Original ফাংশনগুলি Override করুন
    
    // Token refresh function কে modify করুন
    window.originalRefreshToken = window.refreshToken;
    window.refreshToken = async function() {
        console.log('Token refresh skipped - persistent login active');
        return true; // সবসময় true রিটার্ন করুন
    };
    
    // Setup token refresh function কে নিষ্ক্রিয় করুন
    window.originalSetupTokenRefresh = window.setupTokenRefresh;
    window.setupTokenRefresh = function() {
        console.log('Token refresh setup skipped - persistent login active');
        // কিছুই করবেন না
    };
    
    // Auto logout handler কে নিষ্ক্রিয় করুন
    window.originalHandleAutoLogout = window.handleAutoLogout;
    window.handleAutoLogout = function() {
        console.log('Auto logout prevented - persistent login active');
        // কিছুই করবেন না
    };
    
    // User activity tracking কে নিষ্ক্রিয় করুন
    window.originalSetupUserActivityTracking = window.setupUserActivityTracking;
    window.setupUserActivityTracking = function() {
        console.log('User activity tracking skipped - persistent login active');
        // কিছুই করবেন না
    };
    
    // Reset user activity function কে নিষ্ক্রিয় করুন
    window.originalResetUserActivity = window.resetUserActivity;
    window.resetUserActivity = function() {
        // console.log('User activity reset skipped - persistent login active');
        // কিছুই করবেন না
    };
    
    // ৩. Login expiration check কে bypass করুন
    window.originalIsLoginExpired = window.isLoginExpired;
    window.isLoginExpired = function() {
        console.log('Login expiration check bypassed - persistent login active');
        return false; // সবসময় false রিটার্ন করুন
    };
    
    // ৪. Enhanced checkLoginStatus function
    window.originalCheckLoginStatus = window.checkLoginStatus;
    window.checkLoginStatus = async function() {
        console.log('Enhanced login status check - persistent login');
        
        // localStorage এবং sessionStorage দুটোই চেক করুন
        const token = localStorage.getItem('authToken') || sessionStorage.getItem('authToken');
        
        const loginButton = document.getElementById('loginButton');
        const profileDropdown = document.getElementById('profileDropdown');
        
        // Font Awesome চেক (যদি ফাংশন থাকে)
        if (typeof checkFontAwesome === 'function') {
            checkFontAwesome();
        }
        
        if (!loginButton || !profileDropdown) {
            console.error('Login button or profile dropdown not found');
            return false;
        }
        
        if (token) {
            // টোকেন থাকলে সরাসরি লগইন স্টেট দেখান
            console.log('Token found, showing logged in state - persistent login');
            loginButton.style.display = 'none';
            profileDropdown.style.display = 'block';
            return true;
        } else {
            // টোকেন না থাকলে লগইন বাটন দেখান
            console.log('No token found, showing login button');
            loginButton.style.display = 'block';
            profileDropdown.style.display = 'none';
            return false;
        }
    };
    
    // ৫. Enhanced saveAuthToken function
    window.originalSaveAuthToken = window.saveAuthToken;
    window.saveAuthToken = function(token, user) {
        console.log('Saving auth token with persistent login');
        
        // localStorage এ সেভ করুন (persistent)
        localStorage.setItem('authToken', token);
        localStorage.setItem('currentUser', JSON.stringify(user));
        
        // sessionStorage এও সেভ করুন (backup)
        sessionStorage.setItem('authToken', token);
        sessionStorage.setItem('currentUser', JSON.stringify(user));
        
        // Login time সেভ করুন কিন্তু ব্যবহার করবেন না
        localStorage.setItem('loginTime', Date.now().toString());
        sessionStorage.setItem('loginTime', Date.now().toString());
        
        // Auto refresh setup করবেন না
        // setupTokenRefresh(); // এটি কল করবেন না
        
        // UI আপডেট করুন
        checkLoginStatus();
    };
    
    // ৬. Window/Tab close এর আগে localStorage backup করুন
    window.addEventListener('beforeunload', function() {
        const token = sessionStorage.getItem('authToken');
        const user = sessionStorage.getItem('currentUser');
        
        if (token && !localStorage.getItem('authToken')) {
            localStorage.setItem('authToken', token);
        }
        if (user && !localStorage.getItem('currentUser')) {
            localStorage.setItem('currentUser', user);
        }
        
        console.log('Session data backed up to localStorage');
    });
    
    // ৭. Page visibility change এ extra check
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
            console.log('Page visible - persistent login check');
            
            // localStorage থেকে sessionStorage এ কপি করুন
            const token = localStorage.getItem('authToken');
            const user = localStorage.getItem('currentUser');
            
            if (token && !sessionStorage.getItem('authToken')) {
                sessionStorage.setItem('authToken', token);
                console.log('Token restored from localStorage');
            }
            if (user && !sessionStorage.getItem('currentUser')) {
                sessionStorage.setItem('currentUser', user);
                console.log('User data restored from localStorage');
            }
            
            checkLoginStatus();
        }
    });
    
    // ৮. Storage event listener (multiple tabs এর জন্য)
    window.addEventListener('storage', function(e) {
        if (e.key === 'authToken' || e.key === 'currentUser') {
            console.log('Storage changed in another tab - syncing');
            checkLoginStatus();
        }
    });
    
    // ৯. Manual logout function enhancement with home page redirect
    window.enhancedLogout = async function() {
        console.log('Enhanced logout called');
        
        try {
            const token = localStorage.getItem('authToken') || sessionStorage.getItem('authToken');
            
            if (token) {
                // API কল করুন
                try {
                    const response = await fetch(`${DB_API_URL}/logout`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        }
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        showNotification(data.message || 'আপনি সফলভাবে লগআউট করেছেন।', 'success');
                    }
                } catch (apiError) {
                    console.error('Logout API call failed:', apiError);
                    showNotification('লগআউট প্রক্রিয়া সম্পন্ন হয়েছে।', 'success');
                }
            }
        } catch (error) {
            console.error('Logout error:', error);
        } finally {
            // সব storage থেকে ডেটা মুছুন
            localStorage.removeItem('authToken');
            localStorage.removeItem('currentUser');
            localStorage.removeItem('loginTime');
            
            sessionStorage.removeItem('authToken');
            sessionStorage.removeItem('currentUser');
            sessionStorage.removeItem('loginTime');
            
            // UI আপডেট করুন (লগইন বাটন দেখান)
            checkLoginStatus();
            
            // হোম পেইজে রিডাইরেক্ট করুন
            setTimeout(function() {
                window.location.href = '/';
            }, 1000); // ১ সেকেন্ড পরে রিডাইরেক্ট
        }
    };
    
    // ১০. Original logout button এর event listener কে replace করুন
    setTimeout(function() {
        const logoutButton = document.getElementById('logoutButton');
        if (logoutButton) {
            // পুরাতন event listeners সরান
            const newLogoutButton = logoutButton.cloneNode(true);
            logoutButton.parentNode.replaceChild(newLogoutButton, logoutButton);
            
            // নতুন event listener যোগ করুন
            newLogoutButton.addEventListener('click', function(e) {
                e.preventDefault();
                enhancedLogout();
            });
            
            console.log('Logout button event updated for persistent login with home redirect');
        }
    }, 1000);
    
    // ১১. Initialize করুন
    disableAutoLogout();
    
    // ১২. Page load এ localStorage থেকে restore করুন
    setTimeout(function() {
        const token = localStorage.getItem('authToken');
        const user = localStorage.getItem('currentUser');
        
        if (token && !sessionStorage.getItem('authToken')) {
            sessionStorage.setItem('authToken', token);
            console.log('Token restored from localStorage on page load');
        }
        if (user && !sessionStorage.getItem('currentUser')) {
            sessionStorage.setItem('currentUser', user);
            console.log('User data restored from localStorage on page load');
        }
        
        checkLoginStatus();
    }, 500);
    
    console.log('🔒 PERSISTENT LOGIN SYSTEM ACTIVATED');
    console.log('✅ Auto logout disabled');
    console.log('✅ Session will persist until manual logout');
    console.log('✅ Login state will survive browser restarts');
    console.log('✅ Home page redirect on logout enabled');
});

// ==============================================
// ADDITIONAL SAFETY MEASURES
// ==============================================

// Global error handler যাতে unexpected logout না হয়
window.addEventListener('error', function(e) {
    console.log('Global error caught, but persistent login maintained');
});

// Unhandled promise rejection handler
window.addEventListener('unhandledrejection', function(e) {
    console.log('Unhandled promise rejection, but persistent login maintained');
});

// Console message
console.log(`
🔒 PERSISTENT LOGIN SYSTEM LOADED
=====================================
✅ All auto-logout features disabled
✅ Login will persist across sessions
✅ Manual logout only
✅ Cross-tab synchronization enabled
✅ Home page redirect on logout
=====================================
`);
</script>



<!-- লগআউট অটোভাবে বন্ধ করার কোড  -->
<!-- <script>
    // ==============================================
// PERSISTENT LOGIN SYSTEM - AUTO LOGOUT DISABLER
// ==============================================
// এই কোডটি সব অটো লগআউট ফিচার বন্ধ করে দেবে
// একবার লগইন করলে ম্যানুয়াল লগআউট না করা পর্যন্ত লগইন থাকবে

document.addEventListener('DOMContentLoaded', function() {
    console.log('Persistent Login System activated');
    
    // ১. সব টাইমার এবং ইন্টারভাল বন্ধ করুন
    function disableAutoLogout() {
        // OTP টাইমার বন্ধ করুন (এটি রাখা যেতে পারে)
        // if (otpTimer) {
        //     clearInterval(otpTimer);
        // }
        
        // টোকেন রিফ্রেশ ইন্টারভাল বন্ধ করুন
        if (window.tokenRefreshInterval) {
            clearInterval(window.tokenRefreshInterval);
            window.tokenRefreshInterval = null;
        }
        
        // ইউজার ইনঅ্যাক্টিভিটি টাইমার বন্ধ করুন
        if (window.userActivityTimer) {
            clearTimeout(window.userActivityTimer);
            window.userActivityTimer = null;
        }
        
        console.log('All auto-logout timers disabled');
    }
    
    // ২. Original ফাংশনগুলি Override করুন
    
    // Token refresh function কে modify করুন
    window.originalRefreshToken = window.refreshToken;
    window.refreshToken = async function() {
        console.log('Token refresh skipped - persistent login active');
        return true; // সবসময় true রিটার্ন করুন
    };
    
    // Setup token refresh function কে নিষ্ক্রিয় করুন
    window.originalSetupTokenRefresh = window.setupTokenRefresh;
    window.setupTokenRefresh = function() {
        console.log('Token refresh setup skipped - persistent login active');
        // কিছুই করবেন না
    };
    
    // Auto logout handler কে নিষ্ক্রিয় করুন
    window.originalHandleAutoLogout = window.handleAutoLogout;
    window.handleAutoLogout = function() {
        console.log('Auto logout prevented - persistent login active');
        // কিছুই করবেন না
    };
    
    // User activity tracking কে নিষ্ক্রিয় করুন
    window.originalSetupUserActivityTracking = window.setupUserActivityTracking;
    window.setupUserActivityTracking = function() {
        console.log('User activity tracking skipped - persistent login active');
        // কিছুই করবেন না
    };
    
    // Reset user activity function কে নিষ্ক্রিয় করুন
    window.originalResetUserActivity = window.resetUserActivity;
    window.resetUserActivity = function() {
        // console.log('User activity reset skipped - persistent login active');
        // কিছুই করবেন না
    };
    
    // ৩. Login expiration check কে bypass করুন
    window.originalIsLoginExpired = window.isLoginExpired;
    window.isLoginExpired = function() {
        console.log('Login expiration check bypassed - persistent login active');
        return false; // সবসময় false রিটার্ন করুন
    };
    
    // ৪. Enhanced checkLoginStatus function
    window.originalCheckLoginStatus = window.checkLoginStatus;
    window.checkLoginStatus = async function() {
        console.log('Enhanced login status check - persistent login');
        
        // localStorage এবং sessionStorage দুটোই চেক করুন
        const token = localStorage.getItem('authToken') || sessionStorage.getItem('authToken');
        
        const loginButton = document.getElementById('loginButton');
        const profileDropdown = document.getElementById('profileDropdown');
        
        // Font Awesome চেক (যদি ফাংশন থাকে)
        if (typeof checkFontAwesome === 'function') {
            checkFontAwesome();
        }
        
        if (!loginButton || !profileDropdown) {
            console.error('Login button or profile dropdown not found');
            return false;
        }
        
        if (token) {
            // টোকেন থাকলে সরাসরি লগইন স্টেট দেখান
            console.log('Token found, showing logged in state - persistent login');
            loginButton.style.display = 'none';
            profileDropdown.style.display = 'block';
            return true;
        } else {
            // টোকেন না থাকলে লগইন বাটন দেখান
            console.log('No token found, showing login button');
            loginButton.style.display = 'block';
            profileDropdown.style.display = 'none';
            return false;
        }
    };
    
    // ৫. Enhanced saveAuthToken function
    window.originalSaveAuthToken = window.saveAuthToken;
    window.saveAuthToken = function(token, user) {
        console.log('Saving auth token with persistent login');
        
        // localStorage এ সেভ করুন (persistent)
        localStorage.setItem('authToken', token);
        localStorage.setItem('currentUser', JSON.stringify(user));
        
        // sessionStorage এও সেভ করুন (backup)
        sessionStorage.setItem('authToken', token);
        sessionStorage.setItem('currentUser', JSON.stringify(user));
        
        // Login time সেভ করুন কিন্তু ব্যবহার করবেন না
        localStorage.setItem('loginTime', Date.now().toString());
        sessionStorage.setItem('loginTime', Date.now().toString());
        
        // Auto refresh setup করবেন না
        // setupTokenRefresh(); // এটি কল করবেন না
        
        // UI আপডেট করুন
        checkLoginStatus();
    };
    
    // ৬. Window/Tab close এর আগে localStorage backup করুন
    window.addEventListener('beforeunload', function() {
        const token = sessionStorage.getItem('authToken');
        const user = sessionStorage.getItem('currentUser');
        
        if (token && !localStorage.getItem('authToken')) {
            localStorage.setItem('authToken', token);
        }
        if (user && !localStorage.getItem('currentUser')) {
            localStorage.setItem('currentUser', user);
        }
        
        console.log('Session data backed up to localStorage');
    });
    
    // ৭. Page visibility change এ extra check
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden) {
            console.log('Page visible - persistent login check');
            
            // localStorage থেকে sessionStorage এ কপি করুন
            const token = localStorage.getItem('authToken');
            const user = localStorage.getItem('currentUser');
            
            if (token && !sessionStorage.getItem('authToken')) {
                sessionStorage.setItem('authToken', token);
                console.log('Token restored from localStorage');
            }
            if (user && !sessionStorage.getItem('currentUser')) {
                sessionStorage.setItem('currentUser', user);
                console.log('User data restored from localStorage');
            }
            
            checkLoginStatus();
        }
    });
    
    // ৮. Storage event listener (multiple tabs এর জন্য)
    window.addEventListener('storage', function(e) {
        if (e.key === 'authToken' || e.key === 'currentUser') {
            console.log('Storage changed in another tab - syncing');
            checkLoginStatus();
        }
    });
    
    // ৯. Manual logout function enhancement
    window.enhancedLogout = async function() {
        console.log('Enhanced logout called');
        
        try {
            const token = localStorage.getItem('authToken') || sessionStorage.getItem('authToken');
            
            if (token) {
                // API কল করুন
                try {
                    const response = await fetch(`${DB_API_URL}/logout`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        }
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        showNotification(data.message || 'আপনি সফলভাবে লগআউট করেছেন।', 'success');
                    }
                } catch (apiError) {
                    console.error('Logout API call failed:', apiError);
                    showNotification('লগআউট প্রক্রিয়া সম্পন্ন হয়েছে।', 'success');
                }
            }
        } catch (error) {
            console.error('Logout error:', error);
        } finally {
            // সব storage থেকে ডেটা মুছুন
            localStorage.removeItem('authToken');
            localStorage.removeItem('currentUser');
            localStorage.removeItem('loginTime');
            
            sessionStorage.removeItem('authToken');
            sessionStorage.removeItem('currentUser');
            sessionStorage.removeItem('loginTime');
            
            // UI আপডেট করুন
            checkLoginStatus();
        }
    };
    
    // ১০. Original logout button এর event listener কে replace করুন
    setTimeout(function() {
        const logoutButton = document.getElementById('logoutButton');
        if (logoutButton) {
            // পুরাতন event listeners সরান
            const newLogoutButton = logoutButton.cloneNode(true);
            logoutButton.parentNode.replaceChild(newLogoutButton, logoutButton);
            
            // নতুন event listener যোগ করুন
            newLogoutButton.addEventListener('click', function(e) {
                e.preventDefault();
                enhancedLogout();
            });
            
            console.log('Logout button event updated for persistent login');
        }
    }, 1000);
    
    // ১১. Initialize করুন
    disableAutoLogout();
    
    // ১২. Page load এ localStorage থেকে restore করুন
    setTimeout(function() {
        const token = localStorage.getItem('authToken');
        const user = localStorage.getItem('currentUser');
        
        if (token && !sessionStorage.getItem('authToken')) {
            sessionStorage.setItem('authToken', token);
            console.log('Token restored from localStorage on page load');
        }
        if (user && !sessionStorage.getItem('currentUser')) {
            sessionStorage.setItem('currentUser', user);
            console.log('User data restored from localStorage on page load');
        }
        
        checkLoginStatus();
    }, 500);
    
    console.log('🔒 PERSISTENT LOGIN SYSTEM ACTIVATED');
    console.log('✅ Auto logout disabled');
    console.log('✅ Session will persist until manual logout');
    console.log('✅ Login state will survive browser restarts');
});

// ==============================================
// ADDITIONAL SAFETY MEASURES
// ==============================================

// Global error handler যাতে unexpected logout না হয়
window.addEventListener('error', function(e) {
    console.log('Global error caught, but persistent login maintained');
});

// Unhandled promise rejection handler
window.addEventListener('unhandledrejection', function(e) {
    console.log('Unhandled promise rejection, but persistent login maintained');
});

// Console message
console.log(`
🔒 PERSISTENT LOGIN SYSTEM LOADED
=====================================
✅ All auto-logout features disabled
✅ Login will persist across sessions
✅ Manual logout only
✅ Cross-tab synchronization enabled
=====================================
`);
 </script> -->








<!-- <script>
    // API URL - সার্ভার URL
    const API_URL = 'https://talimul-islam.onrender.com';
    const DB_API_URL = 'https://t-i-a-storage-backend.onrender.com';  // MongoDB backend URL
                        
    let currentEmail = '';
    let otpTimer;
    let tokenRefreshInterval;
    
    // সাধারণ ফাংশন
    // Toggle between forms
    function toggleForm(formType) {
        document.getElementById('loginSection').style.display = 'none';
        document.getElementById('emailCheckSection').style.display = 'none';
        document.getElementById('otpVerificationSection').style.display = 'none';
        document.getElementById('signupSection').style.display = 'none';
        
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('emailCheckForm').style.display = 'none';
        document.getElementById('otpVerificationForm').style.display = 'none';
        document.getElementById('signupForm').style.display = 'none';
        
        if (formType === 'login') {
            document.getElementById('loginSection').style.display = 'block';
            document.getElementById('loginForm').style.display = 'block';
        } else if (formType === 'emailCheck') {
            document.getElementById('emailCheckSection').style.display = 'block';
            document.getElementById('emailCheckForm').style.display = 'block';
        } else if (formType === 'otpVerification') {
            document.getElementById('otpVerificationSection').style.display = 'block';
            document.getElementById('otpVerificationForm').style.display = 'block';
        } else if (formType === 'signup') {
            document.getElementById('signupSection').style.display = 'block';
            document.getElementById('signupForm').style.display = 'block';
        }
    }
    
    // Toggle password visibility
    function togglePasswordVisibility(inputId, toggleId) {
        const passwordInput = document.getElementById(inputId);
        const toggleButton = document.getElementById(toggleId);
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            toggleButton.textContent = 'লুকান';
        } else {
            passwordInput.type = 'password';
            toggleButton.textContent = 'দেখুন';
        }
    }
    
    // Start OTP timer
    function startOTPTimer() {
        let totalSeconds = 120; // 2 minutes
        
        clearInterval(otpTimer);
        document.getElementById('resendOtp').disabled = true;
        
        // Update timer display immediately
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = totalSeconds % 60;
        document.getElementById('timer').textContent = 
            (minutes < 10 ? '0' + minutes : minutes) + ':' + 
            (seconds < 10 ? '0' + seconds : seconds);
        
        otpTimer = setInterval(function() {
            totalSeconds--;
            
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            
            document.getElementById('timer').textContent = 
                (minutes < 10 ? '0' + minutes : minutes) + ':' + 
                (seconds < 10 ? '0' + seconds : seconds);
            
            if (totalSeconds <= 0) {
                clearInterval(otpTimer);
                document.getElementById('resendOtp').disabled = false;
            }
        }, 1000);
    }
    
    // লোডিং ফাংশন
    // লোডিং স্পিনার তৈরি করুন
    function createLoader() {
        const loader = document.createElement('div');
        loader.className = 'loader';
        loader.id = 'pageLoader';
        
        const spinner = document.createElement('div');
        spinner.className = 'spinner';
        
        loader.appendChild(spinner);
        document.body.appendChild(loader);
    }
    
    // লোডিং দেখানোর ফাংশন
    function showLoading() {
        if (!document.getElementById('pageLoader')) {
            createLoader();
        }
        document.getElementById('pageLoader').style.display = 'flex';
        // document.body.style.cursor = 'wait';
    }
    
    // লোডিং বন্ধ করার ফাংশন
    function hideLoading() {
        const loader = document.getElementById('pageLoader');
        if (loader) {
            loader.style.display = 'none';
        }
        // document.body.style.cursor = 'default';
    }
    
    // Show error with specified message
    function showError(elementId, message) {
        const errorElement = document.getElementById(elementId);
        errorElement.textContent = message;
        errorElement.classList.add('show-error');
    }
    
    // Hide error
    function hideError(elementId) {
        document.getElementById(elementId).classList.remove('show-error');
    }
    
    // Email validation function
    function validateEmail(email) {
        const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return re.test(email);
    }
    
    // নোটিফিকেশন পপআপ ফাংশন - alert এর পরিবর্তে
    function showNotification(message, type = 'success') {
        // পূর্বের নোটিফিকেশন রিমুভ করুন
        const existingNotification = document.getElementById('customNotification');
        if (existingNotification) {
            existingNotification.remove();
        }
        
        // নতুন নোটিফিকেশন তৈরি করুন
        const notification = document.createElement('div');
        notification.id = 'customNotification';
        notification.className = `custom-notification ${type}`;
        
        // নোটিফিকেশন কনটেন্ট
        notification.innerHTML = `
            <div class="notification-content">
                <span class="notification-message">${message}</span>
                <span class="notification-close">&times;</span>
            </div>
        `;
        
        // নোটিফিকেশন স্টাইল
        notification.style.position = 'fixed';
        notification.style.top = '20px';
        notification.style.right = '20px';
        notification.style.backgroundColor = type === 'success' ? '#4CAF50' : '#f44336';
        notification.style.color = 'white';
        notification.style.padding = '15px';
        notification.style.borderRadius = '5px';
        notification.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
        notification.style.zIndex = '9999';
        notification.style.transition = 'all 0.3s ease';
        notification.style.opacity = '0';
        
        // বডিতে অ্যাড করুন
        document.body.appendChild(notification);
        
        // ফেড ইন এফেক্ট
        setTimeout(() => {
            notification.style.opacity = '1';
        }, 10);
        
        // ক্লোজ বাটন ফাংশনালিটি
        const closeButton = notification.querySelector('.notification-close');
        closeButton.style.marginLeft = '15px';
        closeButton.style.cursor = 'pointer';
        closeButton.style.fontWeight = 'bold';
        
        closeButton.addEventListener('click', function() {
            notification.style.opacity = '0';
            setTimeout(() => {
                notification.remove();
            }, 300);
        });
        
        // অটো ক্লোজ
        setTimeout(() => {
            notification.style.opacity = '0';
            setTimeout(() => {
                notification.remove();
            }, 300);
        }, 5000);
    }
    
    // মডাল ফাংশন
    // Open modal
    function openModal() {
        document.getElementById('successModal').style.display = 'flex';
    }
    
    // Close modal
    function closeModal() {
        document.getElementById('successModal').style.display = 'none';
        toggleForm('login');
    }
    
    // টোকেন রিফ্রেশ ফাংশন
    async function refreshToken() {
        try {
            const token = localStorage.getItem('authToken');
            if (!token) return false;
            
            const response = await fetch(`${DB_API_URL}/refresh-token`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                }
            });
            
            const data = await response.json();
            
            if (data.success && data.token) {
                // নতুন টোকেন সেভ করুন
                localStorage.setItem('authToken', data.token);
                if (data.user) {
                    localStorage.setItem('currentUser', JSON.stringify(data.user));
                }
                return true;
            } else {
                return false;
            }
        } catch (error) {
            console.error('Token refresh error:', error);
            return false;
        }
    }
    
    // অটো টোকেন রিফ্রেশ সেটআপ
    function setupTokenRefresh() {
        // প্রতি 10 মিনিটে টোকেন রিফ্রেশ করুন
        tokenRefreshInterval = setInterval(async () => {
            const isRefreshed = await refreshToken();
            if (!isRefreshed) {
                // রিফ্রেশ ফেইল হলে লগআউট করুন
                handleAutoLogout();
            }
        }, 10 * 60 * 1000); // 10 মিনিট
    }
    
    // অটো লগআউট হ্যান্ডলার
    function handleAutoLogout() {
        // সেশন ক্লিয়ার করুন
        localStorage.removeItem('authToken');
        localStorage.removeItem('currentUser');
        
        // ইন্টারভাল ক্লিয়ার করুন
        if (tokenRefreshInterval) {
            clearInterval(tokenRefreshInterval);
        }
        
        // UI আপডেট করুন
        checkLoginStatus();
        
        // ইউজারকে জানান
        showNotification('আপনার সেশন শেষ হয়ে গেছে। আবার লগইন করুন।', 'error');
    }
    
    // লগইন স্টেটাস চেক করার উন্নত ফাংশন
    async function checkLoginStatus() {
        // localStorage থেকে টোকেন পড়ুন
        const token = localStorage.getItem('authToken');
        
        const loginButton = document.getElementById('loginButton');
        const profileDropdown = document.getElementById('profileDropdown');
        
        if (token) {
            try {
                // টোকেন ভ্যালিডেট করার জন্য API কল
                const response = await fetch(`${DB_API_URL}/validate-token`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                const data = await response.json();
                
                if (data.valid) {
                    // লগইন করা আছে, প্রোফাইল আইকন দেখান
                    if (loginButton) loginButton.style.display = 'none';
                    if (profileDropdown) profileDropdown.style.display = 'block';
                    
                    // যদি ইউজার ডাটা থাকে তাহলে সেট করুন
                    if (data.user) {
                        localStorage.setItem('currentUser', JSON.stringify(data.user));
                    }
                    
                    // অটো রিফ্রেশ সেটআপ করুন (যদি এখনো না করা হয়ে থাকে)
                    if (!tokenRefreshInterval) {
                        setupTokenRefresh();
                    }
                    
                    return true;
                } else {
                    // টোকেন ভ্যালিড নয়, রিফ্রেশ করার চেষ্টা করুন
                    const isRefreshed = await refreshToken();
                    if (isRefreshed) {
                        return await checkLoginStatus();
                    } else {
                        // রিফ্রেশ ফেইল হলে লগআউট
                        handleAutoLogout();
                        return false;
                    }
                }
            } catch (error) {
                console.error('Error validating token:', error);
                // নেটওয়ার্ক এরর হলে রিফ্রেশ করার চেষ্টা করুন
                const isRefreshed = await refreshToken();
                if (!isRefreshed) {
                    handleAutoLogout();
                }
                return false;
            }
        } else {
            // লগইন করা নেই, লগইন বাটন দেখান
            if (loginButton) loginButton.style.display = 'block';
            if (profileDropdown) profileDropdown.style.display = 'none';
            
            // ইন্টারভাল ক্লিয়ার করুন
            if (tokenRefreshInterval) {
                clearInterval(tokenRefreshInterval);
                tokenRefreshInterval = null;
            }
            
            return false;
        }
    }
    
    // সফল লগইনের পর টোকেন সেভ করার ফাংশন
    function saveAuthToken(token, user) {
        localStorage.setItem('authToken', token);
        localStorage.setItem('currentUser', JSON.stringify(user));
        
        // অটো রিফ্রেশ সেটআপ করুন
        setupTokenRefresh();
        
        // UI আপডেট করুন
        checkLoginStatus();
    }
    
    // ইউজার অ্যাক্টিভিটি ট্র্যাক করার জন্য
    let userActivityTimer;
    
    // ইউজার অ্যাক্টিভিটি রিসেট করুন
    function resetUserActivity() {
        if (userActivityTimer) {
            clearTimeout(userActivityTimer);
        }
        
        // ৩০ মিনিট নিষ্ক্রিয় থাকলে সতর্কতা দিন
        userActivityTimer = setTimeout(() => {
            const token = localStorage.getItem('authToken');
            if (token) {
                showNotification('আপনি দীর্ঘক্ষণ নিষ্ক্রিয় রয়েছেন। অ্যাক্টিভ থাকার জন্য পেজে ক্লিক করুন।', 'error');
            }
        }, 30 * 60 * 1000); // ৩০ মিনিট
    }
    
    // ইউজার অ্যাক্টিভিটি ইভেন্ট লিস্টেনার
    function setupUserActivityTracking() {
        const events = ['mousedown', 'mousemove', 'keypress', 'scroll', 'touchstart', 'click'];
        
        events.forEach(event => {
            document.addEventListener(event, resetUserActivity, true);
        });
        
        // প্রথম বার সেটআপ
        resetUserActivity();
    }
    
    // When the page loads - মূল ইনিশিয়ালাইজেশন
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize the page
        toggleForm('login');
        
        // Set up OTP input fields for automatic focus
        const otpInputs = document.querySelectorAll('.otp-digit');
        
        for (let i = 0; i < otpInputs.length; i++) {
            otpInputs[i].addEventListener('input', function() {
                if (this.value.length === 1) {
                    if (i < otpInputs.length - 1) {
                        otpInputs[i + 1].focus();
                    }
                }
            });
            
            otpInputs[i].addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && this.value.length === 0) {
                    if (i > 0) {
                        otpInputs[i - 1].focus();
                    }
                }
            });
        }
        
        // Set up event listeners for password toggle buttons
        const passwordToggleButtons = document.querySelectorAll('.toggle-password');
        passwordToggleButtons.forEach(button => {
            button.addEventListener('click', function() {
                const inputId = this.getAttribute('data-target');
                const toggleId = this.id;
                togglePasswordVisibility(inputId, toggleId);
            });
        });
        
        // Set up navigation buttons
        const goToEmailCheck = document.getElementById('goToEmailCheck');
        if (goToEmailCheck) {
            goToEmailCheck.addEventListener('click', function() {
                toggleForm('emailCheck');
            });
        }
        
        const goToLogin = document.getElementById('goToLogin');
        if (goToLogin) {
            goToLogin.addEventListener('click', function() {
                toggleForm('login');
            });
        }
        
        // Set up modal close button
        const closeModalBtn = document.getElementById('closeModal');
        if (closeModalBtn) {
            closeModalBtn.addEventListener('click', closeModal);
        }
        
        // লগইন পপআপ এবং ব্লার এফেক্ট
        const loginButton = document.querySelector('.login-button');
        const loginPopup = document.querySelector('.login-popup');
        const blurOverlay = document.querySelector('.blur-overlay');
        const closeLogin = document.querySelector('.close-login');
        
        // লগইন বাটনে ক্লিক করলে
        if (loginButton) {
            loginButton.addEventListener('click', function(e) {
                e.preventDefault();
                loginPopup.classList.add('active');
                blurOverlay.classList.add('active');
                document.body.style.overflow = 'hidden'; // স্ক্রল বন্ধ করুন
            });
        }
        
        // ক্লোজ বাটনে ক্লিক করলে
        if (closeLogin) {
            closeLogin.addEventListener('click', function() {
                loginPopup.classList.remove('active');
                blurOverlay.classList.remove('active');
                document.body.style.overflow = ''; // স্ক্রল চালু করুন
            });
        }
        
        // ব্লার ওভারলেতে ক্লিক করলে
        if (blurOverlay) {
            blurOverlay.addEventListener('click', function() {
                loginPopup.classList.remove('active');
                blurOverlay.classList.remove('active');
                document.body.style.overflow = ''; // স্ক্রল চালু করুন
            });
        }
        
        // লগআউট বাটন সেটআপ
        const logoutButton = document.getElementById('logoutButton');
        if (logoutButton) {
            logoutButton.addEventListener('click', async function(e) {
                e.preventDefault();
                
                try {
                    const token = localStorage.getItem('authToken');
                    
                    if (token) {
                        // লগআউট API কল
                        const response = await fetch(`${DB_API_URL}/logout`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Authorization': `Bearer ${token}`
                            }
                        });
                        
                        const data = await response.json();
                        
                        if (data.success) {
                            // সফল লগআউট
                            showNotification(data.message || 'আপনি সফলভাবে লগআউট করেছেন।', 'success');
                        } else {
                            showNotification(data.message || 'লগআউট করতে সমস্যা হয়েছে।', 'error');
                        }
                    }
                } catch (error) {
                    console.error('Logout error:', error);
                } finally {
                    // সেশন স্টোরেজ থেকে উসার ডেটা মুছুন
                    localStorage.removeItem('authToken');
                    localStorage.removeItem('currentUser');
                    
                    // ইন্টারভাল ক্লিয়ার করুন
                    if (tokenRefreshInterval) {
                        clearInterval(tokenRefreshInterval);
                        tokenRefreshInterval = null;
                    }
                    
                    // অ্যাক্টিভিটি ট্র্যাকিং বন্ধ করুন
                    if (userActivityTimer) {
                        clearTimeout(userActivityTimer);
                    }
                    
                    // লগইন স্টেটাস আপডেট করুন
                    checkLoginStatus();
                }
            });
        }
        
        // পেজ লোড হওয়ার সময় লগইন স্টেটাস চেক করুন
        checkLoginStatus();
        
        // ইউজার অ্যাক্টিভিটি ট্র্যাকিং সেটআপ করুন
        setupUserActivityTracking();
        
        // পেজ বন্ধ হওয়ার আগে ক্লিনআপ
        window.addEventListener('beforeunload', function() {
            if (tokenRefreshInterval) {
                clearInterval(tokenRefreshInterval);
            }
            if (userActivityTimer) {
                clearTimeout(userActivityTimer);
            }
        });
        
        // ভিজিবিলিটি চেঞ্জ হ্যান্ডলার
        document.addEventListener('visibilitychange', function() {
            if (!document.hidden) {
                // পেজ ভিজিবল হলে লগইন স্টেটাস চেক করুন
                checkLoginStatus();
            }
        });
    });
    
</script>       -->

        

        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <!-- * এই স্ক্রিপ্টটি ইউজার ইমেইল যাচাই, OTP পাঠানো ও যাচাইকরণ,  -->
        <!-- * রেজিস্ট্রেশন, এবং লগইন প্রক্রিয়া পরিচালনার জন্য ব্যবহৃত হয়। -->
                
        
        <!-- CSS স্টাইল - আপনার স্টাইলশিট ফাইলে যোগ করুন -->
        <style>
            .user-menu-container {
                position: relative;
                display: inline-block;
            }
            
            .profile-dropdown {
                display: none; /* ডিফল্টভাবে লুকানো থাকবে */
                position: relative;
            }
            
            .profile-icon {
                background: none;
                border: none;
                cursor: pointer;
                font-size: 24px;
                color: #6A35F2; /* আপনার ডিজাইন অনুযায়ী রঙ পরিবর্তন করুন */
                padding: 5px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .dropdown-menu1 {
                display: none;
                position: absolute;
                left: -100px;
                top: 99%;
                background-color: white;
                box-shadow: 0 8px 16px rgba(0,0,0,0.1);
                border-radius: 4px;
                width: 180px;
                z-index: 1000;
            }
            
            .profile-dropdown:hover .dropdown-menu1 {
                display: block;
            }
            
            .dropdown-item {
                display: block;
                padding: 5px 10px;
                text-decoration: none;
                color: #333;
                transition: background-color 0.2s;
            }
            
            .dropdown-item:hover {
                background-color: #f5f5f5;
            }
        </style>
        <!-- * এই স্ক্রিপ্টটি লোকাল স্টোরেজ ব্যবহার করে ব্যবহারকারীর লগইন ও লগআউট স্টেট ম্যানেজ করে। -->
        <!-- * - পেজ লোডে লগইন স্টেট চেক করে UI আপডেট করে -->
        <!-- * - লগইন ফর্ম সাবমিট হ্যান্ডল করে এবং ইউজার যাচাই করে -->
        <!-- * - সফল লগইনে লোকাল স্টোরেজে ইউজার ডেটা সংরক্ষণ করে -->
        <!-- * - লগআউটে ইউজার স্টেট রিসেট করে এবং UI আপডেট করে -->
        
        
        <!-- ভাষা পরিবর্তন -->
        <style>
            /* ভাষা পরিবর্তন বাটনের স্টাইল */
        .language-toggle {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 6px 12px;
            background-color: transparent;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .language-toggle:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        /* ডার্ক মোডের জন্য */
        .dark-mode .language-toggle {
            border-color: #444;
            color: #f5f5f5;
        }
        
        .dark-mode .language-toggle:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        /* গ্লোব আইকন স্টাইল */
        .language-toggle .fas.fa-globe {
            color:  #6A35F2;
            margin-right: 5px;
        }
        
        /* ভাষা পরিবর্তনের অ্যানিমেশন */
        .language-toggle.animating span {
            animation: fadeInOut 0.5s ease;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 1; }
            50% { opacity: 0; }
            100% { opacity: 1; }
        }
        
        /* রেসপনসিভ স্টাইল - মোবাইল */
        @media (max-width: 768px) {
            .language-toggle span {
                display: none; /* মোবাইলে শুধু আইকন দেখানো */
            }
            
            .language-toggle {
                padding: 6px;
            }
            
            .language-toggle .fas.fa-globe {
                margin-right: 0;
            }
        }
        </style>
        <!--* ভাষা পরিবর্তন -->
        <script>
            // ভাষা পরিবর্তন ফাংশনালিটি
        document.addEventListener('DOMContentLoaded', function() {
            // ভাষা বাটন সিলেক্ট করা
            const languageToggle = document.querySelector('.language-toggle');
            
            // ভাষা সেটিংস অবজেক্ট - সঠিক ম্যাপিং নিশ্চিত করা
            const languages = {
                'বাংলা': {
                    code: 'bn',
                    altLang: 'English',
                    translations: {
                        // নেভিগেশন আইটেমস
                        'হোম': 'Home',
                        'ব্লগ': 'Blog',
                        'আমাদের সম্পর্কে': 'About Us',
                        'কোর্স': 'Courses',
                        'সকল কোর্স': 'All Courses',
                        'লাইভ কোর্স': 'Live Courses',
                        'বই': 'Books',
                        'শিক্ষক': 'Teachers',
                        'উপদেষ্টা': 'Advisors',
                        'যোগাযোগ': 'Contact',
                        'কোর্স সার্চ করুন...': 'Search courses...',
                        'লগইন': 'Login',
                        'প্রোফাইল': 'Profile',
                        'আমার কোর্স': 'My Courses',
                        'লগআউট': 'Logout',
                        
                        // হিরো সেকশন
                        'বিশেষজ্ঞ প্রশিক্ষকদের সাথে অনলাইনে নতুন দক্ষতা শিখুন': 'Learn new skills online with expert trainers',
                        'ইলম ও দক্ষতার সমন্বয়ে গড়ে তুলুন আপনার দ্বীনি ও দুনিয়াদার পরিপূর্ণ জীবন—বিশ্বস্ত আলেম ও প্রশিক্ষকদের তত্ত্বাবধানে অনলাইনে শিখুন কোরআন, হাদীস, আরবি ভাষা ও সমকালীন প্রয়োগযোগ্য জ্ঞান।': 'Build your complete religious and worldly life through a combination of knowledge and skills—learn the Quran, Hadith, Arabic language, and contemporary practical knowledge online under the supervision of trusted scholars and instructors',
                        'কোর্স অন্বেষণ করুন': 'Explore Courses',
                        'বিনামূল্যে যোগ দিন': 'Join for Free',
                        'আপনি কি শিখতে চান?': 'What do you want to learn?',
                        'আমাদের থেকে সব বিষয়ে শিখতে পারেন': 'You can learn everything from us',
                            // কোর্স ক্যাটাগরি
                        'কুরআন': 'Quran',
                        'হাদিস': 'Hadith',
                        'ফিকহ': 'Fiqh',
                        'আরবি': 'Arabic',
                        'তাফসির': 'Tafsir',
                        'ইসলামিক স্টাডিজ': 'Islamic Studies',
                        '১২০ কোর্স': '120 Course',
                        '৮৫ কোর্স': '85 Course',
                        '৬৫ কোর্স': '65 Course',
                        '৪২ কোর্স': '42 Course',
                        '৫৩ কোর্স': '53 Course',
                        '৭৮ কোর্স': '78 Course',
                        // কোর্স কার্ড
                        "কুরআন ও তাজবিদ": "Qur'an and Tajweed",
                        "বিশ্বস্ত ক্বারিদের তত্ত্বাবধানে শুদ্ধ তাজবিদসহ কুরআন শিখুন সহজে ও সঠিকভাবে।": "Learn the Qur'an accurately and easily with proper Tajweed under the supervision of trusted Qaris.",
                        "দাওয়াহমুখী প্ল্যাটফর্ম": "Dawah-Oriented Platform",
                        "দ্বীনের দাওয়াহ ও জ্ঞানের সমন্বয়ে গড়ে উঠুক আপনার সচেতন ঈমানি পরিচয়।": "Build your conscious Islamic identity through a combination of Dawah and Islamic knowledge.",
                        "তালিমুল ইসলাম একাডেমী": "Talimul Islam Academy",
                        "বিশুদ্ধ দ্বীনি শিক্ষায় জীবন আলোকিত করতে তালিমুল ইসলাম একাডেমীর কোর্সে ভর্তি হন।": "Enroll in courses from Talimul Islam Academy to enlighten your life with authentic Islamic education.",
                        "আমাদের মাদ্রাসা কোর্সসমূহ": "Our Madrasa Courses",
                        "সর্বাধুনিক পদ্ধতিতে মাদ্রাসা শিক্ষা গ্রহণ করুন অনলাইনে": "Learn Madrasa Education Online in a Modern Way",
                        "বেসিক": "Basic",
                        "মাওলানা আব্দুল্লাহ": "Maulana Abdullah",
                        "বিশুদ্ধ তাজবিদসহ কুরআন শিক্ষার মাধ্যমে আধ্যাত্মিক উন্নতি অর্জন করুন।": "Achieve spiritual growth through Quran learning with proper Tajweed",
                        "১৮ অধ্যায়": "18 Chapters",
                        "৩৫০ শিক্ষার্থী": "350 Students",
                        "৪.৮": "4.8",
                        "৳৩,৫০০": "৳3,500",
                        "৳৪,৫০০": "৳4,500",
                        "কার্টে যোগ করুন": "Add to Cart",
                        "কিনুন": "Buy Now",
                        "মধ্যবর্তী": "Intermediate",
                        "মাওলানা ইব্রাহিম": "Maulana Ibrahim",
                        "হাদিসের সঠিক ব্যাখ্যা ও বিশ্লেষণ শিখুন, নবীর (সাঃ) জীবন থেকে শিক্ষা নিন।": "Learn accurate Hadith interpretation and gain lessons from the Prophet's (SAW) life.",
                        "১২ অধ্যায়": "12 Chapters",
                        "২৪০ শিক্ষার্থী": "240 Students",
                        "৪.৯": "4.9",
                        "৳২,৮০০": "৳2,800",
                        "মাওলানা জাকির": "Maulana Zakir",
                        "ইসলামী আইন ও জীবন বিধান শিখে আপনার দৈনন্দিন জীবনে সঠিক সিদ্ধান্ত নিন।": "Learn Islamic laws and guidelines to make proper decisions in daily life.",
                        "২০ অধ্যায়": "20 Chapters",
                        "৪২০ শিক্ষার্থী": "420 Students",
                        "৪.৭": "4.7",
                        "৳৪,২০০": "৳4,200",
                        "৳৫,০০০": "৳5,000",
                        "অ্যাডভান্সড": "Advanced",
                        "মাওলানা রফিক": "Maulana Rafiq",
                        "আরবি ভাষার গভীরে প্রবেশ করুন, কুরআন ও হাদিস বুঝতে পারদর্শী হন।": "Dive deep into Arabic to master understanding of the Quran and Hadith.",
                        "১৪ অধ্যায়": "14 Chapters",
                        "১৮০ শিক্ষার্থী": "180 Students",
                        "৪.৬": "4.6",
                        "৳৪,৮০০": "৳4,800",
                        "৳৫,৫০০": "৳5,500",
                        "মাওলানা সালেহ": "Maulana Saleh",
                        "কুরআনের তাফসির শিখে আল্লাহর কালামকে গভীরভাবে বুঝুন এবং জীবনে প্রয়োগ করুন।": "Learn Quranic Tafsir to deeply understand Allah's words and apply them in life.",
                        "১৬ অধ্যায়": "16 Chapters",
                        "২৮০ শিক্ষার্থী": "280 Students",
                        "৩.৮": "3.8",
                        "হাদিস কোর্স বিস্তারিত": "Hadith Course Details",
                        "মধ্যবর্তী": "Intermediate",
                        "শিক্ষক": "Instructor",
                        "মাওলানা সালেহ": "Maulana Saleh",
                        "কুরআনের তাফসির শিখে আল্লাহর কালামকে গভীরভাবে বুঝুন এবং জীবনে প্রয়োগ করুন।": "Learn the Tafsir of the Qur'an, understand Allah's words deeply, and apply them in life.",
                        "১৬ অধ্যায়": "16 Chapters",
                        "২৮০ শিক্ষার্থী": "280 Students",
                        "৪.৮": "4.8",
                        "৳৩,৮০০": "৳3,800",
                        "৳৪,৫০০": "৳4,500",
                        "কার্টে যোগ করুন": "Add to Cart",
                        "কিনুন": "Buy",
                        "সীরাত কোর্স বিস্তারিত": "Seerah Course Details",
                        "বেসিক": "Basic",
                        "মাওলানা আতিকুল্লাহ": "Maulana Atikullah",
                        "ইসলামী ইতিহাস, সংস্কৃতি ও শাস্ত্রের সঠিক জ্ঞান অর্জন করুন একটি বৈজ্ঞানিক দৃষ্টিভঙ্গি থেকে।": "Gain accurate knowledge of Islamic history, culture, and scriptures from a scientific perspective.",
                        "১৫ অধ্যায়": "15 Chapters",
                        "২৫০ শিক্ষার্থী": "250 Students",
                        "৪.৭": "4.7",
                        "৳৩,৬০০": "৳3,600",
                        "৳৪,২০০": "৳4,200",
                        "ইসলামিক আখলাক ও আদব কোর্স বিস্তারিত": "Islamic Morals and Etiquette Course Details",
                        "মাওলানা হাসান": "Maulana Hasan",
                        "সঠিক বিশ্বাস ও তাওহিদের মৌলিক শিক্ষা গ্রহণ করে ঈমানকে দৃঢ় করুন।": "Strengthen your faith by learning the fundamentals of correct belief and Tawheed.",
                        "২২০ শিক্ষার্থী": "220 Students",
                        "৳২,৯০০": "৳2,900",
                        "৳৩,৫০০": "৳3,500",
                        "সীরাত কোর্স বিস্তারিত": "Seerah Course Details",
                        "সীরাত কোর্স": "Seerah Course",
                        "বেসিক": "Basic",
                        "শিক্ষক": "Instructor",
                        "মাওলানা আতিকুল্লাহ": "Maulana Atikullah",
                        "ইসলামী ইতিহাস, সংস্কৃতি ও শাস্ত্রের সঠিক জ্ঞান অর্জন করুন একটি বৈজ্ঞানিক দৃষ্টিভঙ্গি               থেকে।": "Gain accurate knowledge of Islamic history, culture, and scriptures from a               scientific perspective.",
                        "১৫ অধ্যায়": "15 Chapters",
                        "২৫০ শিক্ষার্থী": "250 Students",
                        "৪.৭": "4.7",
                        "৳৩,৬০০": "৳3,600",
                        "৳৪,২০০": "৳4,200",
                        "কার্টে যোগ করুন": "Add to Cart",
                        "কিনুন": "Buy",
                        "ইসলামিক আখলাক ও আদব কোর্স বিস্তারিত": "Islamic Morality and Etiquette Course Details",
                        "ইসলামিক আখলাক ও আদব কোর্স": "Islamic Morality and Etiquette Course",
                        "বেসিক": "Beginner",
                        "শিক্ষক": "Instructor",
                        "মাওলানা হাসান": "Maulana Hasan",
                        "প্রিয় নবী মুহাম্মাদ (সা.)-এর জীবনচরিত শিখে আদর্শ মুসলিম হিসেবে গড়ে উঠুন।": "Learn about the life of our beloved Prophet Muhammad (PBUH) and become an ideal Muslim.",
                        "১৬ অধ্যায়": "16 Chapters",
                        "২২০ শিক্ষার্থী": "220 Students",
                        "৪.৮": "4.8",
                        "৳২,৯০০": "৳2,900",
                        "৳৩,৫০০": "৳3,500",
                        "কার্টে যোগ করুন": "Add to Cart",
                        "কিনুন": "Buy Now",
                        "ইসলামিক আখলাক ও আদব কোর্স বিস্তারিত": "Islamic Morality and Etiquette Course Details",
                        "ইসলামিক আখলাক ও আদব কোর্স": "Islamic Morality and Etiquette Course",
                        "বেসিক": "Beginner",
                        "শিক্ষক": "Instructor",
                        "মাওলানা হাসান": "Maulana Hasan",
                        "নৈতিকতা ও চরিত্র গঠনের ইসলামী শিক্ষায় নিজের ব্যক্তিত্ব উন্নত করুন।": "Enhance your personality through Islamic teachings on ethics and character building.",
                        "১৬ অধ্যায়": "16 Chapters",
                        "২২০ শিক্ষার্থী": "220 Students",
                        "৪.৮": "4.8",
                        "৳২,৯০০": "৳2,900",
                        "৳৩,৫০০": "৳3,500",
                        "কার্টে যোগ করুন": "Add to Cart",
                        "কিনুন": "Buy Now",
                        "ইসলামিক আখলাক ও আদব কোর্স বিস্তারিত": "Islamic Morality and Etiquette Course Details",
                        "ইসলামিক আখলাক ও আদব কোর্স": "Islamic Morality and Etiquette Course",
                        "বেসিক": "Beginner",
                        "শিক্ষক": "Instructor",
                        "মাওলানা হাসান": "Maulana Hasan",
                        "ইসলামের শান্তির বার্তা ছড়িয়ে দিতে দাওয়াহর সঠিক পদ্ধতি ও জ্ঞান অর্জন করুন।": "Acquire the proper method and knowledge of Dawah to spread Islam's message of peace.",
                        "১৬ অধ্যায়": "16 Chapters",
                        "২২০ শিক্ষার্থী": "220 Students",
                        "৪.৮": "4.8",
                        "৳২,৯০০": "৳2,900",
                        "৳৩,৫০০": "৳3,500",
                        "কার্টে যোগ করুন": "Add to Cart",
                        "কিনুন": "Buy Now",
                        "আরো দেখুন": "See More",
                        "সংকুচিত করুন": "Collapse",
                        'কেন মাদ্রাসা অনলাইন বেছে নিবেন': 'Why Choose Madrasa Online',
                        'বাংলাদেশ থেকে শুরু, লক্ষ্য বিশ্বজুড়ে ইসলামী শিক্ষা ছড়িয়ে দেওয়া।': 'Starting from Bangladesh, aiming to spread Islamic education worldwide.',
                        'সম্পূর্ণ পাঠ্যক্রম': 'Comprehensive Curriculum',
                        '১ম শ্রেণী থেকে দাওরায়ে হাদীস পর্যন্ত সম্পূর্ণ মাদ্রাসা পাঠ্যক্রমে প্রবেশাধিকার পান।': 'Access the full madrasa curriculum from Grade 1 to Dawra-e-Hadith.',
                        'যোগ্য শিক্ষকগণ': 'Qualified Teachers',
                        'অভিজ্ঞ এবং প্রত্যয়িত শিক্ষকদের কাছ থেকে শিখুন যাদের শিক্ষাদান অভিজ্ঞতা বছরের পর বছর।': 'Learn from experienced and certified teachers with years of teaching expertise.',
                        'নমনীয় শিক্ষা': 'Flexible Learning',
                        'আপনার নিজের গতিতে নিজের সময়ে অধ্যয়ন করুন। ক্রয়কৃত কোর্সগুলিতে আজীবন অ্যাক্সেস।': 'Study at your own pace, on your own schedule. Lifetime access to purchased courses.',
                        'সহায়ক সম্প্রদায়': 'Supportive Community',
                        'আপনার শিক্ষা সম্প্রদায়ে অন্যান্য শিক্ষার্থী এবং শিক্ষকদের সাথে সংযোগ করুন।': 'Connect with other students and teachers in your learning community.',
                        'আমাদের শিক্ষার্থীরা কী বলেন?': 'What Our Students Say',
                        'আমাদের প্ল্যাটফর্ম কীভাবে বদলে দিয়েছে শিক্ষার্থীদের ইসলামী জীবনধারা, তা জানুন।': 'Discover how our platform has transformed students’ Islamic lifestyle.',
                        'আহমেদ র.': 'Ahmed R.',
                        'হিফজ কোর্স শিক্ষার্থী': 'Hifz Course Student',
                        'পাঠ্যক্রমটি ব্যাপক এবং সুসংহত। আমি পূর্ণ সময়ের কাজ করার সময় আমার কোরআন শিক্ষা চালিয়ে যেতে পারি। শিক্ষকরা অত্যন্ত জ্ঞানী এবং সহায়ক।': 'The curriculum is comprehensive and structured. I can continue my Quranic studies while working full-time. The teachers are very knowledgeable and helpful.',
                        'ফাতিমা হ.': 'Fatima H.',
                        'আরবি ভাষা শিক্ষার্থী': 'Arabic Language Student',
                        'নিয়মিত স্কুলের একজন শিক্ষার্থী হিসাবে, আমি এখন আমার একাডেমিক পড়াশুনার পাশাপাশি দ্বীনও শিখতে পারি। প্লাটফর্মটি ব্যবহার করা খুব সহজ!': 'As a regular school student, I can now learn Deen alongside my academic studies. The platform is very easy to use!',
                        'মোহাম্মদ র.': 'Mohammad R.',
                        'দাওরায়ে হাদীস শিক্ষার্থী': 'Dawra-e-Hadith Student',
                        'দাওরা শ্রেণীর পাঠ্যক্রম অসাধারণ। জ্ঞানের গভীরতা এবং শিক্ষার গুণমান এমন যে আমি ভৌত ক্লাসরুমে যে উপকার পেতাম তা আমি এখানে পাচ্ছি।': 'The Dawra curriculum is excellent. The depth of knowledge and quality of teaching is comparable to what I’d receive in a physical classroom.',
                        'রাফিয়া আ.': 'Rafia A.',
                        'ফিকাহ কোর্স শিক্ষার্থী': 'Fiqh Course Student',
                        'অনলাইন কোর্সগুলি আমার দ্বীনি শিক্ষার যাত্রায় অপরিহার্য হয়ে উঠেছে। ঘরে বসে এরকম গুণমান সম্পন্ন শিক্ষা পাওয়া অসাধারণ।': 'Online courses have become essential in my journey of Islamic learning. Receiving such high-quality education from home is amazing.',
                        'মাদ্রাসা শিক্ষা': 'Madrasa Shiksha',
                        'আধুনিক পদ্ধতিতে ইসলামিক শিক্ষা এবং আরবি ভাষা শেখার জন্য আমাদের কোর্সগুলোতে আপনাকে স্বাগতম।': 'Welcome to our courses for learning Islamic education and Arabic language through modern methods.',
                        'ফেসবুক': 'Facebook',
                        'টুইটার': 'Twitter',
                        'ইন্সটাগ্রাম': 'Instagram',
                        'ইউটিউব': 'YouTube',
                        'দ্রুত লিংক': 'Quick Links',
                        'হোম': 'Home',
                        'আমাদের সম্পর্কে': 'About Us',
                        'সকল কোর্স': 'All Courses',
                        'শিক্ষকমণ্ডলী': 'Faculty',
                        'ক্লাস সময়সূচি': 'Class Schedule',
                        'যোগাযোগ': 'Contact',
                        'জনপ্রিয় কোর্স': 'Popular Courses',
                        'কোরআন তেলাওয়াত': 'Quran Recitation',
                        'হাদিস শিক্ষা': 'Hadith Studies',
                        'আরবি ভাষা': 'Arabic Language',
                        'ফিকাহ শিক্ষা': 'Fiqh Studies',
                        'তাজবিদ': 'Tajweed',
                        'ইসলামিক ইতিহাস': 'Islamic History',
                        'নিউজলেটার': 'Newsletter',
                        'নিউজলেটার সাবস্ক্রাইব করুন': 'Subscribe to the Newsletter',
                        'আপনার ইমেইল': 'Your email',
                        'সাবস্ক্রাইব': 'Subscribe',
                        'ঠিকানা: আজিমপুর, ঢাকা-১২০৫': 'Address: Azimpur, Dhaka-1205',
                        'ফোন: +৮৮০১৯১১-৫৬৭৮৯০': 'Phone: +8801911-567890',
                        'ইমেইল: info@madrasa-shikkha.com': 'Email: info@madrasa-shikkha.com',
                        '© ২০২৫ মাদ্রাসা শিক্ষা। সমস্ত অধিকার সংরক্ষিত।': '© 2025 Madrasa Shiksha. All rights reserved.',
                        'প্রাইভেসি পলিসি': 'Privacy Policy',
                        'টার্মস অফ সার্ভিস': 'Terms of Service',
                        'কোর্স নীতিমালা': 'Course Policy'
                        
                        
                    }
                },
                'English': {
                    code: 'en',
                    altLang: 'বাংলা',
                    translations: {
                        // নেভিগেশন আইটেমস
                        'Home': 'হোম',
                        'Blog': 'ব্লগ',
                        'About Us': 'আমাদের সম্পর্কে',
                        'Courses': 'কোর্স',
                        'All Courses': 'সকল কোর্স',
                        'Live Courses': 'লাইভ কোর্স',
                        'Books': 'বই',
                        'Teachers': 'শিক্ষক',
                        'Advisors': 'উপদেষ্টা',
                        'Contact': 'যোগাযোগ',
                        'Search courses...': 'কোর্স সার্চ করুন...',
                        'Login': 'লগইন',
                        'Profile': 'প্রোফাইল',
                        'My Courses': 'আমার কোর্স',
                        'Logout': 'লগআউট',
                        
                        // হিরো সেকশন
                        'Learn new skills online with expert trainers': 'বিশেষজ্ঞ প্রশিক্ষকদের সাথে অনলাইনে নতুন দক্ষতা শিখুন',
                        'Build your complete religious and worldly life through a combination of knowledge and skills—learn the Quran, Hadith, Arabic language, and contemporary practical knowledge online under the supervision of trusted scholars and instructors': 'ইলম ও দক্ষতার সমন্বয়ে গড়ে তুলুন আপনার দ্বীনি ও দুনিয়াদার পরিপূর্ণ জীবন—বিশ্বস্ত আলেম ও প্রশিক্ষকদের তত্ত্বাবধানে অনলাইনে শিখুন কোরআন, হাদীস, আরবি ভাষা ও সমকালীন প্রয়োগযোগ্য জ্ঞান।',
                        'Explore Courses': 'কোর্স অন্বেষণ করুন',
                        'Join for Free': 'বিনামূল্যে যোগ দিন',
                        'What do you want to learn?': 'আপনি কি শিখতে চান?',
                        'You can learn everything from us': 'আমাদের থেকে সব বিষয়ে শিখতে পারেন',
                            // কোর্স ক্যাটাগরি
                        'Quran': 'কুরআন',
                        'Hadith': 'হাদিস',
                        'Fiqh': 'ফিকহ',
                        'Arabic': 'আরবি',
                        'Tafsir': 'তাফসির',
                        'Islamic Studies': 'ইসলামিক স্টাডিজ',
                        '120 Course': '১২০ কোর্স',
                        '85 Course': '৮৫ কোর্স',
                        '65 Course': '৬৫ কোর্স',
                        '42 Course': '৪২ কোর্স',
                        '53 Course': '৫৩ কোর্স',
                        '78 Course': '৭৮ কোর্স',
                        // কোর্স কার্ড
                        "Qur'an and Tajweed": "কুরআন ও তাজবিদ",
                        "Learn the Qur'an accurately and easily with proper Tajweed under the supervision of trusted Qaris.": "বিশ্বস্ত ক্বারিদের তত্ত্বাবধানে শুদ্ধ তাজবিদসহ কুরআন শিখুন সহজে ও সঠিকভাবে।",
                        "Dawah-Oriented Platform": "দাওয়াহমুখী প্ল্যাটফর্ম",
                        "Build your conscious Islamic identity through a combination of Dawah and Islamic knowledge.": "দ্বীনের দাওয়াহ ও জ্ঞানের সমন্বয়ে গড়ে উঠুক আপনার সচেতন ঈমানি পরিচয়।",
                        "Talimul Islam Academy": "তালিমুল ইসলাম একাডেমী",
                        "Enroll in courses from Talimul Islam Academy to enlighten your life with authentic Islamic education.": "বিশুদ্ধ দ্বীনি শিক্ষায় জীবন আলোকিত করতে তালিমুল ইসলাম একাডেমীর কোর্সে ভর্তি হন।",
                        "Our Madrasa Courses": "আমাদের মাদ্রাসা কোর্সসমূহ",
                        "Learn Madrasa Education Online in a Modern Way": "সর্বাধুনিক পদ্ধতিতে মাদ্রাসা শিক্ষা গ্রহণ করুন অনলাইনে",
                        "Basic": "বেসিক",
                        "Maulana Abdullah": "মাওলানা আব্দুল্লাহ",
                        "Achieve spiritual growth through Quran learning with proper Tajweed": "বিশুদ্ধ তাজবিদসহ কুরআন শিক্ষার মাধ্যমে আধ্যাত্মিক উন্নতি অর্জন করুন।",
                        "18 Chapters": "১৮ অধ্যায়",
                        "350 Students": "৩৫০ শিক্ষার্থী",
                        "4.8": "৪.৮",
                        "৳3,500": "৳৩,৫০০",
                        "৳4,500": "৳৪,৫০০",
                        "Add to Cart": "কার্টে যোগ করুন",
                        "Buy Now": "কিনুন",
                        "Intermediate": "মধ্যবর্তী",
                        "Maulana Ibrahim": "মাওলানা ইব্রাহিম",
                        "Learn accurate Hadith interpretation and gain lessons from the Prophet's (SAW) life.": "হাদিসের সঠিক ব্যাখ্যা ও বিশ্লেষণ শিখুন, নবীর (সাঃ) জীবন থেকে শিক্ষা নিন।",
                        "12 Chapters": "১২ অধ্যায়",
                        "240 Students": "২৪০ শিক্ষার্থী",
                        "4.9": "৪.৯",
                        "৳2,800": "৳২,৮০০",
                        "Maulana Zakir": "মাওলানা জাকির",
                        "Learn Islamic laws and guidelines to make proper decisions in daily life.": "ইসলামী আইন ও জীবন বিধান শিখে আপনার দৈনন্দিন জীবনে সঠিক সিদ্ধান্ত নিন।",
                        "20 Chapters": "২০ অধ্যায়",
                        "420 Students": "৪২০ শিক্ষার্থী",
                        "4.7": "৪.৭",
                        "৳4,200": "৳৪,২০০",
                        "৳5,000": "৳৫,০০০",
                        "Advanced": "অ্যাডভান্সড",
                        "Maulana Rafiq": "মাওলানা রফিক",
                        "Dive deep into Arabic to master understanding of the Quran and Hadith.": "আরবি ভাষার গভীরে প্রবেশ করুন, কুরআন ও হাদিস বুঝতে পারদর্শী হন।",
                        "14 Chapters": "১৪ অধ্যায়",
                        "180 Students": "১৮০ শিক্ষার্থী",
                        "4.6": "৪.৬",
                        "৳4,800": "৳৪,৮০০",
                        "৳5,500": "৳৫,৫০০",
                        "Maulana Saleh": "মাওলানা সালেহ",
                        "Learn Quranic Tafsir to deeply understand Allah's words and apply them in life.": "কুরআনের তাফসির শিখে আল্লাহর কালামকে গভীরভাবে বুঝুন এবং জীবনে প্রয়োগ করুন।",
                        "16 Chapters": "১৬ অধ্যায়",
                        "280 Students": "২৮০ শিক্ষার্থী",
                        "3.8": "৩.৮",
                        "Hadith Course Details": "হাদিস কোর্স বিস্তারিত",
                        "Intermediate": "মধ্যবর্তী",
                        "Instructor": "শিক্ষক",
                        "Maulana Saleh": "মাওলানা সালেহ",
                        "Learn the Tafsir of the Qur'an, understand Allah's words deeply, and apply them in life.": "কুরআনের তাফসির শিখে আল্লাহর কালামকে গভীরভাবে বুঝুন এবং জীবনে প্রয়োগ করুন।",
                        "16 Chapters": "১৬ অধ্যায়",
                        "280 Students": "২৮০ শিক্ষার্থী",
                        "4.8": "৪.৮",
                        "৳3,800": "৳৩,৮০০",
                        "৳4,500": "৳৪,৫০০",
                        "Add to Cart": "কার্টে যোগ করুন",
                        "Buy": "কিনুন",
                        "Seerah Course Details": "সীরাত কোর্স বিস্তারিত",
                        "Basic": "বেসিক",
                        "Maulana Atikullah": "মাওলানা আতিকুল্লাহ",
                        "Gain accurate knowledge of Islamic history, culture, and scriptures from a scientific perspective.": "ইসলামী ইতিহাস, সংস্কৃতি ও শাস্ত্রের সঠিক জ্ঞান অর্জন করুন একটি বৈজ্ঞানিক               দৃষ্টিভঙ্গি থেকে।",
                        "15 Chapters": "১৫ অধ্যায়",
                        "250 Students": "২৫০ শিক্ষার্থী",
                        "4.7": "৪.৭",
                        "৳3,600": "৳৩,৬০০",
                        "৳4,200": "৳৪,২০০",
                        "Islamic Morals and Etiquette Course Details": "ইসলামিক আখলাক ও আদব কোর্স বিস্তারিত",
                        "Maulana Hasan": "মাওলানা হাসান",
                        "Strengthen your faith by learning the fundamentals of correct belief and Tawheed.": "সঠিক বিশ্বাস ও তাওহিদের মৌলিক শিক্ষা গ্রহণ করে ঈমানকে দৃঢ় করুন।",
                        "220 Students": "২২০ শিক্ষার্থী",
                        "৳2,900": "৳২,৯০০",
                        "৳3,500": "৳৩,৫০০",
                        "Seerah Course Details": "সীরাত কোর্স বিস্তারিত",
                        "Seerah Course": "সীরাত কোর্স",
                        "Basic": "বেসিক",
                        "Instructor": "শিক্ষক",
                        "Maulana Atikullah": "মাওলানা আতিকুল্লাহ",
                        "Gain accurate knowledge of Islamic history, culture, and scriptures from a scientific perspective.": "ইসলামী ইতিহাস, সংস্কৃতি ও শাস্ত্রের সঠিক জ্ঞান অর্জন করুন একটি বৈজ্ঞানিক দৃষ্টিভঙ্গি থেকে।",
                        "15 Chapters": "১৫ অধ্যায়",
                        "250 Students": "২৫০ শিক্ষার্থী",
                        "4.7": "৪.৭",
                        "৳3,600": "৳৩,৬০০",
                        "৳4,200": "৳৪,২০০",
                        "Add to Cart": "কার্টে যোগ করুন",
                        "Buy": "কিনুন",
                        "Islamic Morality and Etiquette Course Details": "ইসলামিক আখলাক ও আদব কোর্স বিস্তারিত",
                        "Islamic Morality and Etiquette Course": "ইসলামিক আখলাক ও আদব কোর্স",
                        "Beginner": "বেসিক",
                        "Instructor": "শিক্ষক",
                        "Maulana Hasan": "মাওলানা হাসান",
                        "Learn about the life of our beloved Prophet Muhammad (PBUH) and become an ideal Muslim.": "প্রিয় নবী মুহাম্মাদ (সা.)-এর জীবনচরিত শিখে আদর্শ মুসলিম হিসেবে গড়ে উঠুন।",
                        "16 Chapters": "১৬ অধ্যায়",
                        "220 Students": "২২০ শিক্ষার্থী",
                        "4.8": "৪.৮",
                        "৳2,900": "৳২,৯০০",
                        "৳3,500": "৳৩,৫০০",
                        "Add to Cart": "কার্টে যোগ করুন",
                        "Buy Now": "কিনুন",
                        "Islamic Morality and Etiquette Course Details": "ইসলামিক আখলাক ও আদব কোর্স বিস্তারিত",
                        "Islamic Morality and Etiquette Course": "ইসলামিক আখলাক ও আদব কোর্স",
                        "Beginner": "বেসিক",
                        "Instructor": "শিক্ষক",
                        "Maulana Hasan": "মাওলানা হাসান",
                        "Enhance your personality through Islamic teachings on ethics and character building.": "নৈতিকতা ও চরিত্র গঠনের ইসলামী শিক্ষায় নিজের ব্যক্তিত্ব উন্নত করুন।",
                        "16 Chapters": "১৬ অধ্যায়",
                        "220 Students": "২২০ শিক্ষার্থী",
                        "4.8": "৪.৮",
                        "৳2,900": "৳২,৯০০",
                        "৳3,500": "৳৩,৫০০",
                        "Add to Cart": "কার্টে যোগ করুন",
                        "Buy Now": "কিনুন",
                        "Islamic Morality and Etiquette Course Details": "ইসলামিক আখলাক ও আদব কোর্স বিস্তারিত",
                        "Islamic Morality and Etiquette Course": "ইসলামিক আখলাক ও আদব কোর্স",
                        "Beginner": "বেসিক",
                        "Instructor": "শিক্ষক",
                        "Maulana Hasan": "মাওলানা হাসান",
                        "Acquire the proper method and knowledge of Dawah to spread Islam's message of peace.": "ইসলামের শান্তির বার্তা ছড়িয়ে দিতে দাওয়াহর সঠিক পদ্ধতি ও জ্ঞান অর্জন করুন।",
                        "16 Chapters": "১৬ অধ্যায়",
                        "220 Students": "২২০ শিক্ষার্থী",
                        "4.8": "৪.৮",
                        "৳2,900": "৳২,৯০০",
                        "৳3,500": "৳৩,৫০০",
                        "Add to Cart": "কার্টে যোগ করুন",
                        "Buy Now": "কিনুন",
                        "See More": "আরো দেখুন",
                        "Collapse": "সংকুচিত করুন",
                        'Why Choose Madrasa Online': 'কেন মাদ্রাসা অনলাইন বেছে নিবেন',
                        'Starting from Bangladesh, aiming to spread Islamic education worldwide.': 'বাংলাদেশ থেকে শুরু, লক্ষ্য বিশ্বজুড়ে ইসলামী শিক্ষা ছড়িয়ে দেওয়া।',
                        'Comprehensive Curriculum': 'সম্পূর্ণ পাঠ্যক্রম',
                        'Access the full madrasa curriculum from Grade 1 to Dawra-e-Hadith.': '১ম শ্রেণী থেকে দাওরায়ে হাদীস পর্যন্ত সম্পূর্ণ মাদ্রাসা পাঠ্যক্রমে প্রবেশাধিকার পান।',
                        'Qualified Teachers': 'যোগ্য শিক্ষকগণ',
                        'Learn from experienced and certified teachers with years of teaching expertise.': 'অভিজ্ঞ এবং প্রত্যয়িত শিক্ষকদের কাছ থেকে শিখুন যাদের শিক্ষাদান অভিজ্ঞতা বছরের পর বছর।',
                        'Flexible Learning': 'নমনীয় শিক্ষা',
                        'Study at your own pace, on your own schedule. Lifetime access to purchased courses.': 'আপনার নিজের গতিতে নিজের সময়ে অধ্যয়ন করুন। ক্রয়কৃত কোর্সগুলিতে আজীবন অ্যাক্সেস।',
                        'Supportive Community': 'সহায়ক সম্প্রদায়',
                        'Connect with other students and teachers in your learning community.': 'আপনার শিক্ষা সম্প্রদায়ে অন্যান্য শিক্ষার্থী এবং শিক্ষকদের সাথে সংযোগ করুন।',
                        'What Our Students Say': 'আমাদের শিক্ষার্থীরা কী বলেন?',
                        'Discover how our platform has transformed students’ Islamic lifestyle.': 'আমাদের প্ল্যাটফর্ম কীভাবে বদলে দিয়েছে শিক্ষার্থীদের ইসলামী জীবনধারা, তা জানুন।',
                        'Ahmed R.': 'আহমেদ র.',
                        'Hifz Course Student': 'হিফজ কোর্স শিক্ষার্থী',
                        'The curriculum is comprehensive and structured. I can continue my Quranic studies while working full-time. The teachers are very knowledgeable and helpful.': 'পাঠ্যক্রমটি ব্যাপক এবং সুসংহত। আমি পূর্ণ সময়ের কাজ করার সময় আমার কোরআন শিক্ষা চালিয়ে যেতে পারি। শিক্ষকরা অত্যন্ত জ্ঞানী এবং সহায়ক।',
                        'Fatima H.': 'ফাতিমা হ.',
                        'Arabic Language Student': 'আরবি ভাষা শিক্ষার্থী',
                        'As a regular school student, I can now learn Deen alongside my academic studies. The platform is very easy to use!': 'নিয়মিত স্কুলের একজন শিক্ষার্থী হিসাবে, আমি এখন আমার একাডেমিক পড়াশুনার পাশাপাশি দ্বীনও শিখতে পারি। প্লাটফর্মটি ব্যবহার করা খুব সহজ!',
                        'Mohammad R.': 'মোহাম্মদ র.',
                        'Dawra-e-Hadith Student': 'দাওরায়ে হাদীস শিক্ষার্থী',
                        'The Dawra curriculum is excellent. The depth of knowledge and quality of teaching is comparable to what I’d receive in a physical classroom.': 'দাওরা শ্রেণীর পাঠ্যক্রম অসাধারণ। জ্ঞানের গভীরতা এবং শিক্ষার গুণমান এমন যে আমি ভৌত ক্লাসরুমে যে উপকার পেতাম তা আমি এখানে পাচ্ছি।',
                        'Rafia A.': 'রাফিয়া আ.',
                        'Fiqh Course Student': 'ফিকাহ কোর্স শিক্ষার্থী',
                        'Online courses have become essential in my journey of Islamic learning. Receiving such high-quality education from home is amazing.': 'অনলাইন কোর্সগুলি আমার দ্বীনি শিক্ষার যাত্রায় অপরিহার্য হয়ে উঠেছে। ঘরে বসে এরকম গুণমান সম্পন্ন শিক্ষা পাওয়া অসাধারণ।',
                        'Madrasa Shiksha': 'মাদ্রাসা শিক্ষা',
                        'Welcome to our courses for learning Islamic education and Arabic language through modern methods.': 'আধুনিক পদ্ধতিতে ইসলামিক শিক্ষা এবং আরবি ভাষা শেখার জন্য আমাদের কোর্সগুলোতে আপনাকে স্বাগতম।',
                        'Facebook': 'ফেসবুক',
                        'Twitter': 'টুইটার',
                        'Instagram': 'ইন্সটাগ্রাম',
                        'YouTube': 'ইউটিউব',
                        'Quick Links': 'দ্রুত লিংক',
                        'Home': 'হোম',
                        'About Us': 'আমাদের সম্পর্কে',
                        'All Courses': 'সকল কোর্স',
                        'Faculty': 'শিক্ষকমণ্ডলী',
                        'Class Schedule': 'ক্লাস সময়সূচি',
                        'Contact': 'যোগাযোগ',
                        'Popular Courses': 'জনপ্রিয় কোর্স',
                        'Quran Recitation': 'কোরআন তেলাওয়াত',
                        'Hadith Studies': 'হাদিস শিক্ষা',
                        'Arabic Language': 'আরবি ভাষা',
                        'Fiqh Studies': 'ফিকাহ শিক্ষা',
                        'Tajweed': 'তাজবিদ',
                        'Islamic History': 'ইসলামিক ইতিহাস',
                        'Newsletter': 'নিউজলেটার',
                        'Subscribe to the Newsletter': 'নিউজলেটার সাবস্ক্রাইব করুন',
                        'Your email': 'আপনার ইমেইল',
                        'Subscribe': 'সাবস্ক্রাইব',
                        'Address: Azimpur, Dhaka-1205': 'ঠিকানা: আজিমপুর, ঢাকা-১২০৫',
                        'Phone: +8801911-567890': 'ফোন: +৮৮০১৯১১-৫৬৭৮৯০',
                        'Email: info@madrasa-shikkha.com': 'ইমেইল: info@madrasa-shikkha.com',
                        '© 2025 Madrasa Shiksha. All rights reserved.': '© ২০২৫ মাদ্রাসা শিক্ষা। সমস্ত অধিকার সংরক্ষিত।',
                        'Privacy Policy': 'প্রাইভেসি পলিসি',
                        'Terms of Service': 'টার্মস অফ সার্ভিস',
                        'Course Policy': 'কোর্স নীতিমালা',
                    }
                }
            };
            
            // ভাষা পরিবর্তন করার ফাংশন
            function changeLanguage(event) {
                // একাধিক ক্লিক প্রতিরোধ করার জন্য
                event.preventDefault();
                
                // বর্তমানে ক্লিক হ্যান্ডলার সাময়িকভাবে অক্ষম করা
                languageToggle.removeEventListener('click', changeLanguage);
                
                const currentLangSpan = languageToggle.querySelector('span');
                const currentLang = currentLangSpan.textContent;
                const newLang = languages[currentLang].altLang;
                
                // ভাষা বাটন টেক্সট আপডেট করা (সারবস্তু পরিবর্তন)
                currentLangSpan.textContent = newLang;
                
                // DOM এলিমেন্টগুলো আপডেট
                updateLanguageElements(currentLang, newLang);
                
                // আনিমেশন ক্লাস যোগ করা
                languageToggle.classList.add('animating');
                setTimeout(() => {
                    languageToggle.classList.remove('animating');
                    // আনিমেশন শেষে ক্লিক হ্যান্ডলার পুনরায় সক্রিয় করা
                    languageToggle.addEventListener('click', changeLanguage);
                }, 500);
                
                // লোকাল স্টোরেজে ভাষা সেভ করা
                localStorage.setItem('preferredLanguage', newLang);
            }
            
            // DOM এলিমেন্টগুলো আপডেট করার ফাংশন
            function updateLanguageElements(fromLang, toLang) {
                // মেনু আইটেম আপডেট
                document.querySelectorAll('.menu-link').forEach(item => {
                    const originalText = item.textContent.replace(/\s+[\u25BC\u25BD\u25BE\u25BF\u2193]$/, '').trim();
                    
                    // ড্রপডাউন আইকন আছে কিনা চেক করা
                    const hasDropdownIcon = item.innerHTML.includes('fa-chevron-down');
                    
                    const translation = getTranslationForFullText(originalText, fromLang, toLang);
                    
                    // ড্রপডাউন আইকন সংরক্ষণ করা
                    if (hasDropdownIcon) {
                        item.innerHTML = translation + ' <i class="fas fa-chevron-down dropdown-toggle" style="font-size: 10px;"></i>';
                    } else {
                        item.textContent = translation;
                    }
                });
                
                // ড্রপডাউন মেনু আইটেম আপডেট
                document.querySelectorAll('.dropdown-link').forEach(item => {
                    const originalText = item.textContent.trim();
                    const translation = getTranslationForFullText(originalText, fromLang, toLang);
                    item.textContent = translation;
                });
                
                // সার্চ প্লেসহোল্ডার আপডেট
                const searchInput = document.querySelector('.search-input');
                if (searchInput) {
                    const originalPlaceholder = searchInput.placeholder;
                    searchInput.placeholder = getTranslationForFullText(originalPlaceholder, fromLang, toLang);
                }
                
                // লগইন বাটন আপডেট
                const loginButton = document.getElementById('loginButton');
                if (loginButton) {
                    const originalText = loginButton.textContent.trim();
                    loginButton.textContent = getTranslationForFullText(originalText, fromLang, toLang);
                }
                
                // ড্রপডাউন মেনু আইটেম আপডেট (প্রোফাইল মেনু)
                document.querySelectorAll('.dropdown-menu1 .dropdown-item').forEach(item => {
                    let originalText = item.textContent.trim();
                    
                    // লগআউট বাটনের জন্য আইকন বাদ দিয়ে
                    if (originalText.includes('লগআউট') || originalText.includes('Logout')) {
                        // আইকন বাদ দিয়ে টেক্সট বের করা
                        originalText = originalText.replace(/^\s*[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-.\/:;<=>?@\[\]^_`{|}~]+\s*/, '').trim();
                        originalText = originalText.includes('লগআউট') ? 'লগআউট' : 'Logout';
                        const translation = getTranslationForFullText(originalText, fromLang, toLang);
                        item.innerHTML = `<i class="fas fa-sign-out-alt"></i> ${translation}`;
                    } else {
                        const translation = getTranslationForFullText(originalText, fromLang, toLang);
                        item.textContent = translation;
                    }
                });
                
                // HTML এর lang অ্যাট্রিবিউট আপডেট
                document.documentElement.lang = languages[toLang].code;
                
                // ========== হিরো সেকশন আপডেট ==========
                // হিরো হেডিং আপডেট
                const heroHeading = document.querySelector('.hero-content h1');
                if (heroHeading) {
                    const originalText = heroHeading.textContent.trim();
                    heroHeading.textContent = getTranslationForFullText(originalText, fromLang, toLang);
                }
                
                // হিরো প্যারাগ্রাফ আপডেট
                const heroParagraph = document.querySelector('.hero-content p');
                if (heroParagraph) {
                    const originalText = heroParagraph.textContent.trim();
                    heroParagraph.textContent = getTranslationForFullText(originalText, fromLang, toLang);
                }
                
                // হিরো বাটন আপডেট
                document.querySelectorAll('.hero-content .buttons .btn').forEach(button => {
                    const originalText = button.textContent.trim();
                    button.textContent = getTranslationForFullText(originalText, fromLang, toLang);
                });
                
                // ========== শপিং কার্ট বাটন অংশ ==========
                // "কার্টে যোগ করুন" বাটন আপডেট - নতুন অংশ
                document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                    // আইকন সংরক্ষণ করার জন্য আমরা innerHTML ব্যবহার করছি
                    const iconHTML = button.innerHTML.match(/<i[^>]*>[^<]*<\/i>/);
                    let buttonText = button.textContent.trim();
                    
                    // বাংলায় হলে "কার্টে যোগ করুন", ইংরেজিতে "Add to Cart"
                    if (buttonText.includes('কার্টে যোগ করুন') || buttonText.includes('Add to Cart')) {
                        const baseText = buttonText.includes('কার্টে যোগ করুন') ? 'কার্টে যোগ করুন' : 'Add to Cart';
                        const translation = getTranslationForFullText(baseText, fromLang, toLang);
                        
                        // আইকন + অনুবাদিত টেক্সট দিয়ে আপডেট
                        if (iconHTML) {
                            button.innerHTML = `${iconHTML[0]} ${translation}`;
                        } else {
                            button.textContent = translation;
                        }
                    }
                });
        
                  // ========== শপিং কার্ট বাটন অংশ ==========
                // "কার্টে যোগ করুন" বাটন আপডেট - নতুন অংশ
                document.querySelectorAll('.see-more-btn').forEach(button => {
                    // আইকন সংরক্ষণ করার জন্য আমরা innerHTML ব্যবহার করছি
                    const iconHTML = button.innerHTML.match(/<i[^>]*>[^<]*<\/i>/);
                    let buttonText = button.textContent.trim();
                    
                    // বাংলায় হলে "কার্টে যোগ করুন", ইংরেজিতে "See More"t"
                    if (buttonText.includes('আরো দেখুন') || buttonText.includes('See More"')) {
                        const baseText = buttonText.includes('আরো দেখুন') ? 'আরো দেখুন' : 'See More"';
                        const translation = getTranslationForFullText(baseText, fromLang, toLang);
                        
                        // আইকন + অনুবাদিত টেক্সট দিয়ে আপডেট
                        if (iconHTML) {
                            button.innerHTML = `${iconHTML[0]} ${translation}`;
                        } else {
                            button.textContent = translation;
                        }
                    }
                });
        
        
                          // ========== শপিং কার্ট বাটন অংশ ==========
                // "কার্টে যোগ করুন" বাটন আপডেট - নতুন অংশ
                document.querySelectorAll('.footer-title').forEach(button => {
                    // আইকন সংরক্ষণ করার জন্য আমরা innerHTML ব্যবহার করছি
                    const iconHTML = button.innerHTML.match(/<i[^>]*>[^<]*<\/i>/);
                    let buttonText = button.textContent.trim();
                    
                    // বাংলায় হলে "কার্টে যোগ করুন", ইংরেজিতে "See More"t"
                    if (buttonText.includes('দ্রুত লিংক') || buttonText.includes('Quick Links')) {
                        const baseText = buttonText.includes('দ্রুত লিংক') ? 'দ্রুত লিংক' : 'Quick Links';
                        const translation = getTranslationForFullText(baseText, fromLang, toLang);
                        
                        // আইকন + অনুবাদিত টেক্সট দিয়ে আপডেট
                        if (iconHTML) {
                            button.innerHTML = `${iconHTML[0]} ${translation}`;
                        } else {
                            button.textContent = translation;
                        }
                    }
                });
        
        
        
                                  // ========== শপিং কার্ট বাটন অংশ ==========
                // "কার্টে যোগ করুন" বাটন আপডেট - নতুন অংশ
                document.querySelectorAll('.footer-title').forEach(button => {
                    // আইকন সংরক্ষণ করার জন্য আমরা innerHTML ব্যবহার করছি
                    const iconHTML = button.innerHTML.match(/<i[^>]*>[^<]*<\/i>/);
                    let buttonText = button.textContent.trim();
                    
                    // বাংলায় হলে "কার্টে যোগ করুন", ইংরেজিতে "See More"t"
                    if (buttonText.includes('জনপ্রিয় কোর্স') || buttonText.includes('Popular Courses"')) {
                        const baseText = buttonText.includes('জনপ্রিয় কোর্স') ? 'জনপ্রিয় কোর্স' : 'Popular Courses';
                        const translation = getTranslationForFullText(baseText, fromLang, toLang);
                        
                        // আইকন + অনুবাদিত টেক্সট দিয়ে আপডেট
                        if (iconHTML) {
                            button.innerHTML = `${iconHTML[0]} ${translation}`;
                        } else {
                            button.textContent = translation;
                        }
                    }
                });
        
                
        
                                  // ========== শপিং কার্ট বাটন অংশ ==========
                // "কার্টে যোগ করুন" বাটন আপডেট - নতুন অংশ
                document.querySelectorAll('.footer-title').forEach(button => {
                    // আইকন সংরক্ষণ করার জন্য আমরা innerHTML ব্যবহার করছি
                    const iconHTML = button.innerHTML.match(/<i[^>]*>[^<]*<\/i>/);
                    let buttonText = button.textContent.trim();
                    
                    // বাংলায় হলে "কার্টে যোগ করুন", ইংরেজিতে "See More"t"
                    if (buttonText.includes('নিউজলেটার') || buttonText.includes('Newsletter')) {
                        const baseText = buttonText.includes('নিউজলেটার') ? 'নিউজলেটার' : 'Newsletter';
                        const translation = getTranslationForFullText(baseText, fromLang, toLang);
                        
                        // আইকন + অনুবাদিত টেক্সট দিয়ে আপডেট
                        if (iconHTML) {
                            button.innerHTML = `${iconHTML[0]} ${translation}`;
                        } else {
                            button.textContent = translation;
                        }
                    }
                });
        
        
                // "কিনুন" বাটন আপডেট
                document.querySelectorAll('.buy-now-btn, [onclick*="buyNow"]').forEach(button => {
                    // কোন আইকন আছে কিনা চেক
                    const iconHTML = button.innerHTML.match(/<i[^>]*>[^<]*<\/i>/);
                    let buttonText = button.textContent.trim();
                    
                    // বাংলায় হলে "কিনুন", ইংরেজিতে "Buy Now"
                    if (buttonText.includes('কিনুন') || buttonText.includes('Buy Now')) {
                        const baseText = buttonText.includes('কিনুন') ? 'কিনুন' : 'Buy Now';
                        const translation = getTranslationForFullText(baseText, fromLang, toLang);
                        
                        // আইকন + অনুবাদিত টেক্সট দিয়ে আপডেট
                        if (iconHTML) {
                            button.innerHTML = `${iconHTML[0]} ${translation}`;
                        } else {
                            button.textContent = translation;
                        }
                    }
                });
                
                // ========== অন্যান্য সেকশন আপডেট ==========
                // সাইটের বাকি টেক্সট এলিমেন্ট আপডেট করার জন্য
                // আমরা কয়েকটি সাধারণ এলিমেন্ট ধরব যেমন h1, h2, h3, p, button, a ইত্যাদি
                updateTextElements('h1, h2, h3, h4, h5, h6, p, a.btn, .card-title, span, div, .card-text, a, button, .section-title, .section-subtitle', fromLang, toLang);
            }
        
            // টেক্সট এলিমেন্ট আপডেট করার জন্য হেল্পার ফাংশন
            function updateTextElements(selectors, fromLang, toLang) {
                document.querySelectorAll(selectors).forEach(element => {
                    
        
        
        
        
        
        
        
        
        
        
        
        
        
        
                    // টেক্সট ট্রান্সলেশন চেক করা
                    if (element.childNodes.length === 1 && element.childNodes[0].nodeType === Node.TEXT_NODE) {
                        // শুধু টেক্সট নোড থাকলে সেটা আপডেট করা
                        const originalText = element.textContent.trim();
                        
                        // যদি খালি না হয় এবং দৈর্ঘ্য ১ এর বেশি হয়
                        if (originalText && originalText.length > 1) {
                            // ক্লাসে জেকুয়েরি সিলেক্টর আছে কিনা চেক করি
                            const isJQuery = element.classList && element.classList.contains('dropdown-toggle');
                            
                            // ড্রপডাউন টগল বাদ দিয়ে অন্য এলিমেন্টগুলো আপডেট করা
                            if (!isJQuery) {
                                // সংখ্যা এবং বিশেষ সিম্বল বাদে সাধারণ টেক্সট চেক করা
                                if (!/^[\d\s.,৳]+$/.test(originalText)) {
                                    const translation = getTranslationForFullText(originalText, fromLang, toLang);
                                    
                                    // যদি অনুবাদ পাওয়া যায় তবে আপডেট করা
                                    if (translation && translation !== originalText) {
                                        element.textContent = translation;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // অনুবাদের জন্য ফাংশন (সম্পূর্ণ টেক্সট খোঁজা)
            function getTranslationForFullText(text, fromLang, toLang) {
                // দেওয়া টেক্সট অনুসারে অনুবাদ খোঁজা
                if (languages[fromLang].translations.hasOwnProperty(text)) {
                    return languages[fromLang].translations[text];
                }
                
                // যদি পুরো শব্দে না পাওয়া যায়, তাহলে অর্থযুক্ত ভাষা শব্দ ফেরত
                return text;
            }
            
            // পেজ লোড হলে সঞ্চিত ভাষা প্রয়োগ করা
            function initializeLanguage() {
                const savedLanguage = localStorage.getItem('preferredLanguage');
                
                // আগের সেভ করা ভাষা লোড করা
                if (savedLanguage) {
                    const currentLangSpan = languageToggle.querySelector('span');
                    const currentLang = currentLangSpan.textContent;
                    
                    // যদি সেভ করা ভাষা বর্তমান ভাষা থেকে ভিন্ন হয়
                    if (savedLanguage !== currentLang) {
                        // ভাষা বাটন আপডেট করা
                        currentLangSpan.textContent = savedLanguage;
                        
                        // ভাষা এলিমেন্ট আপডেট করা
                        updateLanguageElements(currentLang, savedLanguage);
                    }
                }
            }
            
            // কাস্টম ক্যাটেগরি ভাষা আপডেট ফাংশন
            function updateCategoryElements() {
                // ক্যাটেগরি শিরোনাম আপডেট
                const categoryHeading = document.querySelector('.category-section h2');
                if (categoryHeading) {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = categoryHeading.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        categoryHeading.textContent = translation;
                    }
                }
                
                // ক্যাটেগরি আইটেম আপডেট
                document.querySelectorAll('.category-item h3').forEach(item => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = item.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        item.textContent = translation;
                    }
                });
                
                // ক্যাটেগরি কোর্স কাউন্ট আপডেট
                document.querySelectorAll('.category-item .course-count').forEach(countElement => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = countElement.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        countElement.textContent = translation;
                    }
                });
            }
            
            // ফিচার কার্ড সেকশন আপডেট ফাংশন
            function updateFeatureCards() {
                // ফিচার কার্ড টাইটেল আপডেট
                document.querySelectorAll('.feature-card h3').forEach(title => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = title.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        title.textContent = translation;
                    }
                });
                
                // ফিচার কার্ড বিবরণ আপডেট
                document.querySelectorAll('.feature-card p').forEach(desc => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = desc.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        desc.textContent = translation;
                    }
                });
            }
            
            // কোর্স কার্ড সেকশন আপডেট ফাংশন
            function updateCourseCards() {
                // কোর্স সেকশন টাইটেল আপডেট
                const coursesSectionTitle = document.querySelector('.courses-section h2');
                if (coursesSectionTitle) {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = coursesSectionTitle.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        coursesSectionTitle.textContent = translation;
                    }
                }
                
                // কোর্স সেকশন সাবটাইটেল আপডেট
                const coursesSectionSubtitle = document.querySelector('.courses-section p');
                if (coursesSectionSubtitle) {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = coursesSectionSubtitle.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        coursesSectionSubtitle.textContent = translation;
                    }
                }
                
                // কোর্স ক্যাটাগরি ট্যাব আপডেট
                document.querySelectorAll('.course-tabs .tab-button').forEach(tab => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = tab.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        tab.textContent = translation;
                    }
                });
                
                // কোর্স কার্ড টাইটেল আপডেট
                document.querySelectorAll('.course-card .card-title').forEach(title => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = title.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        title.textContent = translation;
                    }
                });
                
                // কোর্স কার্ড শিক্ষক নাম আপডেট
                document.querySelectorAll('.course-card .teacher-name').forEach(name => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = name.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        name.textContent = translation;
                    }
                });
                
                // কোর্স কার্ড বর্ণনা আপডেট
                document.querySelectorAll('.course-card .card-text').forEach(desc => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = desc.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        desc.textContent = translation;
                    }
                });
                
                // কোর্স কার্ড মেটা ইনফো আপডেট (অধ্যায়, শিক্ষার্থী, রেটিং)
                document.querySelectorAll('.course-card .course-meta span').forEach(meta => {
                    const currentLang = document.documentElement.lang === 'bn' ? 'বাংলা' : 'English';
                    const altLang = languages[currentLang].altLang;
                    
                    const originalText = meta.textContent.trim();
                    const translation = getTranslationForFullText(originalText, currentLang, altLang);
                    
                    if (translation) {
                        meta.textContent = translation;
                    }
                });
            }
            
            // ইভেন্ট লিসেনার সংযোজন করা
            if (languageToggle) {
                languageToggle.addEventListener('click', changeLanguage);
                
                // পেজ লোড হওয়ার সময় ভাষা প্রয়োগ করা
                initializeLanguage();
                
                // কাস্টম ক্যাটেগরি অংশ আপডেট করা
                updateCategoryElements();
                
                // ফিচার কার্ড আপডেট করা
                updateFeatureCards();
                
                // কোর্স কার্ড আপডেট করা
                updateCourseCards();
            }
        });
        </script> 
        <!-- *full navigation bar end point -->
        <!-- *full navigation bar end point -->
        
        
        
        </head>
        
        


















<style>
    .main-container {
        max-width: 1000px;
        margin: 20px auto;
        width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 15px;
    }

    .profile-container {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 20px;
    }

    .profile-sidebar {
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 20px;
        height: fit-content;
    }

    .profile-picture {
        width: 150px;
        height: 150px;
        border-radius: 50%;
        background-color: #e5e7eb;
        margin: 0 auto 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
    }

    .profile-picture img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .profile-picture-placeholder {
        font-size: 60px;
        color: #9ca3af;
    }

    .edit-photo {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: rgba(0,0,0,0.6);
        color: white;
        text-align: center;
        padding: 8px 0;
        cursor: pointer;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.2s;
    }

    .profile-picture:hover .edit-photo {
        opacity: 1;
    }

    .profile-info {
        text-align: center;
        margin-bottom: 20px;
    }

    .profile-name {
        font-size: 22px;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .profile-email {
        color: #6b7280;
        font-size: 15px;
    }

    .profile-status {
        padding: 5px 15px;
        background-color: #ecfdf5;
        color: #047857;
        border-radius: 15px;
        font-size: 14px;
        display: inline-block;
        margin-top: 10px;
    }

    .main-content {
        background-color: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        padding: 25px;
    }

    .section-title {
        font-size: 18px;
        margin-bottom: 20px;
        color: #374151;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .edit-btn {
        background-color: #f3f4f6;
        color: #374151;
        border: none;
        padding: 5px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 14px;
        transition: all 0.3s;
    }

    .edit-btn:hover {
        background-color: #e5e7eb;
    }

    .profile-details {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
    }

    .detail-item {
        margin-bottom: 20px;
    }

    .detail-label {
        font-size: 14px;
        color: #6b7280;
        margin-bottom: 5px;
    }

    .detail-value {
        font-size: 16px;
        color: #111827;
    }

    .form-group {
        margin-bottom: 15px;
        text-align: left;
    }

    label {
        display: block;
        margin-bottom: 8px;
        font-size: 15px;
        font-weight: bold;
        color: #333;
    }

    input, select, textarea {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 15px;
        transition: border-color 0.3s;
    }

    input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: #6A35F2;
    }

    .button {
        background-color: #6A35F2;
        color: white;
        border: none;
        border-radius: 5px;
        padding: 12px 20px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: opacity 0.3s;
        opacity: 0.9;
    }

    .button:hover {
        opacity: 1;
    }

    .cancel-btn {
        background-color: #f3f4f6;
        color: #374151;
        margin-right: 10px;
    }

    .form-actions {
        display: flex;
        justify-content: flex-end;
        margin-top: 20px;
    }

    .file-input {
        display: none;
    }

    .password-container {
        position: relative;
    }

    .toggle-password {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        background: none;
        border: none;
        color: #666;
        cursor: pointer;
        font-size: 14px;
    }

    .edit-password-link {
        color: #6A35F2;
        text-decoration: none;
        font-size: 14px;
        cursor: pointer;
    }

    .edit-password-link:hover {
        text-decoration: underline;
    }

    .modal-overlay0 {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        display: none;
    }

    .modal0 {
        background-color: white;
        border-radius: 10px;
        padding: 25px;
        width: 100%;
        max-width: 450px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .modal-title {
        font-size: 20px;
        font-weight: bold;
        color: #374151;
    }

    .close-modal {
        background: none;
        border: none;
        font-size: 22px;
        cursor: pointer;
        color: #9ca3af;
    }

    .error-message {
        color: #e74c3c;
        font-size: 14px;
        margin-top: 5px;
        display: none;
    }

    .show-error {
        display: block;
    }

    .success-message {
        background-color: #d4edda;
        color: #155724;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 20px;
        display: none;
    }
    
    .loading-spinner {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1001;
        display: none;
    }

    .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid #6A35F2;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* Responsive settings */
    @media (max-width: 768px) {
        .profile-container {
            grid-template-columns: 1fr;
        }
        
        .profile-picture {
            width: 120px;
            height: 120px;
        }
        
        .profile-details {
            grid-template-columns: 1fr;
        }
    }
</style>


<div class="main-container">
    <div class="profile-container">
        <div class="profile-sidebar">
            <div class="profile-picture" id="profilePicture">
                <div class="profile-picture-placeholder" id="profileImagePlaceholder">
                    <span>👤</span>
                </div>
                <img id="profileImage" style="display: none;" alt="প্রোফাইল ছবি">
                <div class="edit-photo" id="editPhotoBtn">ছবি পরিবর্তন করুন</div>
                <input type="file" id="profilePictureInput" class="file-input" accept="image/*">
            </div>
            
            <div class="profile-info">
                <h2 class="profile-name" id="profileName">ব্যবহারকারীর নাম</h2>
                <p class="profile-email" id="profileEmail">example@email.com</p>
                <div class="profile-status">সক্রিয় সদস্য</div>
            </div>
        </div>
        
        <div class="main-content">
            <!-- View Mode -->
            <div id="viewModeSection">
                <div class="section-title">
                    <h3>প্রোফাইল তথ্য</h3>
                    <button class="edit-btn" id="editProfileBtn">প্রোফাইল সম্পাদনা</button>
                </div>
                
                <div class="profile-details">
                    <div class="detail-item">
                        <div class="detail-label">পূর্ণ নাম</div>
                        <div class="detail-value" id="viewFullName">-</div>
                    </div>
                    
                    <div class="detail-item">
                        <div class="detail-label">ইমেইল</div>
                        <div class="detail-value" id="viewEmail">-</div>
                    </div>
                    
                    <div class="detail-item">
                        <div class="detail-label">মোবাইল নম্বর</div>
                        <div class="detail-value" id="viewPhone">-</div>
                    </div>
                    
                    <div class="detail-item">
                        <div class="detail-label">জন্ম তারিখ</div>
                        <div class="detail-value" id="viewBirthday">-</div>
                    </div>
                    
                    <div class="detail-item">
                        <div class="detail-label">লিঙ্গ</div>
                        <div class="detail-value" id="viewGender">-</div>
                    </div>
                    
                    <div class="detail-item">
                        <div class="detail-label">ঠিকানা</div>
                        <div class="detail-value" id="viewAddress">-</div>
                    </div>
                </div>
                
                <div class="section-title" style="margin-top: 30px;">
                    <h3>পাসওয়ার্ড ও নিরাপত্তা</h3>
                    <button class="edit-btn" id="changePasswordBtn">পাসওয়ার্ড পরিবর্তন</button>
                </div>
                
                <div class="profile-details">
                    <div class="detail-item">
                        <div class="detail-label">পাসওয়ার্ড</div>
                        <div class="detail-value">********</div>
                    </div>
                    
                    <div class="detail-item">
                        <div class="detail-label">শেষ আপডেট</div>
                        <div class="detail-value" id="passwordLastUpdated">-</div>
                    </div>
                </div>
            </div>
            
            <!-- Edit Mode -->
            <div id="editModeSection" style="display: none;">
                <div class="section-title">
                    <h3>প্রোফাইল সম্পাদনা</h3>
                </div>
                
                <form id="editProfileForm">
                    <div class="profile-details">
                        <div class="form-group">
                            <label for="editFullName">পূর্ণ নাম</label>
                            <input type="text" id="editFullName" placeholder="আপনার পূর্ণ নাম লিখুন">
                            <p class="error-message" id="fullNameError">নাম প্রয়োজন</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="editEmail">ইমেইল</label>
                            <input type="email" id="editEmail" placeholder="আপনার ইমেইল লিখুন" disabled>
                        </div>
                        
                        <div class="form-group">
                            <label for="editPhone">মোবাইল নম্বর</label>
                            <input type="tel" id="editPhone" placeholder="আপনার মোবাইল নম্বর লিখুন">
                            <p class="error-message" id="phoneError">সঠিক মোবাইল নম্বর লিখুন</p>
                        </div>
                        
                        <div class="form-group">
                            <label for="editBirthday">জন্ম তারিখ</label>
                            <input type="date" id="editBirthday">
                        </div>
                        
                        <div class="form-group">
                            <label for="editGender">লিঙ্গ</label>
                            <select id="editGender">
                                <option value="">লিঙ্গ নির্বাচন করুন</option>
                                <option value="পুরুষ">পুরুষ</option>
                                <option value="মহিলা">মহিলা</option>
                                <option value="অন্যান্য">অন্যান্য</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="editAddress">ঠিকানা</label>
                        <textarea id="editAddress" rows="3" placeholder="আপনার ঠিকানা লিখুন"></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="button cancel-btn" id="cancelEditBtn">বাতিল</button>
                        <button type="submit" class="button">সংরক্ষণ করুন</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Change Password Modal -->
<div class="modal-overlay0" id="passwordModal">
    <div class="modal0">
        <div class="modal-header">
            <h3 class="modal-title">পাসওয়ার্ড পরিবর্তন করুন</h3>
            <button class="close-modal" id="closePasswordModal">&times;</button>
        </div>
        
        <div class="success-message" id="passwordSuccess">
            পাসওয়ার্ড সফলভাবে পরিবর্তন করা হয়েছে।
        </div>
        
        <form id="changePasswordForm">
            <div class="form-group">
                <label for="currentPassword">বর্তমান পাসওয়ার্ড</label>
                <div class="password-container">
                    <input type="password" id="currentPassword" placeholder="আপনার বর্তমান পাসওয়ার্ড লিখুন">
                    <button type="button" class="toggle-password" onclick="togglePasswordVisibility('currentPassword', 'currentPasswordToggle')" id="currentPasswordToggle">দেখুন</button>
                </div>
                <p class="error-message" id="currentPasswordError">বর্তমান পাসওয়ার্ড প্রয়োজন</p>
            </div>
            
            <div class="form-group">
                <label for="newPassword">নতুন পাসওয়ার্ড</label>
                <div class="password-container">
                    <input type="password" id="newPassword" placeholder="নতুন পাসওয়ার্ড লিখুন">
                    <button type="button" class="toggle-password" onclick="togglePasswordVisibility('newPassword', 'newPasswordToggle')" id="newPasswordToggle">দেখুন</button>
                </div>
                <p class="error-message" id="newPasswordError">পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে</p>
            </div>
            
            <div class="form-group">
                <label for="confirmPassword">নতুন পাসওয়ার্ড নিশ্চিত করুন</label>
                <div class="password-container">
                    <input type="password" id="confirmPassword" placeholder="নতুন পাসওয়ার্ড আবার লিখুন">
                    <button type="button" class="toggle-password" onclick="togglePasswordVisibility('confirmPassword', 'confirmPasswordToggle')" id="confirmPasswordToggle">দেখুন</button>
                </div>
                <p class="error-message" id="confirmPasswordError">পাসওয়ার্ড মিলছে না</p>
            </div>
            
            <div class="form-actions">
                <button type="button" class="button cancel-btn" id="cancelPasswordChange">বাতিল</button>
                <button type="submit" class="button">পরিবর্তন করুন</button>
            </div>
        </form>
    </div>
</div>

<!-- Loading Spinner -->
<div class="loading-spinner" id="loadingSpinner">
    <div class="spinner"></div>
</div>




<script>
    // 1. Global API URL Variable - এটি এপ্লিকেশনের সকল স্থানে ব্যবহার করতে হবে
// const DB_API_URL = "https://t-i-a-storage-backend.onrender.com"; // সার্ভার URL - প্রোডাকশনে এটি আপডেট করতে হবে

// 2. লোডিং স্পিনার কন্ট্রোল
function showLoading() {
    document.getElementById('loadingSpinner').style.display = 'flex';
}

function hideLoading() {
    document.getElementById('loadingSpinner').style.display = 'none';
}

// 3. এরর মেসেজ কন্ট্রোল
function showError(elementId, message) {
    const errorElement = document.getElementById(elementId);
    if (errorElement) {
        errorElement.textContent = message;
        errorElement.style.display = 'block';
    }
}

function hideError(elementId) {
    const errorElement = document.getElementById(elementId);
    if (errorElement) {
        errorElement.style.display = 'none';
    }
}

// 4. ইউজার লগইন স্টেটাস চেক
async function checkLoginStatus() {
    const token = sessionStorage.getItem('authToken');
    const userData = sessionStorage.getItem('currentUser');
    
    if (token && userData) {
        // UI elements update for logged in state
        const loginBtn = document.getElementById('loginButton');
        const userMenu = document.getElementById('userMenuContainer');
        
        if (loginBtn && userMenu) {
            loginBtn.style.display = 'none';
            userMenu.style.display = 'block';
            
            // Set user name in dropdown
            const user = JSON.parse(userData);
            const userNameElement = document.getElementById('userNameDisplay');
            if (userNameElement) {
                userNameElement.textContent = user.name || 'ব্যবহারকারী';
            }
        }
        
        // Validate token with server (optional)
        try {
            const response = await fetch(`${DB_API_URL}/user-profile`, {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            const data = await response.json();
            return data.success;
        } catch (error) {
            console.error("Token validation error:", error);
            return true; // Still return true if server error, assuming token is valid
        }
    } else {
        // UI elements update for logged out state
        const loginBtn = document.getElementById('loginButton');
        const userMenu = document.getElementById('userMenuContainer');
        
        if (loginBtn && userMenu) {
            loginBtn.style.display = 'block';
            userMenu.style.display = 'none';
        }
        
        return false;
    }
}

// 5. পাসওয়ার্ড ভিজিবিলিটি টগল
function togglePasswordVisibility(inputId, buttonId) {
    const passwordInput = document.getElementById(inputId);
    const toggleButton = document.getElementById(buttonId);
    
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleButton.textContent = 'লুকান';
    } else {
        passwordInput.type = 'password';
        toggleButton.textContent = 'দেখুন';
    }
}

// 6. নোটিফিকেশন দেখানো
function showNotification(message, type = 'info') {
    // Create notification element if it doesn't exist
    let notification = document.getElementById('notification');
    if (!notification) {
        notification = document.createElement('div');
        notification.id = 'notification';
        document.body.appendChild(notification);
    }
    
    // Set notification style based on type
    notification.className = `notification ${type}`;
    notification.textContent = message;
    notification.style.display = 'block';
    
    // Auto hide after 5 seconds
    setTimeout(() => {
        notification.style.display = 'none';
    }, 5000);
}

// 7. ইমেইল ভ্যালিডেশন
function validateEmail(email) {
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email.trim());
}

// 8. প্রোফাইল ডেটা লোড করার ফাংশন
async function loadProfileData() {
    try {
        showLoading();
        
        // সেশন স্টোরেজ থেকে টোকেন পড়ুন
        const token = sessionStorage.getItem('authToken');
        
        
        // API থেকে সম্পূর্ণ প্রোফাইল ডেটা পান
        const response = await fetch(`${DB_API_URL}/user-profile`, {
            method: 'GET',
            headers: {
                'Authorization': `Bearer ${token}`
            }
        });
        
        const data = await response.json();
        
        if (data.success) {
            // সেশন স্টোরেজ আপডেট করুন
            sessionStorage.setItem('currentUser', JSON.stringify(data.user));
            
            // প্রোফাইল ডেটা প্রদর্শন
            displayProfileData(data.user);
        } else {
            // যদি API কল ব্যর্থ হয় তবে লোকাল স্টোরেজের ডেটা ব্যবহার করুন
            const userData = JSON.parse(sessionStorage.getItem('currentUser'));
            if (userData) {
                displayProfileData(userData);
            } else {
                showNotification('প্রোফাইল ডেটা লোড করা যায়নি।', 'error');
            }
        }
    } catch (error) {
        console.error('Error loading profile data:', error);
        
        // এরর হলে লোকাল ডেটা ব্যবহার করুন
        const userData = JSON.parse(sessionStorage.getItem('currentUser'));
        if (userData) {
            displayProfileData(userData);
        } else {
            showNotification('প্রোফাইল ডেটা লোড করা যায়নি।', 'error');
        }
    } finally {
        hideLoading();
    }
}

// 9. প্রোফাইল ডেটা প্রদর্শন
function displayProfileData(user) {
    // সাইডবার প্রোফাইল ইনফো
    document.getElementById('profileName').textContent = user.name || 'ব্যবহারকারীর নাম';
    document.getElementById('profileEmail').textContent = user.email || 'example@email.com';
    
    // প্রোফাইল ভিউ মোড ডেটা
    document.getElementById('viewFullName').textContent = user.name || '-';
    document.getElementById('viewEmail').textContent = user.email || '-';
    document.getElementById('viewPhone').textContent = user.phone || '-';
    document.getElementById('viewBirthday').textContent = user.birthday || '-';
    document.getElementById('viewGender').textContent = user.gender || '-';
    document.getElementById('viewAddress').textContent = user.address || '-';
    
    // পাসওয়ার্ড আপডেট তারিখ
    document.getElementById('passwordLastUpdated').textContent = user.passwordUpdated || '-';
    
    // এডিট মোড ফর্ম ফিল্ড আপডেট
    document.getElementById('editFullName').value = user.name || '';
    document.getElementById('editEmail').value = user.email || '';
    document.getElementById('editPhone').value = user.phone || '';
    document.getElementById('editBirthday').value = user.birthday || '';
    document.getElementById('editGender').value = user.gender || '';
    document.getElementById('editAddress').value = user.address || '';
    
    // প্রোফাইল ইমেজ দেখান (যদি থাকে)
    if (user.profileImage) {
        // পূর্ণ URL নিশ্চিত করুন
        const imageUrl = user.profileImage.startsWith('http') ? 
            user.profileImage : 
            `${DB_API_URL}${user.profileImage}`;
            
        document.getElementById('profileImage').src = imageUrl;
        document.getElementById('profileImage').style.display = 'block';
        document.getElementById('profileImagePlaceholder').style.display = 'none';
    } else {
        document.getElementById('profileImagePlaceholder').style.display = 'flex';
        document.getElementById('profileImage').style.display = 'none';
    }
}

// 10. এডিট মোড টগল করার ফাংশন
function toggleEditMode(isEdit) {
    if (isEdit) {
        document.getElementById('viewModeSection').style.display = 'none';
        document.getElementById('editModeSection').style.display = 'block';
    } else {
        document.getElementById('viewModeSection').style.display = 'block';
        document.getElementById('editModeSection').style.display = 'none';
    }
}

// DOM লোড হওয়ার সময় ইনিশিয়ালাইজেশন
document.addEventListener('DOMContentLoaded', async function() {
    // চেক করুন কোন পেজে আছি
    const isProfilePage = document.querySelector('.profile-container');
    
    if (isProfilePage) {
        // প্রোফাইল পেজ ইনিশিয়ালাইজেশন
        const isLoggedIn = await checkLoginStatus();
        
        if (isLoggedIn) {
            // প্রোফাইল ডেটা লোড করুন
            loadProfileData();
            
            // এডিট প্রোফাইল বাটন এবং ইভেন্ট লিসেনার
            document.getElementById('editProfileBtn').addEventListener('click', function() {
                toggleEditMode(true);
            });
            
            // বাতিল বাটন ইভেন্ট লিসেনার
            document.getElementById('cancelEditBtn').addEventListener('click', function() {
                toggleEditMode(false);
                
                // ফর্ম রিসেট করুন (পুরানো মান ফিরিয়ে আনুন)
                const userData = JSON.parse(sessionStorage.getItem('currentUser'));
                if (userData) {
                    document.getElementById('editFullName').value = userData.name || '';
                    document.getElementById('editEmail').value = userData.email || '';
                    document.getElementById('editPhone').value = userData.phone || '';
                    document.getElementById('editBirthday').value = userData.birthday || '';
                    document.getElementById('editGender').value = userData.gender || '';
                    document.getElementById('editAddress').value = userData.address || '';
                }
            });
            
            // প্রোফাইল আপডেট ফর্ম সাবমিট ইভেন্ট
            document.getElementById('editProfileForm').addEventListener('submit', handleProfileUpdate);
            
            // পাসওয়ার্ড পরিবর্তন ইভেন্ট
            document.getElementById('changePasswordBtn').addEventListener('click', function() {
                document.getElementById('passwordModal').style.display = 'flex';
                document.getElementById('passwordSuccess').style.display = 'none';
                
                // ফর্ম রিসেট
                document.getElementById('changePasswordForm').reset();
                hideError('currentPasswordError');
                hideError('newPasswordError');
                hideError('confirmPasswordError');
            });
            
            // পাসওয়ার্ড মোডাল বন্ধ করার বাটন
            document.getElementById('closePasswordModal').addEventListener('click', function() {
                document.getElementById('passwordModal').style.display = 'none';
            });
            
            document.getElementById('cancelPasswordChange').addEventListener('click', function() {
                document.getElementById('passwordModal').style.display = 'none';
            });
            
            // পাসওয়ার্ড পরিবর্তন ফর্ম সাবমিট
            document.getElementById('changePasswordForm').addEventListener('submit', handlePasswordChange);
            
            // প্রোফাইল ছবি আপলোড বাটন
            document.getElementById('editPhotoBtn').addEventListener('click', function() {
                document.getElementById('profilePictureInput').click();
            });
            
            // প্রোফাইল ছবি ফাইল আপলোড ইভেন্ট
            document.getElementById('profilePictureInput').addEventListener('change', handleProfileImageUpload);
        } 
    }
});

// 11. প্রোফাইল আপডেট হ্যান্ডলার ফাংশন
async function handleProfileUpdate(e) {
    e.preventDefault();
    
    // ফর্ম ডেটা সংগ্রহ
    const name = document.getElementById('editFullName').value;
    const phone = document.getElementById('editPhone').value;
    const birthday = document.getElementById('editBirthday').value;
    const gender = document.getElementById('editGender').value;
    const address = document.getElementById('editAddress').value;
    
    // ভ্যালিডেশন
    let isValid = true;
    
    if (!name) {
        showError('fullNameError', 'নাম প্রয়োজন');
        isValid = false;
    } else {
        hideError('fullNameError');
    }
    
    if (phone && !/^(\+?88)?01[3-9]\d{8}$/.test(phone)) {
        showError('phoneError', 'সঠিক বাংলাদেশী মোবাইল নম্বর লিখুন');
        isValid = false;
    } else {
        hideError('phoneError');
    }
    
    if (!isValid) return;
    
    try {
        showLoading();
        
        const token = sessionStorage.getItem('authToken');
        
        // API কল - সঠিক এন্ডপয়েন্ট ব্যবহার করুন
        const response = await fetch(`${DB_API_URL}/update-profile`, {
            method: 'POST', // সার্ভারে POST মেথড ব্যবহার করা হয়েছে
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify({
                name,
                phone,
                birthday,
                gender,
                address
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // আপডেট সফল
            showNotification('প্রোফাইল সফলভাবে আপডেট করা হয়েছে।', 'success');
            
            // সেশন স্টোরেজ আপডেট করুন
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            const updatedUser = { 
                ...currentUser, 
                name, 
                phone, 
                birthday, 
                gender, 
                address 
            };
            sessionStorage.setItem('currentUser', JSON.stringify(updatedUser));
            
            // প্রোফাইল ভিউ মোডে ফিরে যান
            displayProfileData(updatedUser);
            toggleEditMode(false);
        } else {
            showNotification(data.message || 'প্রোফাইল আপডেট করা যায়নি।', 'error');
        }
    } catch (error) {
        console.error('Profile update error:', error);
        showNotification('প্রোফাইল আপডেট প্রক্রিয়ায় ত্রুটি হয়েছে।', 'error');
    } finally {
        hideLoading();
    }
}

// 12. পাসওয়ার্ড পরিবর্তন হ্যান্ডলার
async function handlePasswordChange(e) {
    e.preventDefault();
    
    const currentPassword = document.getElementById('currentPassword').value;
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmPassword').value;
    
    // ভ্যালিডেশন
    let isValid = true;
    
    if (!currentPassword) {
        showError('currentPasswordError', 'বর্তমান পাসওয়ার্ড প্রয়োজন');
        isValid = false;
    } else {
        hideError('currentPasswordError');
    }
    
    if (newPassword.length < 6) {
        showError('newPasswordError', 'পাসওয়ার্ড কমপক্ষে ৬ অক্ষরের হতে হবে');
        isValid = false;
    } else {
        hideError('newPasswordError');
    }
    
    if (newPassword !== confirmPassword) {
        showError('confirmPasswordError', 'পাসওয়ার্ড মিলছে না');
        isValid = false;
    } else {
        hideError('confirmPasswordError');
    }
    
    if (!isValid) return;
    
    try {
        showLoading();
        
        const token = sessionStorage.getItem('authToken');
        
        // API কল - সঠিক এন্ডপয়েন্ট এবং মেথড
        const response = await fetch(`${DB_API_URL}/change-password`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${token}`
            },
            body: JSON.stringify({
                currentPassword,
                newPassword,
                confirmPassword
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            // আপডেট সফল
            document.getElementById('passwordSuccess').style.display = 'block';
            document.getElementById('changePasswordForm').reset();
            
            // পাসওয়ার্ড আপডেট তারিখ আপডেট করুন
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            if (currentUser) {
                currentUser.passwordUpdated = data.passwordUpdated || new Date().toLocaleDateString('bn-BD');
                sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                document.getElementById('passwordLastUpdated').textContent = 
                    currentUser.passwordUpdated || '-';
            }
                
            // ৩ সেকেন্ড পর মোডাল বন্ধ
            setTimeout(function() {
                document.getElementById('passwordModal').style.display = 'none';
            }, 3000);
        } else {
            showError('currentPasswordError', data.message || 'বর্তমান পাসওয়ার্ড সঠিক নয়');
        }
    } catch (error) {
        console.error('Password change error:', error);
        showNotification('পাসওয়ার্ড পরিবর্তন প্রক্রিয়ায় ত্রুটি হয়েছে।', 'error');
    } finally {
        hideLoading();
    }
}

// 13. প্রোফাইল ছবি আপলোড হ্যান্ডলার
async function handleProfileImageUpload(e) {
    if (!e.target.files || !e.target.files[0]) return;

    const file = e.target.files[0];
    
    // চেক ফাইল টাইপ
    if (!file.type.startsWith('image/')) {
        showNotification('অনুগ্রহ করে শুধুমাত্র ছবি আপলোড করুন।', 'error');
        return;
    }
    
    // চেক ফাইল সাইজ (২ MB সীমা)
    if (file.size > 2 * 1024 * 1024) {
        showNotification('ছবির সাইজ ২ মেগাবাইটের কম হতে হবে।', 'error');
        return;
    }
    
    try {
        showLoading();
        
        const token = sessionStorage.getItem('authToken');
        
        // FormData তৈরি করুন
        const formData = new FormData();
        formData.append('profileImage', file);
        
        // API কল - সঠিক এন্ডপয়েন্ট
        // এখানে হেডার থেকে Content-Type বাদ দিন, fetch API নিজেই মাল্টিপার্ট সেট করবে
        const response = await fetch(`${DB_API_URL}/upload-profile-picture`, {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${token}`
                // Content-Type হেডার সরিয়ে দিন
            },
            body: formData
        });
        
        const data = await response.json();
        
        if (data.success) {
            // আপলোড সফল
            showNotification('প্রোফাইল ছবি সফলভাবে আপডেট করা হয়েছে।', 'success');
            
            // সম্পূর্ণ URL তৈরি করুন
            const imageUrl = data.imageUrl.startsWith('http') ? 
                data.imageUrl : 
                `${DB_API_URL}${data.imageUrl}`;
            
            // ইউজার ডেটা আপডেট
            const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
            currentUser.profileImage = imageUrl;
            sessionStorage.setItem('currentUser', JSON.stringify(currentUser));
            
            // ছবি প্রদর্শন করুন
            document.getElementById('profileImage').src = imageUrl;
            document.getElementById('profileImage').style.display = 'block';
            document.getElementById('profileImagePlaceholder').style.display = 'none';
        } else {
            showNotification(data.message || 'ছবি আপলোড করা যায়নি।', 'error');
        }
    } catch (error) {
        console.error('Image upload error:', error);
        showNotification('ছবি আপলোড প্রক্রিয়ায় ত্রুটি হয়েছে।', 'error');
    } finally {
        hideLoading();
    }
}
</script>


<script>
// প্রোফাইল আইকন ডিসপ্লে স্ক্রিপ্ট - তৃতীয় কোড
// এই কোডটি প্রথম কোডের সাথে কাজ করবে এবং প্রোফাইল আইকন সঠিকভাবে দেখাবে

console.log('Profile Icon Display Script Loaded');

// Profile Icon Management Functions
const ProfileIconManager = {
    // Initialize profile icon display
    init: function() {
        console.log('Initializing Profile Icon Manager');
        this.setupEventListeners();
        this.checkAndDisplayProfileIcon();
        
        // Monitor authentication state changes
        this.monitorAuthState();
    },

    // Check authentication and display appropriate UI
    checkAndDisplayProfileIcon: function() {
        console.log('Checking authentication for profile icon display');
        
        // Check both sessionStorage and localStorage for tokens
        const sessionToken = sessionStorage.getItem('authToken');
        const localToken = localStorage.getItem('authToken');
        const token = sessionToken || localToken;
        
        const userData = sessionStorage.getItem('currentUser') || localStorage.getItem('currentUser');
        
        console.log('Session Token:', !!sessionToken);
        console.log('Local Token:', !!localToken);
        console.log('User Data:', !!userData);
        
        const loginButton = document.getElementById('loginButton');
        const profileDropdown = document.getElementById('profileDropdown');
        
        if (!loginButton || !profileDropdown) {
            console.warn('Login button or profile dropdown not found');
            return;
        }
        
        if (token && userData) {
            // User is logged in - show profile dropdown
            console.log('User is authenticated - showing profile dropdown');
            loginButton.style.display = 'none';
            profileDropdown.style.display = 'block';
            
            // Update user name in profile if available
            try {
                const user = JSON.parse(userData);
                this.updateProfileDisplay(user);
            } catch (error) {
                console.error('Error parsing user data:', error);
            }
            
        } else {
            // User is not logged in - show login button
            console.log('User is not authenticated - showing login button');
            loginButton.style.display = 'block';
            profileDropdown.style.display = 'none';
        }
    },

    // Update profile display with user information
    updateProfileDisplay: function(user) {
        console.log('Updating profile display for user:', user.name);
        
        // Update profile name in dropdown if element exists
        const profileNameElement = document.querySelector('#profileDropdown .profile-name');
        if (profileNameElement) {
            profileNameElement.textContent = user.name || 'ব্যবহারকারী';
        }
        
        // Update profile image if available
        const profileImage = document.querySelector('#profileDropdown .profile-image');
        if (profileImage && user.profileImage) {
            profileImage.src = user.profileImage;
        }
    },

    // Setup event listeners for profile dropdown
    setupEventListeners: function() {
        console.log('Setting up profile icon event listeners');
        

        
        // Close dropdown when clicking outside
     
        // Logout button handler
        const logoutButton = document.getElementById('logoutButton');
        if (logoutButton) {
            logoutButton.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('Logout button clicked from profile icon manager');
                this.handleLogout();
            });
        }
    },

    // Toggle dropdown menu
 
    
    // Close dropdown menu
    closeDropdown: function() {
        const dropdownMenu = document.querySelector('.dropdown-menu1');
        if (dropdownMenu) {
            dropdownMenu.style.display = 'none';
        }
    },

    // Handle logout process
    handleLogout: async function() {
        console.log('Processing logout from profile icon manager');
        
        try {
            // Get token for logout API call
            const token = sessionStorage.getItem('authToken') || localStorage.getItem('authToken');
            
            if (token) {
                // Optional: Call logout API
                try {
                    const response = await fetch(`${DB_API_URL}/logout`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${token}`
                        }
                    });
                    
                    const data = await response.json();
                    if (data.success) {
                        console.log('Server logout successful');
                    }
                } catch (apiError) {
                    console.error('Server logout failed:', apiError);
                    // Continue with client-side logout even if server call fails
                }
            }
            
            // Clear all authentication data
            sessionStorage.removeItem('authToken');
            sessionStorage.removeItem('currentUser');
            sessionStorage.removeItem('loginTime');
            localStorage.removeItem('authToken');
            localStorage.removeItem('currentUser');
            
            // Update UI
            this.checkAndDisplayProfileIcon();
            
            // Close dropdown
            this.closeDropdown();
            
            // Show success message
            if (typeof showNotification === 'function') {
                showNotification('সফলভাবে লগআউট করা হয়েছে।', 'success');
            }
            
          
        } catch (error) {
            console.error('Logout process error:', error);
            
            // Force logout even if there's an error
            sessionStorage.clear();
            localStorage.clear();
            this.checkAndDisplayProfileIcon();
        }
    },

    // Monitor authentication state changes
    monitorAuthState: function() {
        console.log('Setting up authentication state monitoring');
        
        // Check every 5 seconds for authentication changes
        setInterval(() => {
            this.checkAndDisplayProfileIcon();
        }, 5000);
        
        // Listen for storage events (when user logs in/out in another tab)
        window.addEventListener('storage', (e) => {
            if (e.key === 'authToken' || e.key === 'currentUser') {
                console.log('Authentication state changed in another tab');
                this.checkAndDisplayProfileIcon();
            }
        });
        
        // Check when page becomes visible again
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
                console.log('Page became visible - checking auth state');
                this.checkAndDisplayProfileIcon();
            }
        });
    },

    // Force refresh profile icon display
    refresh: function() {
        console.log('Force refreshing profile icon display');
        this.checkAndDisplayProfileIcon();
    },

    // Check if user is authenticated
    isAuthenticated: function() {
        const sessionToken = sessionStorage.getItem('authToken');
        const localToken = localStorage.getItem('authToken');
        const userData = sessionStorage.getItem('currentUser') || localStorage.getItem('currentUser');
        
        return !!(sessionToken || localToken) && !!userData;
    }
};

// Override existing checkLoginStatus function to prevent conflicts
const originalCheckLoginStatus = window.checkLoginStatus;
window.checkLoginStatus = function() {
    console.log('checkLoginStatus called - delegating to ProfileIconManager');
    ProfileIconManager.checkAndDisplayProfileIcon();
    
    // Call original function if it exists and is different
    if (originalCheckLoginStatus && originalCheckLoginStatus !== window.checkLoginStatus) {
        try {
            return originalCheckLoginStatus();
        } catch (error) {
            console.error('Error calling original checkLoginStatus:', error);
        }
    }
    
    return ProfileIconManager.isAuthenticated();
};

// Initialize when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded - initializing Profile Icon Manager');
    
    // Wait a bit to ensure other scripts have loaded
    setTimeout(() => {
        ProfileIconManager.init();
    }, 100);
});

// Initialize immediately if DOM is already loaded
if (document.readyState === 'loading') {
    console.log('DOM still loading - waiting for DOMContentLoaded');
} else {
    console.log('DOM already loaded - initializing Profile Icon Manager immediately');
    setTimeout(() => {
        ProfileIconManager.init();
    }, 100);
}

// Make ProfileIconManager globally available
window.ProfileIconManager = ProfileIconManager;

// Add CSS styles for better profile icon display
document.addEventListener('DOMContentLoaded', function() {
    const existingStyle = document.getElementById('profileIconStyles');
    if (!existingStyle) {
        const style = document.createElement('style');
        style.id = 'profileIconStyles';
        style.textContent = `
            /* Enhanced Profile Icon Styles */
            .profile-dropdown {
                position: relative;
                display: none;
            }
            
            .profile-dropdown.show {
                display: block !important;
            }
            
            .profile-icon {
                background: none;
                border: none;
                font-size: 24px;
                color: #333;
                cursor: pointer;
                padding: 8px;
                border-radius: 50%;
                transition: background-color 0.3s ease;
            }
            
            .profile-icon:hover {
                background-color: rgba(0, 0, 0, 0.1);
            }
            
            .dropdown-menu1 {
                display: none;
                position: absolute;
                right: 0;
                top: 100%;
                background-color: white;
                min-width: 200px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                border-radius: 8px;
                overflow: hidden;
            }
            
            .dropdown-menu1.show {
                display: block !important;
            }
            
            .dropdown-item {
                display: block;
                padding: 12px 16px;
                text-decoration: none;
                color: #333;
                transition: background-color 0.2s ease;
            }
            
            .dropdown-item:last-child {
                border-bottom: none;
            }
            
            .dropdown-item:hover {
                background-color: #f8f9fa;
            }
            
            .dropdown-item.logout {
                color: #dc3545;
            }
            
            .dropdown-item.logout:hover {
                background-color: #f8d7da;
            }
            
            /* Login button styles */
            .login-button {
                display: inline-block;
                padding: 8px 16px;
                background-color: #007bff;
                color: white;
                border-radius: 4px;
                text-decoration: none;
                font-weight: 500;
                transition: background-color 0.3s ease;
            }
            
            .login-button:hover {
                background-color: #0056b3;
            }
            
            /* Responsive design */
            @media (max-width: 768px) {
                .dropdown-menu1 {
                    min-width: 160px;
                    right: -10px;
                }
                
                .profile-icon {
                    font-size: 20px;
                    padding: 6px;
                }
            }
        `;
        document.head.appendChild(style);
        console.log('Profile icon styles added');
    }
});

console.log('Profile Icon Display Script Fully Loaded');
</script>












































































</body>
</html>